webpackJsonp([1],{"/WhM":function(e,t){},"/n/C":function(e,t){},"0FBT":function(e,t){},"1mOu":function(e,t){},"1wRH":function(e,t){},"1yNg":function(e,t){},"2Vkn":function(e,t){},"2XWa":function(e,t){},"5pAy":function(e,t){},"6Ls8":function(e,t){},"7Eck":function(e,t){},"9pFh":function(e,t){},AUqT:function(e,t){},Aydw:function(e,t){},BWqv:function(e,t){},D0D8:function(e,t){},EFFx:function(e,t){},ETR9:function(e,t){},I2d7:function(e,t){},Ko2A:function(e,t){},Li41:function(e,t){},NGfQ:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("//Fk"),o=a.n(i),n=a("7+uW"),l={name:"App",created:function(){var e=returnCitySN.cip,t=returnCitySN.cid;this.$cookies.set("ip_address",e),this.$cookies.set("city_code",t),console.info("当前客户端外网IP："+e)}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")(l,s,!1,function(e){a("X6wT")},null,null).exports,c=a("/ocq"),d=a("zL8q"),p=a.n(d),u={name:"index",data:function(){return{contentStyle:{width:"100%",height:document.documentElement.clientHeight+"px","background-image":"url('/static/images/index-bj.jpg')","background-repeat":"no-repeat","background-size":"cover"},loginForm:{userName:"",password:""},rulesForm:{userName:[{required:!0,message:"请输入账户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"密码长度至少6位",trigger:"blur"}]}}},created:function(){var e=this;document.onkeydown=function(t){t=window.event||t,"/"!==e.$route.path||"Enter"!==t.code&&"NumpadEnter"!==t.code||e.onSubmit()}},mounted:function(){},methods:{onSubmit:function(){var e=this;this.$refs.loginForm.validate(function(t){if(t){var a=d.Loading.service({fullscreen:!0,text:"正在登录"});e.$axios({url:"/api/manage/doLogin",method:"post",data:e.loginForm}).then(function(t){if(console.info("后台返回的数据",t.data),"1"===t.data.code){var i=t.data.data;null!==i.avatarUrl&&"null"!==i.avatarUrl||(i.avatarUrl="/static/images/default-avatar.jpeg"),e.$cookies.set("manager_info",i,3600),e.$router.push({path:"/main-info"})}else"-1"===t.data.code&&e.$message.error(t.data.data);e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})}})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{margin:"0px"}},[a("el-main",{style:e.contentStyle},[a("div",{staticClass:"login-div"},[a("div",{staticClass:"form-div"},[a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.rulesForm}},[a("el-form-item",{attrs:{prop:"userName"}},[a("el-input",{staticClass:"input-div",attrs:{placeholder:"请输入账户名","prefix-icon":"el-icon-user"},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{staticClass:"input-div",attrs:{type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"letter-spacing":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("\n              立即登录\n            ")])],1)],1)],1)])])],1)},staticRenderFns:[]};var f=a("VU/8")(u,m,!1,function(e){a("zF+b")},null,null).exports,g={name:"header-menu",data:function(){return{activeIndex:0,info:this.$cookies.get("manager_info"),firstList:[]}},created:function(){},methods:{loadFirstMenu:function(e){this.firstList=e},errorHandler:function(){return!0},handleSelect:function(e,t){switch(console.log(e,t),this.$emit("upActiveIndex",e),e){case"1-2":this.exitLogin();break;case"6":this.$router.push({path:"/echarts"})}},updateInfo:function(){this.info=this.$cookies.get("manager_info")},exitLogin:function(){var e=this;this.$confirm("确定注销登录吗？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=d.Loading.service({fullscreen:!0,text:"正在注销"});e.$axios({url:"/api/manage/exitLogin",method:"post"}).then(function(a){console.info("后台返回的数据",a.data),"1"===a.data.code?(e.$cookies.remove("manager_info"),e.$router.push({path:"/"})):e.$message.error(a.data.data),e.$global.exitLoad(e,t,a.data)})})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e._v(" "),a("el-menu",{staticClass:"el-menu-demo",staticStyle:{display:"inline-block","border-bottom":"none","margin-right":"30px",width:"450px",position:"absolute",top:"0px",left:"200px"},attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#409EFF"},on:{select:e.handleSelect}},e._l(e.firstList,function(t,i){return a("el-menu-item",{key:i,attrs:{index:i}},[e._v(e._s(t.title))])}),1),e._v(" "),a("el-menu",{staticClass:"el-menu-demo",staticStyle:{display:"inline-block","border-bottom":"none","margin-right":"30px",width:"100px"},attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#409EFF"},on:{select:e.handleSelect}},[a("el-submenu",{attrs:{index:"-1"},nativeOn:{click:function(t){return e.handleSelect("5-1","5")}}},[a("template",{slot:"title"},[a("el-avatar",{attrs:{size:50,src:e.info.avatarUrl},on:{error:e.errorHandler}},[a("img",{attrs:{src:e.info.avatarUrl}})])],1),e._v(" "),a("el-menu-item",{attrs:{disabled:""}},[e._v(e._s(e.info.nickName))]),e._v(" "),a("el-menu-item",{attrs:{index:"1-1"}},[e._v(e._s(e.info.userName+"("+e.info.roleName+")"))]),e._v(" "),a("el-menu-item",{attrs:{index:"1-2"}},[e._v("注销登录")])],2)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{display:"inline-block",width:"200px",height:"63px","text-align":"center",position:"absolute",top:"0px",left:"0px"}},[t("img",{staticStyle:{position:"relative",top:"18px"},attrs:{src:"/api/images/getImage?text=Applet Site&color=16777215&fontFamily=华文隶书"}})])}]};var v=a("VU/8")(g,h,!1,function(e){a("ymBF"),a("D0D8")},"data-v-8e8bd1d4",null).exports,b={name:"role-info",data:function(){return{loading:!1,roleForm:{id:"",roleName:"",describeStr:"",status:"1"},roleRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"},{type:"string",min:1,max:20,message:"角色名称长度为1-20个字符",trigger:"blur"}],describeStr:[{type:"string",max:150,message:"角色描述长度不能超过150个字符",trigger:"blur"}]}}},created:function(){var e=this.$cookies.get("roleId");this.setRoleId(e)},mounted:function(){},methods:{setRoleId:function(e){var t=this;e&&"0"!=e&&(this.roleForm.id=e,this.loading=!0,this.$axios({url:"/api/manage/manager/getManagerRole",method:"post",data:{id:e}}).then(function(e){"1"===e.data.code?(t.roleForm=e.data.data,t.roleForm.status=t.roleForm.status?"1":"0",delete t.roleForm.updateDate):"-1"===e.data.code&&t.$message.error(e.data.data),t.$cookies.remove("roleId"),t.$global.exitLoad(t,null,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,null,"")}))},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});t.$axios({url:"/api/manage/manager/updateManagerRole",method:"post",data:t.roleForm}).then(function(e){var i=t;"1"===e.data.code?t.$message.success({message:e.data.data,duration:1e3,onClose:function(){i.$emit("setRoleId")}}):t.$message.error(e.data.data),t.$global.exitLoad(t,a,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,a,"")})}})}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"roleForm",staticClass:"demo-form-inline",attrs:{rules:e.roleRules,inline:!0,model:e.roleForm}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{staticClass:"role-input",attrs:{maxlength:"20",placeholder:"请输入角色名称"},model:{value:e.roleForm.roleName,callback:function(t){e.$set(e.roleForm,"roleName",t)},expression:"roleForm.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简单描述",prop:"describeStr"}},[a("el-input",{staticClass:"role-input",attrs:{type:"textarea","show-word-limit":!0,maxlength:"90",resize:"none",rows:"5",placeholder:"请输入描述"},model:{value:e.roleForm.describeStr,callback:function(t){e.$set(e.roleForm,"describeStr",t)},expression:"roleForm.describeStr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色状态",prop:"status"}},[a("el-select",{staticClass:"role-input",attrs:{placeholder:"请选择状态"},model:{value:e.roleForm.status,callback:function(t){e.$set(e.roleForm,"status",t)},expression:"roleForm.status"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{staticClass:"role-input",attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("roleForm")}}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")(b,_,!1,function(e){a("OYO2")},null,null).exports,x=a("mvHQ"),w=a.n(x),S={name:"menu-list",data:function(){return{loading:!1,showInfo:!1,showTitle:"",idList:[],menuData:"",roleId:0}},created:function(){var e=this.$cookies.get("roleAuthId");this.loadMenuList(e)},mounted:function(){},methods:{loadMenuList:function(e){var t=this;e&&(this.roleId=e,this.loading=!0,this.$axios({url:"/api/manage/menu/loadRoleMenuList",method:"post",data:{roleId:e}}).then(function(e){"1"===e.data.code?(t.idList=e.data.data.idList,t.menuData=JSON.parse(e.data.data.menuList)):t.$message.error(e.data.data),t.$cookies.remove("roleAuthId"),t.$global.exitLoad(t,null,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,null,res.data)}))},onSubmit:function(){var e=this,t=this.$refs.roleAuthTree.getCheckedKeys(),a=d.Loading.service({fullscreen:!0,text:"正在提交"});this.$axios({url:"/api/manage/menu/updateRoleMenuAuth",method:"post",data:{roleId:this.roleId,idJson:w()(t)}}).then(function(t){var i=e;"1"===t.data.code?e.$message.success({message:t.data.data,duration:1e3,onClose:function(){i.$emit("loadMenuList")}}):e.$message.error(t.data.data),e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"auth-tree-title"},[a("table",{attrs:{cellspacing:"0"}},[a("tr",[a("td",{staticStyle:{width:"216px"}},[e._v("菜单名称")]),e._v(" "),a("td",{staticStyle:{width:"220px"}},[e._v("菜单标识")]),e._v(" "),a("td",{staticStyle:{width:"400px"}},[e._v("菜单路径")]),e._v(" "),a("td",{staticStyle:{width:"100px"}},[e._v("菜单等级")])])])]),e._v(" "),a("div",{staticClass:"custom-tree-container auth-tree"},[a("div",{staticClass:"block"},[a("el-tree",{ref:"roleAuthTree",attrs:{data:e.menuData,"node-key":"id","show-checkbox":"","default-expand-all":"","default-checked-keys":e.idList,"expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,o=t.data;return a("span",{staticClass:"custom-tree-node"},[0===o.level?a("span",{staticStyle:{width:"194px","text-indent":"0.5em"}},[e._v(e._s(i.label))]):e._e(),e._v(" "),1===o.level?a("span",{staticStyle:{width:"176px","text-indent":"0.5em"}},[e._v(e._s(i.label))]):e._e(),e._v(" "),2===o.level?a("span",{staticStyle:{width:"158px","text-indent":"0.5em"}},[a("i",{class:o.icon,staticStyle:{"margin-right":"5px"}}),e._v(e._s(i.label)+"\n            ")]):e._e(),e._v(" "),3===o.level?a("span",{staticStyle:{width:"140px","text-indent":"0.5em"}},[e._v(e._s(i.label))]):e._e(),e._v(" "),a("span",{staticStyle:{width:"220px"}},[e._v(e._s(o.logo))]),e._v(" "),a("span",{staticStyle:{width:"360px"}},[e._v(e._s(o.path))]),e._v(" "),a("span",{staticStyle:{width:"100px","text-align":"center"}},[e._v(e._s(1===o.level?"一级":2===o.level?"二级":3===o.level?"三级":"")+"\n            ")])])}}])})],1)]),e._v(" "),a("div",{staticStyle:{height:"40px","line-height":"40px","text-align":"center",margin:"20px 0px"}},[a("el-button",{staticStyle:{width:"290px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.onSubmit()}}},[e._v("提    交\n      ")])],1)])],1)},staticRenderFns:[]};var $={name:"role-list",components:{roleInfo:y,roleAuth:a("VU/8")(S,k,!1,function(e){a("I2d7")},null,null).exports},data:function(){return{loading:!1,tableHeight:50,showInfo:!1,showTitle:"",showAuth:!1,showName:"",roleId:"",currentPage:1,total:0,info:{roleName:"",status:"",page:1,pageSize:15},tableData:[]}},created:function(){this.onSubmit()},mounted:function(){},methods:{indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/manager/queryManagerRoleToPage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"role-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectRoleList:function(){this.info.page=1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},updateInfo:function(e){this.showInfo=!0,this.roleId=e,this.showTitle=e&&"0"!=e?"修改角色信息":"添加角色信息";try{this.$refs.roleInfo.setRoleId(e)}catch(t){this.$cookies.set("roleId",e)}},updateAuth:function(e,t){try{this.$refs.roleAuth.loadMenuList(e)}catch(t){this.$cookies.set("roleAuthId",e)}this.showAuth=!0,this.showName=t},setRoleId:function(){this.showInfo=!1,this.selectRoleList()},loadMenuList:function(){this.showAuth=!1}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{staticClass:"role-form",staticStyle:{"text-align":"left"},attrs:{id:"role-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{attrs:{placeholder:"请输入角色名称",clearable:!0},model:{value:e.info.roleName,callback:function(t){e.$set(e.info,"roleName",t)},expression:"info.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色状态"}},[a("el-select",{attrs:{placeholder:"选择状态"},model:{value:e.info.status,callback:function(t){e.$set(e.info,"status",t)},expression:"info.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectRoleList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.updateInfo("0")}}},[e._v("添加")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"roleName",label:"角色名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"describeStr",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateDate",label:"更新日期",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),t.row.status?e._e():a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("禁用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.updateAuth(t.row.id,t.row.roleName)}}},[e._v("设置权限\n          ")]),e._v(" "),a("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){return e.updateInfo(t.row.id)}}},[e._v("修改")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"role-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showInfo=t}}},[a("roleInfo",{ref:"roleInfo",on:{setRoleId:e.setRoleId}})],1),e._v(" "),a("el-dialog",{staticClass:"role-auth-dialog",attrs:{title:e.showName,visible:e.showAuth,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showAuth=t}}},[a("roleAuth",{ref:"roleAuth",on:{loadMenuList:e.loadMenuList}})],1)],1)],1)},staticRenderFns:[]};var I=a("VU/8")($,F,!1,function(e){a("/n/C")},null,null).exports,C={name:"manager-info",data:function(){return{loading:!1,showUserName:"",showInfo:!1,showParent:!1,showTitle:"",roleList:[],provList:[],cityList:[],countyList:[],parentList:[],region:[],regions:[],managerForm:{id:"",userName:"",roleId:"",nickName:"",password:"",confirmPassword:"",mobile:"",email:"",qqAccount:"",weChatAccount:"",province:"",city:"",county:"",parentId:"",status:"1"},managerRules:{userName:[{required:!0,message:"请输入账号",trigger:"blur"},{type:"string",min:5,max:20,message:"账号长度为5-20个字符",trigger:"blur"},{validator:this.$global.validate(this).userNameValidator,trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"blur"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"},{type:"string",max:20,message:"昵称长度不能超过20个字符",trigger:"blur"}],password:[{validator:this.$global.validate(this).managerPasswordValidator,trigger:"blur"}],confirmPassword:[{validator:this.$global.validate(this).managerConfirmPasswordValidator,trigger:"blur"}],mobile:[{type:"string",max:11,message:"长度为11个数字",trigger:"blur"},{validator:this.$global.validate(this).mobileValidator,trigger:"blur"}],email:[{type:"string",max:50,message:"邮箱长度不能超过50个字符",trigger:"blur"},{validator:this.$global.validate(this).emailValidator,trigger:"blur"}],qqAccount:[{type:"string",max:20,message:"QQ账号长度不能超过20个字符",trigger:"blur"}],weChatAccount:[{type:"string",max:50,message:"微信账号长度不能超过50个字符",trigger:"blur"}],county:[{required:!0,message:"请选择所属地域",trigger:"blur"}],parentId:[{required:!0,message:"请选择上级",trigger:"blur"}]}}},created:function(){var e=this.$cookies.get("managerId");this.setManagerId(e)},mounted:function(){},methods:{setManagerId:function(e){var t=this;e&&(this.loading=!0,this.$axios({url:"/api/manage/manager/getManagerInfo",method:"post",data:{id:e}}).then(function(e){console.info("后台返回的数据",e.data),t.parentList=e.data.data.parentList,t.roleList=e.data.data.roleList,t.regions=JSON.parse(e.data.data.regions),"1"===e.data.code&&(t.managerForm=e.data.data.manager,t.region=[t.managerForm.province,t.managerForm.city,t.managerForm.county],t.managerForm.status=t.managerForm.status?"1":"0",t.showUserName=t.managerForm.userName,delete t.managerForm.createDate,delete t.managerForm.userName,t.changeRole()),t.$cookies.remove("managerId"),t.$global.exitLoad(t,null,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,null,"")}))},getManagerId:function(){return this.managerForm.id},getPassword:function(){return this.managerForm.password},changeRole:function(){4===this.managerForm.roleId?this.showParent=!0:this.showParent=!1},handleChange:function(e){this.managerForm.province=e[0],this.managerForm.city=e[1],this.managerForm.county=e[2]},onSubmit:function(e){var t=this;4!=this.managerForm.roleId&&(delete this.managerForm.parentId,this.$refs[e].clearValidate("parentId")),this.$refs[e].validate(function(e){if(e){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});t.$axios({url:"/api/manage/manager/updateManagerInfo",method:"post",data:t.managerForm}).then(function(e){console.info("后台返回的数据",e.data),"1"===e.data.code?(t.$emit("setManagerId"),t.$message.success(e.data.data)):t.$message.error(e.data.data),t.$global.exitLoad(t,a,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,a,"")})}})}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"managerForm",staticClass:"demo-form-inline",attrs:{rules:e.managerRules,inline:!0,model:e.managerForm}},[""===e.showUserName?a("el-form-item",{attrs:{label:"用户账号",prop:"userName"}},[a("el-input",{staticClass:"manager-input",attrs:{placeholder:"请输入账号"},model:{value:e.managerForm.userName,callback:function(t){e.$set(e.managerForm,"userName",t)},expression:"managerForm.userName"}})],1):e._e(),e._v(" "),""!=e.showUserName?a("el-form-item",{attrs:{label:"用户账号"}},[a("div",{staticClass:"manager-input",staticStyle:{"text-align":"left"}},[e._v(e._s(e.showUserName))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:" ",prop:""}},[a("div",{staticClass:"manager-input"})]),e._v(" "),a("el-form-item",{attrs:{label:"用户昵称",prop:"nickName"}},[a("el-input",{staticClass:"manager-input",attrs:{placeholder:"请输入昵称"},model:{value:e.managerForm.nickName,callback:function(t){e.$set(e.managerForm,"nickName",t)},expression:"managerForm.nickName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户角色",prop:"roleId"}},[a("el-select",{staticClass:"manager-input",attrs:{placeholder:"选择角色"},on:{change:e.changeRole},model:{value:e.managerForm.roleId,callback:function(t){e.$set(e.managerForm,"roleId",t)},expression:"managerForm.roleId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.roleList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[a("el-input",{staticClass:"manager-input",attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.managerForm.password,callback:function(t){e.$set(e.managerForm,"password",t)},expression:"managerForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[a("el-input",{staticClass:"manager-input",attrs:{type:"password",placeholder:"请输入确认密码"},model:{value:e.managerForm.confirmPassword,callback:function(t){e.$set(e.managerForm,"confirmPassword",t)},expression:"managerForm.confirmPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[a("el-input",{staticClass:"manager-input",attrs:{type:"number",placeholder:"输入手机号码"},model:{value:e.managerForm.mobile,callback:function(t){e.$set(e.managerForm,"mobile",t)},expression:"managerForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户邮箱",prop:"email"}},[a("el-input",{staticClass:"manager-input",attrs:{placeholder:"输入邮箱"},model:{value:e.managerForm.email,callback:function(t){e.$set(e.managerForm,"email",t)},expression:"managerForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"QQ账号",prop:"qqAccount"}},[a("el-input",{staticClass:"manager-input",attrs:{type:"number",placeholder:"输入QQ账号"},model:{value:e.managerForm.qqAccount,callback:function(t){e.$set(e.managerForm,"qqAccount",t)},expression:"managerForm.qqAccount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信账号",prop:"weChatAccount"}},[a("el-input",{staticClass:"manager-input",attrs:{placeholder:"输入微信账号"},model:{value:e.managerForm.weChatAccount,callback:function(t){e.$set(e.managerForm,"weChatAccount",t)},expression:"managerForm.weChatAccount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属区域",prop:"county"}},[a("el-cascader",{staticStyle:{width:"475px"},attrs:{options:e.regions,placeholder:"请选择所属区域"},on:{change:e.handleChange},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}})],1),e._v(" "),e.showParent?a("el-form-item",{attrs:{label:"上级",prop:"parentId"}},[a("el-select",{staticClass:"manager-input",attrs:{placeholder:"选择上级"},model:{value:e.managerForm.parentId,callback:function(t){e.$set(e.managerForm,"parentId",t)},expression:"managerForm.parentId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.parentList,function(e,t){return a("el-option",{key:t,attrs:{label:e.nickName+" "+e.userName,value:e.id}})})],2)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticClass:"manager-input",attrs:{placeholder:"选择状态"},model:{value:e.managerForm.status,callback:function(t){e.$set(e.managerForm,"status",t)},expression:"managerForm.status"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),e.showParent?e._e():a("el-form-item",{attrs:{label:" ",prop:""}},[a("div",{staticClass:"manager-input"})]),e._v(" "),a("div",{staticStyle:{"text-align":"center",margin:"20px 0px"}},[a("el-button",{staticClass:"manager-input",attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("managerForm")}}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var N={name:"manager-list",components:{managerInfo:a("VU/8")(C,L,!1,function(e){a("NfF5")},null,null).exports},data:function(){return{loading:!1,tableHeight:50,showInfo:!1,showTitle:"",managerId:"",currentPage:1,total:0,info:{userName:"",roleId:"",mobile:"",email:"",qqAccount:"",weChatAccount:"",province:"",city:"",county:"",parentId:"",status:"",page:1,pageSize:15},roleList:[],provList:[],cityList:[],countyList:[],parentList:[],tableData:[]}},created:function(){this.loadManagerList(),this.$global.selectRegionList(this,"","1")},mounted:function(){},methods:{indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},loadManagerList:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/manager/loadManagerList",method:"post"}).then(function(t){console.info("后台返回的数据",t.data),"1"===t.data.code?(e.roleList=t.data.data.roleList,e.parentList=t.data.data.parentList):"-1"===t.data.code&&e.$message.error(t.data.data),e.onSubmit()}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectProvince:function(){var e=this.info.province;if(this.info.city="",this.info.county="",this.cityList=[],this.countyList=[],""!=e){var t=this.provList.find(function(t){return t.areaName===e});this.$global.selectRegionList(this,t.id,"2")}},selectCity:function(){var e=this.info.city;if(this.countyList=[],this.info.county="",""!=e){var t=this.cityList.find(function(t){return t.areaName===e});this.$global.selectRegionList(this,t.id,"3")}},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/manager/queryManagerToPage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"manager-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},resetForm:function(e){this.$refs[e].resetFields()},updateInfo:function(e,t){this.showInfo=!0,this.managerId=e,this.showTitle=t&&"0"!=t?t:"添加管理员账号";try{this.$refs.managerInfo.setManagerId(e)}catch(t){this.$cookies.set("managerId",e)}},setManagerId:function(){this.showInfo=!1,this.selectList()}}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"queryManagerForm",staticClass:"manager-form",attrs:{id:"manager-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"登录账号",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入账号",clearable:!0},model:{value:e.info.userName,callback:function(t){e.$set(e.info,"userName",t)},expression:"info.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Email邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"输入邮箱",clearable:!0},model:{value:e.info.email,callback:function(t){e.$set(e.info,"email",t)},expression:"info.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[a("el-input",{attrs:{type:"number",placeholder:"输入手机号码",clearable:!0},model:{value:e.info.mobile,callback:function(t){e.$set(e.info,"mobile",t)},expression:"info.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"QQ账号",prop:"qqAccount"}},[a("el-input",{attrs:{type:"number",placeholder:"输入QQ账号",clearable:!0},model:{value:e.info.qqAccount,callback:function(t){e.$set(e.info,"qqAccount",t)},expression:"info.qqAccount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信账号",prop:"weChatAccount"}},[a("el-input",{attrs:{placeholder:"输入微信账号",clearable:!0},model:{value:e.info.weChatAccount,callback:function(t){e.$set(e.info,"weChatAccount",t)},expression:"info.weChatAccount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账号角色",prop:"roleId"}},[a("el-select",{attrs:{placeholder:"选择角色"},model:{value:e.info.roleId,callback:function(t){e.$set(e.info,"roleId",t)},expression:"info.roleId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.roleList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"省份",prop:"province"}},[a("el-select",{attrs:{placeholder:"选择省份"},on:{change:e.selectProvince},model:{value:e.info.province,callback:function(t){e.$set(e.info,"province",t)},expression:"info.province"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.provList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.areaName}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"城市",prop:"city"}},[a("el-select",{attrs:{placeholder:"选择城市"},on:{change:e.selectCity},model:{value:e.info.city,callback:function(t){e.$set(e.info,"city",t)},expression:"info.city"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.cityList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.areaName}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"区/县",prop:"county"}},[a("el-select",{attrs:{placeholder:"选择区/县"},model:{value:e.info.county,callback:function(t){e.$set(e.info,"county",t)},expression:"info.county"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.countyList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.areaName}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"账号状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"选择状态"},model:{value:e.info.status,callback:function(t){e.$set(e.info,"status",t)},expression:"info.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属上级",prop:"parentId"}},[a("el-select",{attrs:{placeholder:"选择上级"},model:{value:e.info.parentId,callback:function(t){e.$set(e.info,"parentId",t)},expression:"info.parentId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.parentList,function(e,t){return a("el-option",{key:t,attrs:{label:e.nickName+" "+e.userName,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetForm("queryManagerForm")}}},[e._v("重置")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.updateInfo("0","")}}},[e._v("添加")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",fixed:"left",type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"left",prop:"userName",label:"账号",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"nickName",label:"昵称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"roleName",label:"角色名称",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"email",label:"邮箱","show-overflow-tooltip":!0,width:"150"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mobile",label:"手机号码",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"qqAccount",label:"QQ账号","show-overflow-tooltip":!0,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"weChatAccount",label:"微信账号","show-overflow-tooltip":!0,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"province",label:"省份","show-overflow-tooltip":!0,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"city",label:"城市","show-overflow-tooltip":!0,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"county",label:"区/县","show-overflow-tooltip":!0,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"parentUserName",label:"上级(账号/名称)",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.parentId?a("span",[e._v("\n              "+e._s(t.row.parentUserName+"("+t.row.parentNickName+")")+"\n            ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createDate",label:"创建日期",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status","show-overflow-tooltip":!0,label:"状态",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),t.row.status?e._e():a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("禁用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.updateInfo(t.row.id,t.row.userName)}}},[e._v("修改\n          ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"manager-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showInfo=t}}},[a("div",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto"}},[a("managerInfo",{ref:"managerInfo",on:{setManagerId:e.setManagerId}})],1)])],1)],1)},staticRenderFns:[]};var A=a("VU/8")(N,T,!1,function(e){a("xMBH")},null,null).exports,P={name:"user-info",data:function(){return{info:{},showTabs:"up-info",loading:!1,roleName:"",upInfo:{nickName:"",mobile:"",email:"",qqAccount:"",weChatAccount:""},passForm:{oldPass:"",newPass:"",confirmPass:""},infoRules:{nickName:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:1,max:20,message:"昵称长度过长",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:this.$global.validate(this).mobileValidator,trigger:"blur"}]},passRules:{oldPass:[{required:!0,message:"请输入原密码",trigger:"blur"},{type:"string",min:6,message:"密码长度至少6位",trigger:"blur"},{type:"string",max:20,message:"密码长度最多20位",trigger:"blur"}],newPass:[{required:!0,message:"请输入新密码",trigger:"blur"},{type:"string",min:6,message:"密码长度至少6位",trigger:"blur"},{type:"string",max:20,message:"密码长度最多20位",trigger:"blur"}],confirmPass:[{required:!0,message:"请输入确认密码",trigger:"blur"},{type:"string",min:6,message:"密码长度至少6位",trigger:"blur"},{type:"string",max:20,message:"密码长度最多20位",trigger:"blur"},{validator:this.$global.validate(this).confirmPassValidator,trigger:"blur"}]},myHeader:{"X-Requested-With":"XMLHttpRequest"}}},created:function(){this.loadManager()},mounted:function(){},methods:{loadManager:function(){this.info=this.$cookies.get("manager_info"),this.upInfo.nickName=this.info.nickName,this.upInfo.mobile=this.info.mobile,this.upInfo.email=this.info.email,this.upInfo.qqAccount=this.info.qqAccount,this.upInfo.weChatAccount=this.info.weChatAccount,this.roleName=this.info.roleName},getPassword:function(){return this.passForm.newPass},onSubmitInfo:function(){var e=this;this.$refs.upInfo.validate(function(t){if(t){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});e.$axios({url:"/api/manage/manager/updateManagerBase",method:"post",data:{nickName:e.upInfo.nickName,mobile:e.upInfo.mobile,email:e.upInfo.email,qqAccount:e.upInfo.qqAccount,weChatAccount:e.upInfo.weChatAccount}}).then(function(t){if(console.info("后台返回的数据",t.data),"1"===t.data.code){var i=t.data.data;e.info=i,e.info.roleName=e.roleName,e.$cookies.set("manager_info",i),e.$message({message:"修改信息成功",type:"success"}),e.$emit("loadManager")}else"-1"===t.data.code&&e.$message.error(t.data.data);e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})}else e.$message({message:"信息提交失败",type:"warning"})})},onSubmitPass:function(){var e=this;this.$refs.passForm.validate(function(t){if(t){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});e.$axios({url:"/api/manage/manager/updateManagerPassword",method:"post",data:{oldPass:e.passForm.oldPass,newPass:e.passForm.newPass}}).then(function(t){if(console.info("后台返回的数据",t.data),"1"===t.data.code){var i=e;e.$message({message:t.data.data,type:"success",onClose:function(){i.$axios({url:"/api/manage/exitLogin",method:"post"}).then(function(e){"1"===e.data.code?i.$global.exitLoad(i,a,{code:"0"}):i.$message.error(e.data.data)})}})}else e.$message.error(t.data.data),e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})}else e.$message({message:"信息提交失败",type:"warning"})})},handleAvatarSuccess:function(e,t){"1"===e.code?(this.info=this.$cookies.get("manager_info"),this.info.avatarUrl=e.data,this.$cookies.set("manager_info",this.info),this.$message({message:"上传成功",type:"success"}),this.$emit("loadManager")):this.$message.error("上传失败");var a=d.Loading.service({fullscreen:!0,text:"正在上传"});this.$global.exitLoad(this,a,{code:e.data})},beforeAvatarUpload:function(e){var t=d.Loading.service({fullscreen:!0,text:"正在上传"}),a="image/png,image/jpeg,image/jpg".indexOf(e.type)>=0,i=e.size/1024/1024<3;return a||this.$message.error("上传头像图片格式错误!"),i||this.$message.error("上传头像图片大小不能超过 3MB!"),a&&i||t.close(),a&&i}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.showTabs,callback:function(t){e.showTabs=t},expression:"showTabs"}},[a("el-tab-pane",{staticStyle:{height:"400px"},attrs:{label:"修改信息",name:"up-info"}},[a("el-form",{ref:"upInfo",staticClass:"manager-update-form",attrs:{model:e.upInfo,rules:e.infoRules}},[a("el-form-item",{attrs:{label:"用户账号"}},[a("div",{staticClass:"manager-update-input"},[e._v(e._s(e.info.userName))])]),e._v(" "),a("el-form-item",{attrs:{label:"昵称",prop:"nickName"}},[a("el-input",{staticClass:"manager-update-input",attrs:{placeholder:"请输入昵称"},model:{value:e.upInfo.nickName,callback:function(t){e.$set(e.upInfo,"nickName",t)},expression:"upInfo.nickName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[a("el-input",{staticClass:"manager-update-input",attrs:{placeholder:"请输入手机号码"},model:{value:e.upInfo.mobile,callback:function(t){e.$set(e.upInfo,"mobile",t)},expression:"upInfo.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{staticClass:"manager-update-input",attrs:{placeholder:"请输入邮箱"},model:{value:e.upInfo.email,callback:function(t){e.$set(e.upInfo,"email",t)},expression:"upInfo.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"QQ账号",prop:"qqAccount"}},[a("el-input",{staticClass:"manager-update-input",attrs:{placeholder:"请输入QQ账号"},model:{value:e.upInfo.qqAccount,callback:function(t){e.$set(e.upInfo,"qqAccount",t)},expression:"upInfo.qqAccount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信账号",prop:"weChatAccount"}},[a("el-input",{staticClass:"manager-update-input",attrs:{placeholder:"请输入微信账号"},model:{value:e.upInfo.weChatAccount,callback:function(t){e.$set(e.upInfo,"weChatAccount",t)},expression:"upInfo.weChatAccount"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"sub-but",staticStyle:{width:"190px",position:"absolute",left:"80px"},attrs:{type:"primary"},on:{click:function(t){return e.onSubmitInfo()}}},[e._v("提  交\n          ")])],1)],1)],1),e._v(" "),a("el-tab-pane",{staticStyle:{height:"400px"},attrs:{label:"修改密码",name:"up-pass"}},[a("el-form",{ref:"passForm",staticClass:"manager-update-form",attrs:{model:e.passForm,rules:e.passRules}},[a("el-form-item",{attrs:{label:"原密码",prop:"oldPass"}},[a("el-input",{staticClass:"manager-update-input",attrs:{name:"oldPass",type:"password",placeholder:"请输入原密码","show-password":""},model:{value:e.passForm.oldPass,callback:function(t){e.$set(e.passForm,"oldPass",t)},expression:"passForm.oldPass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"newPass"}},[a("el-input",{staticClass:"manager-update-input",attrs:{name:"newPass",type:"password",placeholder:"请输入登录密码","show-password":""},model:{value:e.passForm.newPass,callback:function(t){e.$set(e.passForm,"newPass",t)},expression:"passForm.newPass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"confirmPass"}},[a("el-input",{staticClass:"manager-update-input",attrs:{name:"confirmPass",type:"password",placeholder:"请输入确认密码","show-password":""},model:{value:e.passForm.confirmPass,callback:function(t){e.$set(e.passForm,"confirmPass",t)},expression:"passForm.confirmPass"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"sub-but",staticStyle:{width:"190px",position:"absolute",left:"80px"},attrs:{type:"primary"},on:{click:function(t){return e.onSubmitPass()}}},[e._v("提  交\n          ")])],1)],1)],1),e._v(" "),a("el-tab-pane",{staticStyle:{height:"400px"},attrs:{label:"修改头像",name:"up-img"}},[a("div",{staticStyle:{"text-align":"left","padding-top":"30px","padding-left":"50px"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/manage/manager/uploadManagerAvatar",name:"avatar",headers:e.myHeader,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.info.avatarUrl?a("img",{staticClass:"avatar",attrs:{src:e.info.avatarUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),a("span",{staticStyle:{color:"#DCDFE6","font-size":"14px",position:"relative",top:"5px",left:"25px"}},[e._v("(点击图片修改头像)")])],1)])],1)],1)},staticRenderFns:[]};var R={name:"manager-details",components:{managerDetails:a("VU/8")(P,D,!1,function(e){a("Li41")},null,null).exports},data:function(){return{loading:!1,showInfo:!1,showTitle:"修改资料",managerForm:{}}},created:function(){this.loadManagerInfo()},mounted:function(){},methods:{loadManagerInfo:function(){this.managerForm=this.$cookies.get("manager_info")},toUpdate:function(){this.showInfo=!0},loadManager:function(){this.showInfo=!1,this.loadManagerInfo(),this.$emit("updateInfo")}}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{staticClass:"manager-details-form",attrs:{model:e.managerForm,inline:!0}},[a("el-form-item",{attrs:{label:"用户头像"}},[a("div",{staticClass:"manager-details-div"},[a("el-image",{staticClass:"avatar-img",attrs:{src:e.managerForm.avatarUrl}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"用户账号"}},[a("div",{staticClass:"manager-details-div"},[e._v(e._s(e.managerForm.userName))])]),e._v(" "),a("el-form-item",{attrs:{label:"用户昵称"}},[a("div",{staticClass:"manager-details-div"},[e._v(e._s(e.managerForm.nickName))])]),e._v(" "),a("el-form-item",{attrs:{label:"用户角色"}},[a("div",{staticClass:"manager-details-div"},[e._v(e._s(e.managerForm.roleName))])]),e._v(" "),a("el-form-item",{attrs:{label:"手机号码"}},[a("div",{staticClass:"manager-details-div"},[e._v(e._s(e.managerForm.mobile))])]),e._v(" "),a("el-form-item",{attrs:{label:"用户邮箱"}},[a("div",{staticClass:"manager-details-div"},[e._v(e._s(e.managerForm.email))])]),e._v(" "),a("el-form-item",{attrs:{label:"QQ账号"}},[a("div",{staticClass:"manager-details-div"},[e._v(e._s(e.managerForm.qqAccount))])]),e._v(" "),a("el-form-item",{attrs:{label:"微信账号"}},[a("div",{staticClass:"manager-details-div"},[e._v(e._s(e.managerForm.weChatAccount))])]),e._v(" "),a("el-form-item",{attrs:{label:"所属区域"}},[a("div",{staticClass:"manager-details-div"},[e._v(e._s(e.managerForm.province+e.managerForm.city+e.managerForm.county)+"\n        ")])]),e._v(" "),null!=e.managerForm.parentId?a("el-form-item",{attrs:{label:"上级"}},[a("div",{staticClass:"manager-details-div"},[e._v(e._s(e.managerForm.parentUserName+" ("+e.managerForm.parentNickName+")")+"\n        ")])]):e._e(),e._v(" "),a("div",{staticStyle:{"text-align":"center",margin:"20px 0px"}},[a("el-button",{staticStyle:{width:"190px"},attrs:{type:"primary"},on:{click:function(t){return e.toUpdate()}}},[e._v("修改资料")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"manager-details-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showInfo=t}}},[a("managerDetails",{ref:"managerDetails",on:{loadManager:e.loadManager}})],1)],1)],1)},staticRenderFns:[]};var M=a("VU/8")(R,z,!1,function(e){a("bh/j")},null,null).exports,E={name:"applet-details",data:function(){return{loading:!1,roleId:this.$cookies.get("manager_info").roleId,editableTabsValue:"basics",tips:"",info:{},imgList:[],auditResult:null,auditForm:{appletId:"",result:"",remark:""},auditRules:{result:[{required:!0,message:"请选择审核结果",trigger:"blur"}],remark:[{required:!0,message:"请输入备注说明",trigger:"blur"}]}}},created:function(){this.setAppletId(this.$cookies.get("appletId"))},mounted:function(){},methods:{setAppletId:function(e){var t=this;this.auditResult=this.$cookies.get("auditResult"),this.loading=!0,this.imgList=[],this.$axios({url:"/api/manage/applet/loadAppletAuditDetails",method:"post",data:{id:e}}).then(function(e){console.info("后台返回的数据",e.data),"1"===e.data.code?(t.info=e.data.data,t.imgList.push(t.info.appletLogo),t.imgList.push(t.info.licenseSrc),t.auditForm.appletId=t.info.id):"-1"===e.data.code&&t.$message.error(e.data.data),t.$cookies.remove("appletId"),t.editableTabsValue="basics",t.$global.exitLoad(t,null,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,null,"")})},changeResult:function(){1==this.auditForm.result?(this.auditForm.remark="审核通过，信息确认",this.tips="请先将小程序对应版本信息更新，并上传小程序代码"):this.tips=""},onSubmit:function(e){var t=this;this.$refs[e].validate(function(a){a&&t.$confirm("确定已将小程序对应版本信息更新，并上传了小程序代码？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});t.$axios({url:"/api/manage/applet/saveAppletAuditInfo",method:"post",data:t.auditForm}).then(function(i){console.info("后台返回的数据",i.data),"1"===i.data.code?(t.$refs[e].resetFields(),t.$message.success(i.data.data),t.$emit("setAppletId")):t.$message.error(i.data.data),t.$global.exitLoad(t,a,i.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,a,"")})})})}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-tabs",{staticClass:"applet-details-tabs",attrs:{type:"border-card"},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},[a("el-tab-pane",{staticStyle:{height:"420px"},attrs:{label:"基础信息",name:"basics"}},[a("el-form",{staticClass:"applet-details-form"},[a("el-form-item",{staticClass:"form-info-div",attrs:{label:"编码"}},[a("span",[e._v(e._s(e.info.appletCode))])]),e._v(" "),a("el-form-item",{staticClass:"form-info-div",attrs:{label:"名称"}},[a("span",[e._v(e._s(e.info.appletName))])]),e._v(" "),a("el-form-item",{staticClass:"form-info-div",attrs:{label:"简称"}},[a("span",[e._v(e._s(e.info.appletSimple))])]),e._v(" "),a("el-form-item",{staticClass:"form-info-div",attrs:{label:"联系电话"}},[a("span",[e._v(e._s(e.info.telephone))])]),e._v(" "),a("el-form-item",{staticClass:"form-info-div",attrs:{label:"服务类型"}},[a("span",[e._v(e._s(e.info.typeName))])]),e._v(" "),a("el-form-item",{staticClass:"form-info-div",attrs:{label:"营业类型"}},[a("span",[e._v(e._s(e.info.ifRetail?"批发":"零售"))])])],1),e._v(" "),a("div",{staticClass:"demo-image__preview applet-details-logo"},[a("el-image",{attrs:{src:e.info.appletLogo,"preview-src-list":e.imgList}}),e._v(" "),a("div",{staticStyle:{color:"#D9D9D9","font-size":"14px"}},[e._v("点击图片查看大图")])],1)],1),e._v(" "),a("el-tab-pane",{staticStyle:{height:"400px"},attrs:{label:"营业信息",name:"business"}},[a("el-form",{staticClass:"applet-details-form"},[a("el-form-item",{staticClass:"form-info-div",attrs:{label:"执照代码"}},[a("span",[e._v(e._s(e.info.licenseCode))])]),e._v(" "),a("el-form-item",{staticClass:"form-info-div",attrs:{label:"营业范围"}},[a("div",{staticStyle:{width:"260px","padding-left":"100px"}},[e._v(e._s(e.info.businessScope))])]),e._v(" "),a("el-form-item",{staticClass:"form-info-div",attrs:{label:"所在地域"}},[a("span",[e._v(e._s(e.info.province)+","+e._s(e.info.city)+","+e._s(e.info.county))])])],1),e._v(" "),a("div",{staticClass:"demo-image__preview applet-details-logo"},[a("el-image",{attrs:{src:e.info.licenseSrc,"preview-src-list":e.imgList}}),e._v(" "),a("div",{staticStyle:{color:"#D9D9D9","font-size":"14px"}},[e._v("点击图片查看大图")])],1)],1),e._v(" "),a("el-tab-pane",{staticStyle:{height:"400px"},attrs:{label:"管理信息",name:"manage"}},[a("el-form",{staticClass:"applet-details-form"},[a("el-form-item",{staticClass:"form-info-div",attrs:{label:"管理账号"}},[a("span",[e._v(e._s(e.info.managerAccount))])]),e._v(" "),a("el-form-item",{staticClass:"form-info-div",attrs:{label:"管理密码"}},[a("span",[e._v(e._s(e.info.managerPassword))])]),e._v(" "),a("el-form-item",{staticClass:"form-info-div",attrs:{label:"APPID"}},[a("span",[e._v(e._s(e.info.appId))])]),e._v(" "),a("el-form-item",{staticClass:"form-info-div",attrs:{label:"SECRET"}},[a("span",[e._v(e._s(e.info.appSecret))])])],1)],1)],1),e._v(" "),1==e.roleId&&(0==e.auditResult||1==e.auditResult)||5==e.roleId&&0==e.auditResult||6==e.roleId&&1==e.auditResult?a("div",[a("el-form",{ref:"auditForm",staticClass:"applet-audit-form",staticStyle:{"text-align":"left","padding-top":"30px"},attrs:{model:e.auditForm,rules:e.auditRules,inline:!0}},[a("el-form-item",{attrs:{label:"审核结果",prop:"result"}},[a("el-select",{staticClass:"applet-details-input",attrs:{placeholder:"请选择审核结果"},on:{change:e.changeResult},model:{value:e.auditForm.result,callback:function(t){e.$set(e.auditForm,"result",t)},expression:"auditForm.result"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"驳回",value:"-1"}}),e._v(" "),a("el-option",{attrs:{label:"通过",value:"1"}})],1)],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"备注说明",prop:"remark"}},[a("el-input",{staticClass:"applet-details-input",attrs:{type:"textarea","show-word-limit":!0,maxlength:"90",resize:"none",rows:"5",placeholder:"请输入备注说明"},model:{value:e.auditForm.remark,callback:function(t){e.$set(e.auditForm,"remark",t)},expression:"auditForm.remark"}})],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{staticClass:"applet-details-input",attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("auditForm")}}},[e._v("提交")]),e._v(" "),a("div",{staticStyle:{"text-align":"center",color:"red","font-size":"14px"}},[e._v(e._s(e.tips))])],1)],1)],1):e._e()],1)],1)},staticRenderFns:[]};var H=a("VU/8")(E,q,!1,function(e){a("7Eck")},null,null).exports,U={name:"applet-list",components:{appletDetails:H},data:function(){return{loading:!0,tableHeight:50,showInfo:!1,showTitle:"",currentPage:1,total:0,info:{appletCode:"",appletName:"",mobile:"",province:"",city:"",county:"",recommenderAccount:"",ifRetail:"",ifSelling:"",status:"",page:1,pageSize:15},provList:[],cityList:[],countyList:[],tableData:[]}},created:function(){this.$global.selectRegionList(this,"","1"),this.onSubmit()},mounted:function(){},methods:{indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},selectProvince:function(){var e=this.info.province;if(this.info.city="",this.info.county="",this.cityList=[],this.countyList=[],""!=e){var t=this.provList.find(function(t){return t.areaName===e});this.$global.selectRegionList(this,t.id,"2")}},selectCity:function(){var e=this.info.city;if(this.countyList=[],this.info.county="",""!=e){var t=this.cityList.find(function(t){return t.areaName===e});this.$global.selectRegionList(this,t.id,"3")}},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/applet/queryAppletToPage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"applet-list-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.showInfo=!1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},resetForm:function(e){this.$refs[e].resetFields()},loadDetails:function(e,t){this.showInfo=!0,this.showTitle=t+" - 详情",this.$cookies.set("auditResult",0);try{this.$refs.appletInfo.setAppletId(e)}catch(t){this.$cookies.set("appletId",e)}},setAppletId:function(){this.selectList()}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"queryAppletForm",staticClass:"applet-list-form",staticStyle:{"text-align":"left"},attrs:{id:"applet-list-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"编码",prop:"appletCode"}},[a("el-input",{attrs:{placeholder:"请输入小程序编码",clearable:!0},model:{value:e.info.appletCode,callback:function(t){e.$set(e.info,"appletCode",t)},expression:"info.appletCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"appletName"}},[a("el-input",{attrs:{placeholder:"请输入小程序名称",clearable:!0},model:{value:e.info.appletName,callback:function(t){e.$set(e.info,"appletName",t)},expression:"info.appletName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户手机",prop:"mobile"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入用户手机号码",clearable:!0},model:{value:e.info.mobile,callback:function(t){e.$set(e.info,"mobile",t)},expression:"info.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业类型",prop:"ifRetail"}},[a("el-select",{attrs:{placeholder:"请选择营业类型"},model:{value:e.info.ifRetail,callback:function(t){e.$set(e.info,"ifRetail",t)},expression:"info.ifRetail"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"批发",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"零售",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"营业状态",prop:"ifSelling"}},[a("el-select",{attrs:{placeholder:"请选择营业状态"},model:{value:e.info.ifSelling,callback:function(t){e.$set(e.info,"ifSelling",t)},expression:"info.ifSelling"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正在营业",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"暂停营业",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"管理状态",prop:"ifSelling"}},[a("el-select",{attrs:{placeholder:"请选择管理状态"},model:{value:e.info.status,callback:function(t){e.$set(e.info,"status",t)},expression:"info.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"省份",prop:"province"}},[a("el-select",{attrs:{placeholder:"请选择省份"},on:{change:e.selectProvince},model:{value:e.info.province,callback:function(t){e.$set(e.info,"province",t)},expression:"info.province"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.provList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.areaName}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"城市",prop:"city"}},[a("el-select",{attrs:{placeholder:"请选择城市"},on:{change:e.selectCity},model:{value:e.info.city,callback:function(t){e.$set(e.info,"city",t)},expression:"info.city"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.cityList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.areaName}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"区/县",prop:"county"}},[a("el-select",{attrs:{placeholder:"请选择区/县"},model:{value:e.info.county,callback:function(t){e.$set(e.info,"county",t)},expression:"info.county"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.countyList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.areaName}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetForm("queryAppletForm")}}},[e._v("重置")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",fixed:"left",type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"left",prop:"appletCode",label:"编码",width:"185","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"appletName",label:"名称",width:"220","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mobile",label:"用户(账号/名称)",width:"180","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mobile+"("+t.row.nickName+")"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"province",label:"所属地区","show-overflow-tooltip":!0,width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.province+","+t.row.city+","+t.row.county))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeName",label:"服务类型","show-overflow-tooltip":!0,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ifRetail",label:"营业类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ifRetail?a("span",[e._v("批发")]):e._e(),e._v(" "),t.row.ifRetail?e._e():a("span",[e._v("零售")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ifSelling",label:"营业状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ifSelling?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正在营业")]):e._e(),e._v(" "),t.row.ifSelling?e._e():a("el-link",{attrs:{type:"warning",underline:!1}},[e._v("暂停营业")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"注册日期",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"管理状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),-1==t.row.status?a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("禁用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.loadDetails(t.row.id,t.row.appletName)}}},[e._v("详情\n          ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"applet-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showInfo=t}}},[a("div",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto"}},[a("appletDetails",{ref:"appletDetails",on:{setAppletId:e.setAppletId}})],1)])],1)],1)},staticRenderFns:[]};var O=a("VU/8")(U,V,!1,function(e){a("9pFh")},null,null).exports,B={name:"applet-manage-list",components:{appletDetails:H},data:function(){return{loading:!0,tableHeight:50,showInfo:!1,showTitle:"",currentPage:1,total:0,info:{appletCode:"",appletName:"",mobile:"",province:"",city:"",county:"",recommenderAccount:"",ifRetail:"",ifSelling:"",status:"",page:1,pageSize:15},provList:[],cityList:[],countyList:[],tableData:[]}},created:function(){this.$global.selectRegionList(this,"","1"),this.onSubmit()},mounted:function(){},methods:{indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},selectProvince:function(){var e=this.info.province;if(this.info.city="",this.info.county="",this.cityList=[],this.countyList=[],""!=e){var t=this.provList.find(function(t){return t.areaName===e});this.$global.selectRegionList(this,t.id,"2")}},selectCity:function(){var e=this.info.city;if(this.countyList=[],this.info.county="",""!=e){var t=this.cityList.find(function(t){return t.areaName===e});this.$global.selectRegionList(this,t.id,"3")}},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/applet/queryAppletManageToPage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"applet-manage-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.showInfo=!1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},resetForm:function(e){this.$refs[e].resetFields()},loadDetails:function(e,t){this.showInfo=!0,this.showTitle=t+" - 详情",this.$cookies.set("auditResult",0);try{this.$refs.appletInfo.setAppletId(e)}catch(t){this.$cookies.set("appletId",e)}},setAppletId:function(){this.selectList()},updateStatus:function(e,t,a){var i=this,o="",n="";1===a?(o="确定启用小程序吗？",n="启用"):(o="确定禁用小程序吗？",n="禁用"),this.$confirm(o,t,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=d.Loading.service({fullscreen:!0,text:"正在"+n});i.$axios({url:"/api/manage/applet/updateAppletStatus",method:"post",data:{id:e,status:a}}).then(function(e){"1"===e.data.code?(i.onSubmit(),i.$message.success(n+"成功")):i.$message.error(n+"失败"),i.$global.exitLoad(i,t,e.data)})})},exportExcel:function(){window.open("http://localhost:8080/api/manage/excel/exportAppletList?"+this.$global.baseToGet(this.info))}}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"queryAppletForm",staticClass:"applet-manage-form",staticStyle:{"text-align":"left"},attrs:{id:"applet-manage-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"编码",prop:"appletCode"}},[a("el-input",{attrs:{placeholder:"请输入小程序编码",clearable:!0},model:{value:e.info.appletCode,callback:function(t){e.$set(e.info,"appletCode",t)},expression:"info.appletCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"appletName"}},[a("el-input",{attrs:{placeholder:"请输入小程序名称",clearable:!0},model:{value:e.info.appletName,callback:function(t){e.$set(e.info,"appletName",t)},expression:"info.appletName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户手机",prop:"mobile"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入用户手机号码",clearable:!0},model:{value:e.info.mobile,callback:function(t){e.$set(e.info,"mobile",t)},expression:"info.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业类型",prop:"ifRetail"}},[a("el-select",{attrs:{placeholder:"请选择营业类型"},model:{value:e.info.ifRetail,callback:function(t){e.$set(e.info,"ifRetail",t)},expression:"info.ifRetail"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"批发",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"零售",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"营业状态",prop:"ifSelling"}},[a("el-select",{attrs:{placeholder:"请选择营业状态"},model:{value:e.info.ifSelling,callback:function(t){e.$set(e.info,"ifSelling",t)},expression:"info.ifSelling"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正在营业",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"暂停营业",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"管理状态",prop:"ifSelling"}},[a("el-select",{attrs:{placeholder:"请选择管理状态"},model:{value:e.info.status,callback:function(t){e.$set(e.info,"status",t)},expression:"info.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"省份",prop:"province"}},[a("el-select",{attrs:{placeholder:"请选择省份"},on:{change:e.selectProvince},model:{value:e.info.province,callback:function(t){e.$set(e.info,"province",t)},expression:"info.province"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.provList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.areaName}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"城市",prop:"city"}},[a("el-select",{attrs:{placeholder:"请选择城市"},on:{change:e.selectCity},model:{value:e.info.city,callback:function(t){e.$set(e.info,"city",t)},expression:"info.city"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.cityList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.areaName}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"区/县",prop:"county"}},[a("el-select",{attrs:{placeholder:"请选择区/县"},model:{value:e.info.county,callback:function(t){e.$set(e.info,"county",t)},expression:"info.county"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.countyList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.areaName}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetForm("queryAppletForm")}}},[e._v("重置")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.exportExcel()}}},[e._v("导出")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",fixed:"left",type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"left",prop:"appletCode",label:"编码",width:"185","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"appletName",label:"名称",width:"220","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mobile",label:"用户(账号/名称)",width:"180","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mobile+"("+t.row.nickName+")"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"province",label:"所属地区","show-overflow-tooltip":!0,width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.province+","+t.row.city+","+t.row.county))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeName",label:"服务类型","show-overflow-tooltip":!0,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ifRetail",label:"营业类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ifRetail?a("span",[e._v("批发")]):e._e(),e._v(" "),t.row.ifRetail?e._e():a("span",[e._v("零售")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ifSelling",label:"营业状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ifSelling?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正在营业")]):e._e(),e._v(" "),t.row.ifSelling?e._e():a("el-link",{attrs:{type:"warning",underline:!1}},[e._v("暂停营业")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"注册日期",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"管理状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),-1==t.row.status?a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("禁用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.loadDetails(t.row.id,t.row.appletName)}}},[e._v("详情\n          ")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(a){return e.updateStatus(t.row.id,t.row.appletName,-1)}}},[e._v("禁用\n          ")]):e._e(),e._v(" "),-1==t.row.status?a("el-button",{attrs:{type:"success",plain:"",size:"mini"},on:{click:function(a){return e.updateStatus(t.row.id,t.row.appletName,1)}}},[e._v("启用\n          ")]):e._e()]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"applet-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showInfo=t}}},[a("div",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto"}},[a("appletDetails",{ref:"appletDetails",on:{setAppletId:e.setAppletId}})],1)])],1)],1)},staticRenderFns:[]};var X=a("VU/8")(B,W,!1,function(e){a("cuKt")},null,null).exports,j={name:"applet-audit-record",data:function(){return{loading:!1,recordList:[]}},created:function(){this.onSubmit(this.$cookies.get("appletId"))},mounted:function(){},methods:{setAppletId:function(e){this.onSubmit(e)},onSubmit:function(e){var t=this;this.loading=!0,this.$axios({url:"/api/manage/applet/queryAppletAuditToList",method:"post",data:{id:e}}).then(function(e){console.info("后台返回的数据",e.data),"1"===e.data.code?t.recordList=e.data.data:"-1"===e.data.code&&t.$message.error(e.data.data),t.$cookies.remove("appletId"),t.$global.exitLoad(t,null,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,null,"")})}}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("div",{staticStyle:{height:"500px","overflow-y":"auto",padding:"0px 20px"}},[a("el-timeline",{staticClass:"applet-audit-timeline"},e._l(e.recordList,function(t,i){return a("el-timeline-item",{key:i,attrs:{timestamp:t.auditTime,placement:"top"}},[a("el-card",[a("div",[a("span",[e._v("审核结果：")]),e._v(" "),-1==t.auditResult?a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("审核驳回")]):e._e(),e._v(" "),0==t.auditResult?a("el-link",{attrs:{type:"warning",underline:!1}},[e._v("待审核")]):e._e(),e._v(" "),1==t.auditResult?a("el-link",{attrs:{type:"primary",underline:!1}},[e._v("初审通过")]):e._e(),e._v(" "),2==t.auditResult?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("终审通过")]):e._e()],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v("备注说明：")]),e._v(e._s(t.auditRemark)+"\n            ")]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v("审  核  员：")]),e._v(" "),null!=t.auditorId?a("span",[e._v(e._s(t.auditorNickName)+" ("+e._s(t.auditorUserName)+")")]):e._e()])])],1)}),1)],1)])],1)},staticRenderFns:[]};var Q=a("VU/8")(j,Y,!1,function(e){a("Aydw")},null,null).exports,Z={name:"applet-audit-first-list",components:{appletAuditRecord:Q,appletDetails:H},data:function(){return{loading:!0,tableHeight:50,showDetails:!1,showRecord:!1,showTitle:"",currentPage:1,total:0,info:{appletCode:"",appletName:"",mobile:"",province:"",city:"",county:"",recommenderAccount:"",ifRetail:"",ifSelling:"",status:"",page:1,pageSize:15},provList:[],cityList:[],countyList:[],tableData:[]}},created:function(){this.$global.selectRegionList(this,"","1"),this.onSubmit()},mounted:function(){},methods:{indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},selectProvince:function(){var e=this.info.province;if(this.info.city="",this.info.county="",this.cityList=[],this.countyList=[],""!=e){var t=this.provList.find(function(t){return t.areaName===e});this.$global.selectRegionList(this,t.id,"2")}},selectCity:function(){var e=this.info.city;if(this.countyList=[],this.info.county="",""!=e){var t=this.cityList.find(function(t){return t.areaName===e});this.$global.selectRegionList(this,t.id,"3")}},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/applet/queryAppletAuditToFirstTrial",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"audit-first-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},resetForm:function(e){this.$refs[e].resetFields()},loadAuditRecord:function(e,t){this.showRecord=!0,this.showTitle=t+" - 审核记录";try{this.$refs.appletAuditRecord.setAppletId(e)}catch(t){this.$cookies.set("appletId",e)}},loadDetails:function(e,t,a){this.showDetails=!0,this.showTitle=t+" - 详情",this.$cookies.set("auditResult",a);try{this.$refs.appletDetails.setAppletId(e)}catch(t){this.$cookies.set("appletId",e)}},setAppletId:function(){this.showDetails=!1,this.selectList()}}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"appletAuditFirstForm",staticClass:"demo-form-inline",staticStyle:{"text-align":"left"},attrs:{id:"audit-first-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"编码",prop:"appletCode"}},[a("el-input",{attrs:{placeholder:"请输入小程序编码",clearable:!0},model:{value:e.info.appletCode,callback:function(t){e.$set(e.info,"appletCode",t)},expression:"info.appletCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"appletName"}},[a("el-input",{attrs:{placeholder:"输入小程序名称",clearable:!0},model:{value:e.info.appletName,callback:function(t){e.$set(e.info,"appletName",t)},expression:"info.appletName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户手机",prop:"mobile"}},[a("el-input",{attrs:{type:"number",placeholder:"输入用户手机号码",clearable:!0},model:{value:e.info.mobile,callback:function(t){e.$set(e.info,"mobile",t)},expression:"info.mobile"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetForm("appletAuditFirstForm")}}},[e._v("重置")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"appletCode",label:"编码",width:"185"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"appletName",label:"名称",width:"220","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mobile",label:"用户(账号/名称)",width:"180","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mobile+"("+t.row.nickName+")"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeName",label:"服务类型","show-overflow-tooltip":!0,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ifRetail",label:"营业类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ifRetail?a("span",[e._v("批发")]):e._e(),e._v(" "),t.row.ifRetail?e._e():a("span",[e._v("零售")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"province",label:"省份","show-overflow-tooltip":!0,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"city",label:"城市","show-overflow-tooltip":!0,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"county",label:"区/县","show-overflow-tooltip":!0,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"更新日期",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"auditResult",label:"审核状态",width:"100","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击查看审核记录",placement:"top"}},[-1==t.row.auditResult?a("el-link",{attrs:{type:"danger",underline:!1},on:{click:function(a){return e.loadAuditRecord(t.row.id,t.row.appletName)}}},[e._v("审核驳回\n              ")]):e._e(),e._v(" "),0==t.row.auditResult?a("el-link",{attrs:{type:"warning",underline:!1},on:{click:function(a){return e.loadAuditRecord(t.row.id,t.row.appletName)}}},[e._v("待审核\n              ")]):e._e(),e._v(" "),1==t.row.auditResult?a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){return e.loadAuditRecord(t.row.id,t.row.appletName)}}},[e._v("初审通过\n              ")]):e._e(),e._v(" "),2==t.row.auditResult?a("el-link",{attrs:{type:"success",underline:!1},on:{click:function(a){return e.loadAuditRecord(t.row.id,t.row.appletName)}}},[e._v("终审通过\n              ")]):e._e()],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.auditResult?a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.loadDetails(t.row.id,t.row.appletName,t.row.auditResult)}}},[e._v("审核\n            ")]):e._e()]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"applet-record-dialog",attrs:{title:e.showTitle,visible:e.showRecord,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showRecord=t}}},[a("appletAuditRecord",{ref:"appletAuditRecord",on:{setAppletId:e.setAppletId}})],1),e._v(" "),a("el-dialog",{staticClass:"applet-details-dialog",attrs:{title:e.showTitle,visible:e.showDetails,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showDetails=t}}},[a("appletDetails",{ref:"appletDetails",on:{setAppletId:e.setAppletId}})],1)],1)],1)},staticRenderFns:[]};var G=a("VU/8")(Z,J,!1,function(e){a("gbyy")},null,null).exports,K={name:"applet-audit-last-list",components:{appletAuditRecord:Q,appletDetails:H},data:function(){return{loading:!0,tableHeight:50,showDetails:!1,showRecord:!1,showTitle:"",currentPage:1,total:0,info:{appletCode:"",appletName:"",mobile:"",province:"",city:"",county:"",recommenderAccount:"",ifRetail:"",ifSelling:"",auditResult:"",page:1,pageSize:15},provList:[],cityList:[],countyList:[],tableData:[]}},created:function(){this.$global.selectRegionList(this,"","1"),this.onSubmit()},mounted:function(){},methods:{indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},selectProvince:function(){var e=this.info.province;if(this.info.city="",this.info.county="",this.cityList=[],this.countyList=[],""!=e){var t=this.provList.find(function(t){return t.areaName===e});this.$global.selectRegionList(this,t.id,"2")}},selectCity:function(){var e=this.info.city;if(this.countyList=[],this.info.county="",""!=e){var t=this.cityList.find(function(t){return t.areaName===e});this.$global.selectRegionList(this,t.id,"3")}},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/applet/queryAppletAuditToLastTrial",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"audit-last-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},resetForm:function(e){this.$refs[e].resetFields()},loadAuditRecord:function(e,t){this.showRecord=!0,this.showTitle=t+" - 审核记录";try{this.$refs.appletAuditRecord.setAppletId(e)}catch(t){this.$cookies.set("appletId",e)}},loadDetails:function(e,t,a){this.showDetails=!0,this.showTitle=t+" - 详情",this.$cookies.set("auditResult",a);try{this.$refs.appletDetails.setAppletId(e)}catch(t){this.$cookies.set("appletId",e)}},setAppletId:function(){this.showDetails=!1,this.selectList()}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"appletAuditLastForm",staticClass:"audit-last-form",staticStyle:{"text-align":"left"},attrs:{id:"audit-last-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"编码",prop:"appletCode"}},[a("el-input",{attrs:{placeholder:"请输入小程序编码",clearable:!0},model:{value:e.info.appletCode,callback:function(t){e.$set(e.info,"appletCode",t)},expression:"info.appletCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"appletName"}},[a("el-input",{attrs:{placeholder:"输入小程序名称",clearable:!0},model:{value:e.info.appletName,callback:function(t){e.$set(e.info,"appletName",t)},expression:"info.appletName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户手机",prop:"mobile"}},[a("el-input",{attrs:{type:"number",placeholder:"输入用户手机号码",clearable:!0},model:{value:e.info.mobile,callback:function(t){e.$set(e.info,"mobile",t)},expression:"info.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业类型",prop:"ifRetail"}},[a("el-select",{attrs:{placeholder:"选择营业类型"},model:{value:e.info.ifRetail,callback:function(t){e.$set(e.info,"ifRetail",t)},expression:"info.ifRetail"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"批发",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"零售",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"审核状态",prop:"auditResult"}},[a("el-select",{attrs:{placeholder:"选择状态"},model:{value:e.info.auditResult,callback:function(t){e.$set(e.info,"auditResult",t)},expression:"info.auditResult"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"审核驳回",value:"-1"}}),e._v(" "),a("el-option",{attrs:{label:"待审核",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"初审通过",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"终审通过",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"省份",prop:"province"}},[a("el-select",{attrs:{placeholder:"选择省份"},on:{change:e.selectProvince},model:{value:e.info.province,callback:function(t){e.$set(e.info,"province",t)},expression:"info.province"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.provList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.areaName}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"城市",prop:"city"}},[a("el-select",{attrs:{placeholder:"选择城市"},on:{change:e.selectCity},model:{value:e.info.city,callback:function(t){e.$set(e.info,"city",t)},expression:"info.city"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.cityList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.areaName}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"区/县",prop:"county"}},[a("el-select",{attrs:{placeholder:"选择区/县"},model:{value:e.info.county,callback:function(t){e.$set(e.info,"county",t)},expression:"info.county"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.countyList,function(e,t){return a("el-option",{key:t,attrs:{label:e.areaName,value:e.areaName}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetForm("appletAuditLastForm")}}},[e._v("重置")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"appletCode",label:"编码",width:"185"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"appletName",label:"名称",width:"220","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mobile",label:"用户(账号/名称)",width:"180","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mobile+"("+t.row.nickName+")"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeName",label:"服务类型","show-overflow-tooltip":!0,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ifRetail",label:"营业类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ifRetail?a("span",[e._v("批发")]):e._e(),e._v(" "),t.row.ifRetail?e._e():a("span",[e._v("零售")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"province",label:"省份","show-overflow-tooltip":!0,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"city",label:"城市","show-overflow-tooltip":!0,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"county",label:"区/县","show-overflow-tooltip":!0,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"更新日期",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"auditResult",label:"审核状态",width:"100","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击查看审核记录",placement:"top"}},[-1==t.row.auditResult?a("el-link",{attrs:{type:"danger",underline:!1},on:{click:function(a){return e.loadAuditRecord(t.row.id,t.row.appletName)}}},[e._v("审核驳回\n            ")]):e._e(),e._v(" "),0==t.row.auditResult?a("el-link",{attrs:{type:"warning",underline:!1},on:{click:function(a){return e.loadAuditRecord(t.row.id,t.row.appletName)}}},[e._v("待审核\n            ")]):e._e(),e._v(" "),1==t.row.auditResult?a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){return e.loadAuditRecord(t.row.id,t.row.appletName)}}},[e._v("初审通过\n            ")]):e._e(),e._v(" "),2==t.row.auditResult?a("el-link",{attrs:{type:"success",underline:!1},on:{click:function(a){return e.loadAuditRecord(t.row.id,t.row.appletName)}}},[e._v("终审通过\n            ")]):e._e()],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.loadDetails(t.row.id,t.row.appletName,t.row.auditResult)}}},[e._v("\n            "+e._s(1==t.row.auditResult?"审核":"详情")+"\n          ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"applet-record-dialog",attrs:{title:e.showTitle,visible:e.showRecord,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showRecord=t}}},[a("appletAuditRecord",{ref:"appletAuditRecord",on:{setAppletId:e.setAppletId}})],1),e._v(" "),a("el-dialog",{staticClass:"applet-details-dialog",attrs:{title:e.showTitle,visible:e.showDetails,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showDetails=t}}},[a("appletDetails",{ref:"appletDetails",on:{setAppletId:e.setAppletId}})],1)],1)],1)},staticRenderFns:[]};var te=a("VU/8")(K,ee,!1,function(e){a("riAk")},null,null).exports,ae={name:"applet-type",data:function(){return{loading:!1,typeForm:{id:"",typeName:"",typeStatus:"1"},typeRules:{roleName:[{required:!0,message:"请输入类型名称",trigger:"blur"},{type:"string",min:1,max:15,message:"类型名称长度为1-15个字符",trigger:"blur"}]}}},created:function(){var e=this.$cookies.get("applet_type_id");this.loadAppletType(e)},mounted:function(){},methods:{loadAppletType:function(e){var t=this;e&&(this.typeForm.id=e,this.loading=!0,this.$axios({url:"/api/manage/applet/loadAppletType",method:"post",data:{id:e}}).then(function(a){"1"===a.data.code?(t.typeForm=a.data.data,t.typeForm.typeStatus=t.typeForm.typeStatus?"1":"0",delete t.typeForm.updateTime):"-1"===a.data.code&&t.$message.error(a.data.data),t.$cookies.remove("applet_type_id"),e=null,t.$global.exitLoad(t,null,a.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,null,"")}))},onSubmit:function(){var e=this;this.$refs.typeForm.validate(function(t){if(t){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});e.$axios({url:"/api/manage/applet/updateAppletType",method:"post",data:e.typeForm}).then(function(t){var i=e;"1"===t.data.code?e.$message.success({message:t.data.data,duration:1e3,onClose:function(){i.$emit("refreshSet")}}):e.$message.error(t.data.data),e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})}})}}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"typeForm",staticClass:"applet-type-list-form",attrs:{rules:e.typeRules,inline:!0,model:e.typeForm}},[a("el-form-item",{attrs:{label:"类型名称",prop:"typeName"}},[a("el-input",{attrs:{maxlength:"15",placeholder:"请输入类型名称"},model:{value:e.typeForm.typeName,callback:function(t){e.$set(e.typeForm,"typeName",t)},expression:"typeForm.typeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型状态",prop:"typeStatus"}},[a("el-select",{attrs:{placeholder:"请选择类型状态"},model:{value:e.typeForm.typeStatus,callback:function(t){e.$set(e.typeForm,"typeStatus",t)},expression:"typeForm.typeStatus"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var oe={name:"applet-type-list",components:{AppletType:a("VU/8")(ae,ie,!1,function(e){a("ouQP")},null,null).exports},data:function(){return{loading:!1,tableHeight:50,showInfo:!1,showTitle:"",currentPage:1,total:0,info:{typeName:"",typeStatus:"",page:1,pageSize:15},tableData:[]}},created:function(){this.onSubmit()},mounted:function(){},methods:{indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/applet/queryAppletTypePage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"applet-type-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},updateInfo:function(e){this.showInfo=!0,this.showTitle=e&&"0"!=e?"修改小程序服务类型信息":"添加小程序服务类型信息";try{this.$refs.AppletType.loadAppletType(e)}catch(t){this.$cookies.set("applet_type_id",e)}},refreshSet:function(){this.showInfo=!1,this.selectList()}}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{staticClass:"applet-type-form",staticStyle:{"text-align":"left"},attrs:{id:"applet-type-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"类型名称"}},[a("el-input",{attrs:{placeholder:"请输入类型名称",clearable:!0},model:{value:e.info.typeName,callback:function(t){e.$set(e.info,"typeName",t)},expression:"info.typeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型状态"}},[a("el-select",{attrs:{placeholder:"选择类型状态"},model:{value:e.info.typeStatus,callback:function(t){e.$set(e.info,"typeStatus",t)},expression:"info.typeStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.updateInfo("0")}}},[e._v("添加")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeName",label:"类型名称",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"versionNumber",label:"最新版本",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"更新日期",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeStatus",label:"类型状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.typeStatus?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),t.row.typeStatus?e._e():a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("禁用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){return e.updateInfo(t.row.id)}}},[e._v("修改")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"applet-type-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showInfo=t}}},[a("AppletType",{ref:"AppletType",on:{refreshSet:e.refreshSet}})],1)],1)],1)},staticRenderFns:[]};var le=a("VU/8")(oe,ne,!1,function(e){a("NGfQ")},null,null).exports,se={name:"applet-file",data:function(){return{loading:!1,typeList:[],fileForm:{typeId:"",versionNumber:"",fileStatus:"1"},fileRules:{typeId:[{required:!0,message:"请输入文件版本",trigger:"blur"}],versionNumber:[{required:!0,message:"请输入文件版本",trigger:"blur"},{file:"string",min:1,max:20,message:"文件版本长度为1-20个字符",trigger:"blur"}]}}},created:function(){var e=this.$cookies.get("applet_file_id");this.loadAppletFile(e)},mounted:function(){},methods:{loadAppletFile:function(e){var t=this;e&&(this.loading=!0,this.$axios({url:"/api/manage/applet/loadAppletFile",method:"post",data:{id:e}}).then(function(a){"1"===a.data.code&&(t.fileForm=a.data.data.info,t.fileForm.fileStatus=t.fileForm.fileStatus?"1":"0",delete t.fileForm.updateTime,delete t.fileForm.filePath),t.typeList=a.data.data.typeList,t.$cookies.remove("applet_file_id"),e=null,t.$global.exitLoad(t,null,a.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,null,"")}))},onSubmit:function(){var e=this;this.$refs.fileForm.validate(function(t){if(t){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});e.$axios({url:"/api/manage/applet/updateAppletFile",method:"post",data:e.fileForm}).then(function(t){var i=e;"1"===t.data.code?e.$message.success({message:t.data.data,duration:1e3,onClose:function(){i.$emit("refreshSet")}}):e.$message.error(t.data.data),e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})}})}}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"fileForm",staticClass:"demo-form-inline",attrs:{rules:e.fileRules,inline:!0,model:e.fileForm}},[a("el-form-item",{attrs:{label:"服务类型",prop:"typeId"}},[a("el-select",{staticClass:"applet-file-input",attrs:{placeholder:"请选择服务类型"},model:{value:e.fileForm.typeId,callback:function(t){e.$set(e.fileForm,"typeId",t)},expression:"fileForm.typeId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.typeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.typeName,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"文件版本",prop:"versionNumber"}},[a("el-input",{staticClass:"applet-file-input",attrs:{maxlength:"15",placeholder:"请输入文件版本"},model:{value:e.fileForm.versionNumber,callback:function(t){e.$set(e.fileForm,"versionNumber",t)},expression:"fileForm.versionNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型状态",prop:"fileStatus"}},[a("el-select",{staticClass:"applet-file-input",attrs:{placeholder:"请选择类型状态"},model:{value:e.fileForm.fileStatus,callback:function(t){e.$set(e.fileForm,"fileStatus",t)},expression:"fileForm.fileStatus"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{staticClass:"applet-file-input",attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var ce=a("VU/8")(se,re,!1,function(e){a("5pAy")},null,null).exports,de={name:"applet-page",data:function(){return{loading:!1,pageForm:{pageLogo:"",pageName:"",ifEdit:"1",pageStatus:"1"},pageRules:{pageLogo:[{required:!0,message:"请输入页面标识",trigger:"blur"},{page:"string",min:1,max:20,message:"页面标识长度为1-20个字符",trigger:"blur"}],pageName:[{required:!0,message:"请输入文页面名称",trigger:"blur"},{page:"string",min:1,max:20,message:"页面名称长度为1-20个字符",trigger:"blur"}]}}},created:function(){var e=this.$cookies.get("applet_page_id");this.loadAppletFile(e)},mounted:function(){},methods:{loadAppletPage:function(e){var t=this,a=this.$cookies.get("page_file_id");if(this.pageForm.fileId=a,e){var i=d.Loading.service({fullscreen:!0,text:"正在提交"});this.$axios({url:"/api/manage/applet/page/loadAppletPage",method:"post",data:{id:e}}).then(function(a){"1"===a.data.code&&(t.pageForm=a.data.data,t.pageForm.ifEdit=t.pageForm.ifEdit?"1":"0",t.pageForm.pageStatus=t.pageForm.pageStatus?"1":"0",delete t.pageForm.updateTime),t.$cookies.remove("applet_page_id"),e=null,t.$global.exitLoad(t,i,a.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,i,"")})}},onSubmit:function(){var e=this;this.$refs.pageForm.validate(function(t){if(t){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});e.$axios({url:"/api/manage/applet/page/updateAppletPage",method:"post",data:e.pageForm}).then(function(t){var i=e;"1"===t.data.code?e.$message.success({message:t.data.data,duration:1e3,onClose:function(){i.$emit("refreshSet")}}):e.$message.error(t.data.data),e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})}})}}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"pageForm",staticClass:"demo-form-inline",attrs:{rules:e.pageRules,inline:!0,model:e.pageForm}},[a("el-form-item",{attrs:{label:"页面标识",prop:"pageLogo"}},[a("el-input",{staticClass:"applet-page-input",attrs:{maxlength:"15",placeholder:"请输入页面标识"},model:{value:e.pageForm.pageLogo,callback:function(t){e.$set(e.pageForm,"pageLogo",t)},expression:"pageForm.pageLogo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"页面名称",prop:"pageName"}},[a("el-input",{staticClass:"applet-page-input",attrs:{maxlength:"15",placeholder:"请输入页面名称"},model:{value:e.pageForm.pageName,callback:function(t){e.$set(e.pageForm,"pageName",t)},expression:"pageForm.pageName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否编辑",prop:"ifEdit"}},[a("el-select",{staticClass:"applet-page-input",attrs:{placeholder:"请选择类型状态"},model:{value:e.pageForm.ifEdit,callback:function(t){e.$set(e.pageForm,"ifEdit",t)},expression:"pageForm.ifEdit"}},[a("el-option",{attrs:{label:"可编辑",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"不可编辑",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"页面状态",prop:"pageStatus"}},[a("el-select",{staticClass:"applet-page-input",attrs:{placeholder:"请选择页面状态"},model:{value:e.pageForm.pageStatus,callback:function(t){e.$set(e.pageForm,"pageStatus",t)},expression:"pageForm.pageStatus"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{staticClass:"applet-page-input",attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var ue=a("VU/8")(de,pe,!1,function(e){a("Ko2A")},null,null).exports,me={name:"element-type",data:function(){return{loading:!1,typeForm:{id:"",pageId:"",typeName:"",typeStatus:"1"},typeRules:{typeName:[{required:!0,message:"请输入类型名称",trigger:"blur"},{file:"string",min:1,max:10,message:"类型名称长度为1-10个字符",trigger:"blur"}]}}},created:function(){var e=this.$cookies.get("element_type_id");this.loadAppletelement(e)},mounted:function(){},methods:{loadAppletelement:function(e){var t=this,a=this.$cookies.get("element_page_id");if(this.typeForm.pageId=a,e&&0!=e){var i=d.Loading.service({fullscreen:!0,text:"正在提交"});this.$axios({url:"/api/manage/applet/page/loadElementType",method:"post",data:{id:e,pageId:a}}).then(function(a){"1"===a.data.code&&(t.typeForm=a.data.data,t.typeForm.typeStatus=t.typeForm.typeStatus?"1":"0"),t.$cookies.remove("element_type_id"),e=null,t.$global.exitLoad(t,i,a.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,i,"")})}},onSubmit:function(){var e=this;this.$refs.typeForm.validate(function(t){if(t){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});e.$axios({url:"/api/manage/applet/page/updateElementType",method:"post",data:e.typeForm}).then(function(t){var i=e;"1"===t.data.code?e.$message.success({message:t.data.data,duration:1e3,onClose:function(){i.$emit("refreshSet")}}):e.$message.error(t.data.data),e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})}})}}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"typeForm",staticClass:"demo-form-inline",attrs:{rules:e.typeRules,inline:!0,model:e.typeForm}},[a("el-form-item",{attrs:{label:"类型名称",prop:"typeName"}},[a("el-input",{staticClass:"element-type-input",attrs:{maxlength:"15",placeholder:"请输入类型名称"},model:{value:e.typeForm.typeName,callback:function(t){e.$set(e.typeForm,"typeName",t)},expression:"typeForm.typeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型状态",prop:"typeStatus"}},[a("el-select",{staticClass:"element-type-input",attrs:{placeholder:"请选择类型状态"},model:{value:e.typeForm.typeStatus,callback:function(t){e.$set(e.typeForm,"typeStatus",t)},expression:"typeForm.typeStatus"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{staticClass:"element-type-input",attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var ge={name:"element-type-list",components:{ElementType:a("VU/8")(me,fe,!1,function(e){a("EFFx")},null,null).exports},data:function(){return{loading:!1,tableHeight:50,showInfo:!1,showTitle:"",currentPage:1,total:0,info:{pageId:"",typeName:"",typeStatus:"",page:1,pageSize:15},tableData:[]}},created:function(){var e=this.$cookies.get("applet_page_id");this.loadElementTypePage(e)},mounted:function(){},methods:{loadElementTypePage:function(e){e&&(this.$cookies.set("element_page_id",e),this.info.pageId=this.$cookies.get("element_page_id"),this.onSubmit(),e=null,this.$cookies.remove("applet_page_id"))},indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/applet/page/queryElementTypePage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setAppendTableHeight(e,"element-type-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},updateInfo:function(e){this.showInfo=!0,this.showTitle=e&&"0"!=e?"修改元素类型信息":"添加元素类型信息",this.$cookies.set("element_type_id",e);try{this.$refs.ElementType.loadAppletelement(e)}catch(e){}},refreshSet:function(){this.showInfo=!1,this.selectList()},shiftSort:function(e,t,a){var i=this;this.loading=!0,this.$axios({url:"/api/manage/applet/page/updateElementTypeIndex",method:"post",data:{typeId:e,pageId:t,sort:a}}).then(function(e){"1"===e.data.code?i.onSubmit():"-1"===e.data.code&&(i.$message.error(e.data.data),i.$global.exitLoad(i,null,e.data))}).catch(function(e){console.info("错误信息",e),i.$global.exitLoad(i,null,"")})}}},he={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"elementTypeForm",staticClass:"element-type-form",staticStyle:{"text-align":"left"},attrs:{id:"element-type-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"类型名称"}},[a("el-input",{attrs:{placeholder:"请输入类型名称",clearable:!0},model:{value:e.info.typeName,callback:function(t){e.$set(e.info,"typeName",t)},expression:"info.typeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型状态"}},[a("el-select",{attrs:{placeholder:"选择类型状态"},model:{value:e.info.typeStatus,callback:function(t){e.$set(e.info,"typeStatus",t)},expression:"info.typeStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.selectList()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.updateInfo("0")}}},[e._v("添加")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeName",label:"类型名称",width:"100","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeStatus",label:"类型状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.typeStatus?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),t.row.typeStatus?e._e():a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("禁用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeIndex",label:"排序",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上移",placement:"top"}},[a("i",{staticClass:"el-icon-caret-top sort-direction",on:{click:function(a){return e.shiftSort(t.row.id,t.row.pageId,"top")}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下移",placement:"top"}},[a("i",{staticClass:"el-icon-caret-bottom sort-direction",on:{click:function(a){return e.shiftSort(t.row.id,t.row.pageId,"bot")}}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){return e.updateInfo(t.row.id)}}},[e._v("修改")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"element-type-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0,"append-to-body":!0},on:{"update:visible":function(t){e.showInfo=t}}},[a("ElementType",{ref:"ElementType",on:{refreshSet:e.refreshSet}})],1)],1)],1)},staticRenderFns:[]};var ve=a("VU/8")(ge,he,!1,function(e){a("tpW2")},null,null).exports,be={name:"applet-element",data:function(){return{loading:!1,typeList:[],elementForm:{elementId:"",pageId:"",typeId:"",elementLogo:"",elementName:"",elementStatus:"1"},elementRules:{elementLogo:[{required:!0,message:"请输入元素标识",trigger:"blur"},{file:"string",min:1,max:30,message:"元素标识长度为1-30个字符",trigger:"blur"}],elementName:[{required:!0,message:"请输入元素名称",trigger:"blur"},{file:"string",min:1,max:30,message:"元素名称长度为1-30个字符",trigger:"blur"}],typeId:[{required:!0,message:"请选择元素类型",trigger:"blur"}]}}},created:function(){var e=this.$cookies.get("applet_element_id");this.loadAppletElement(e)},mounted:function(){},methods:{loadAppletElement:function(e){var t=this,a=this.$cookies.get("element_page_id");if(this.elementForm.pageId=a,e){var i=d.Loading.service({fullscreen:!0,text:"正在提交"});this.$axios({url:"/api/manage/applet/page/loadAppletPageElement",method:"post",data:{id:e,pageId:a}}).then(function(a){"1"===a.data.code&&(t.elementForm=a.data.data.info,t.elementForm.elementStatus=t.elementForm.elementStatus?"1":"0",delete t.elementForm.updateTime,delete t.elementForm.elementIndex),t.typeList=a.data.data.typeList,t.$cookies.remove("applet_element_id"),e=null,t.$global.exitLoad(t,i,a.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,i,"")})}},onSubmit:function(){var e=this;this.$refs.elementForm.validate(function(t){if(t){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});e.$axios({url:"/api/manage/applet/page/updateAppletPageElement",method:"post",data:e.elementForm}).then(function(t){var i=e;"1"===t.data.code?e.$message.success({message:t.data.data,duration:1e3,onClose:function(){i.$emit("refreshSet")}}):e.$message.error(t.data.data),e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})}})}}},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"elementForm",staticClass:"demo-form-inline",attrs:{rules:e.elementRules,inline:!0,model:e.elementForm}},[a("el-form-item",{attrs:{label:"元素标识",prop:"elementLogo"}},[a("el-input",{staticClass:"applet-element-input",attrs:{maxlength:"30",placeholder:"请输入元素标识"},model:{value:e.elementForm.elementLogo,callback:function(t){e.$set(e.elementForm,"elementLogo",t)},expression:"elementForm.elementLogo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元素名称",prop:"elementName"}},[a("el-input",{staticClass:"applet-element-input",attrs:{maxlength:"30",placeholder:"请输入元素名称"},model:{value:e.elementForm.elementName,callback:function(t){e.$set(e.elementForm,"elementName",t)},expression:"elementForm.elementName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元素类型",prop:"typeId"}},[a("el-select",{staticClass:"applet-element-input",attrs:{placeholder:"请选择元素类型"},model:{value:e.elementForm.typeId,callback:function(t){e.$set(e.elementForm,"typeId",t)},expression:"elementForm.typeId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.typeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.typeName,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"元素状态",prop:"elementStatus"}},[a("el-select",{staticClass:"applet-element-input",attrs:{placeholder:"请选择元素状态"},model:{value:e.elementForm.elementStatus,callback:function(t){e.$set(e.elementForm,"elementStatus",t)},expression:"elementForm.elementStatus"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{staticClass:"applet-element-input",attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var ye={name:"applet-element-list",components:{AppletElement:a("VU/8")(be,_e,!1,function(e){a("kUj6")},null,null).exports},data:function(){return{loading:!1,tableHeight:50,showInfo:!1,showTitle:"",currentPage:1,total:0,info:{versionNumber:"",typeId:"",elementStatus:"",page:1,pageSize:10},tableData:[],typeList:[]}},created:function(){var e=this.$cookies.get("applet_page_id");this.loadAppletElementPage(e)},mounted:function(){},methods:{loadAppletElementPage:function(e){var t=this;e&&(this.$cookies.set("element_page_id",e),e=null,this.info.pageId=this.$cookies.get("element_page_id"),this.loading=!0,this.$axios({url:"/api/manage/applet/page/loadAppletPageElementPage",method:"post",data:{pageId:this.info.pageId}}).then(function(e){t.typeList=e.data.data,t.onSubmit(),t.$global.exitLoad(t,null,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,null,"")}))},indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/applet/page/queryAppletPageElementPage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setAppendTableHeight(e,"applet-element-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.timestamp="?"+Date.parse(new Date),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},updateInfo:function(e){this.showInfo=!0,this.showTitle=e&&"0"!=e?"修改元素信息":"添加元素信息",this.$cookies.set("applet_element_id",e);try{this.$refs.AppletElement.loadAppletElement(e)}catch(e){}},refreshSet:function(){this.showInfo=!1,this.onSubmit()},handleFileSuccess:function(e,t){"1"===e.code?(this.$message.success("上传成功"),this.onSubmit()):this.$message.error("上传失败");var a=d.Loading.service({fullscreen:!0,text:"正在上传"});this.$global.exitLoad(this,a,{code:e.data})},beforeAvatarUpload:function(e){var t=d.Loading.service({fullscreen:!0,text:"正在上传"}),a="application/x-zip-compressed,application/x-7z-compressed,application/x-gzip".indexOf(e.type)>=0,i=e.size/1024/1024<2;return a||this.$message.error("上传压缩元素格式错误!"),i||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&i||t.close(),a&&i},shiftSort:function(e,t,a){var i=this;this.loading=!0,this.$axios({url:"/api/manage/applet/page/updateElementIndex",method:"post",data:{elementId:e,pageId:t,sort:a}}).then(function(e){"1"===e.data.code?i.onSubmit():"-1"===e.data.code&&(i.$message.error(e.data.data),i.$global.exitLoad(i,null,e.data))}).catch(function(e){console.info("错误信息",e),i.$global.exitLoad(i,null,"")})}}},xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{staticClass:"demo-form-inline applet-element-form",staticStyle:{"text-align":"left"},attrs:{id:"applet-element-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"元素标识"}},[a("el-input",{attrs:{placeholder:"请输入元素标识",clearable:!0},model:{value:e.info.elementLogo,callback:function(t){e.$set(e.info,"elementLogo",t)},expression:"info.elementLogo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元素名称"}},[a("el-input",{attrs:{placeholder:"请输入元素名称",clearable:!0},model:{value:e.info.elementName,callback:function(t){e.$set(e.info,"elementName",t)},expression:"info.elementName"}})],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"元素类型"}},[a("el-select",{attrs:{placeholder:"选择元素类型"},model:{value:e.info.typeId,callback:function(t){e.$set(e.info,"typeId",t)},expression:"info.typeId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.typeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.typeName,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"元素状态"}},[a("el-select",{attrs:{placeholder:"选择元素状态"},model:{value:e.info.elementStatus,callback:function(t){e.$set(e.info,"elementStatus",t)},expression:"info.elementStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.selectList()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.updateInfo("0")}}},[e._v("添加")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"elementLogo",label:"元素标识",width:"140","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"elementName",label:"元素名称",width:"180","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeName",label:"元素类型",width:"100","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"更新日期",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"elementStatus",label:"元素状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.elementStatus?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),t.row.elementStatus?e._e():a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("禁用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"elementIndex",label:"排序",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上移",placement:"top"}},[a("i",{staticClass:"el-icon-caret-top sort-direction",on:{click:function(a){return e.shiftSort(t.row.id,t.row.pageId,"top")}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下移",placement:"top"}},[a("i",{staticClass:"el-icon-caret-bottom sort-direction",on:{click:function(a){return e.shiftSort(t.row.id,t.row.pageId,"bot")}}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){return e.updateInfo(t.row.id)}}},[e._v("修改")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"applet-element-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0,"append-to-body":!0},on:{"update:visible":function(t){e.showInfo=t}}},[a("AppletElement",{ref:"AppletElement",on:{refreshSet:e.refreshSet}})],1)],1)],1)},staticRenderFns:[]};var we={name:"applet-page-list",components:{AppletPage:ue,ElementTypeList:ve,AppletElementList:a("VU/8")(ye,xe,!1,function(e){a("AUqT")},null,null).exports},data:function(){return{loading:!1,tableHeight:50,inShow:!1,inTitle:"",infoShow:!1,infoTitle:"",typeShow:!1,typeTitle:"",elementShow:!1,elementTitle:"",tableData:[],fileTypeId:"",fileList:[],fileForm:{inFileId:""},info:{fileId:"",pageName:"",page:1,pageSize:10},fileRules:{inFileId:[{required:!0,message:"请选择文件版本",trigger:"blur"}]},newWin:{}}},created:function(){var e=this.$cookies.get("applet_file_id");this.loadAppletPage(e)},mounted:function(){},methods:{loadAppletPage:function(e){var t=this;e&&(this.$cookies.set("page_file_id",e),this.info.fileId=this.$cookies.get("page_file_id"),this.loading=!0,this.$axios({url:"/api/manage/applet/page/loadAppletPageList",method:"post",data:{fileId:e}}).then(function(a){"1"===a.data.code&&(t.fileTypeId=a.data.data.fileTypeId,t.fileList=a.data.data.fileList,t.onSubmit()),t.$cookies.remove("applet_file_id"),e=null,t.$global.exitLoad(t,null,a.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,null,"")}));try{this.newWin.close()}catch(e){}},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/applet/page/queryAppletPage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setAppendTableHeight(e,"applet-page-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},indexMethod:function(e){return e+1},selectList:function(){this.info.page=1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},updateAppletPage:function(e){this.infoShow=!0,e&&"0"!=e?this.infoTitle="修改小程序页面信息":(e=null,this.infoTitle="添加小程序页面信息"),this.$cookies.set("applet_page_id",e);try{this.$refs.AppletPage.loadAppletPage(e)}catch(e){}},loadPageElement:function(e,t){this.elementShow=!0,this.elementTitle=t+" - 元素列表",this.$cookies.set("applet_page_id",e);try{this.$refs.AppletElementList.loadAppletElementPage(e)}catch(e){}},loadPageElementType:function(e,t){this.typeShow=!0,this.typeTitle="页面："+t+" - 元素类型列表",this.$cookies.set("applet_page_id",e);try{this.$refs.ElementTypeList.loadElementTypePage(e)}catch(e){}},loadPageDefault:function(e){this.$cookies.set("default_page_id",e),this.$cookies.set("file_type_id",this.fileTypeId);var t=this.$router.resolve({name:"page-default"}).href;try{this.newWin.closed||this.newWin.close()}catch(e){}this.newWin=window.open(t,"_blank")},refreshSet:function(){this.infoShow=!1,this.loadAppletPage(this.$cookies.get("page_file_id"))},inDialog:function(){this.inShow=!0,this.inTitle="继承版本"},inFile:function(){var e=this;this.$refs.fileForm.validate(function(t){t&&e.$confirm("确定继承吗？继承成功后，原有的所有记录将会被替换，请谨慎操作！","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.$cookies.get("page_file_id"),a=Loading.service({fullscreen:!0,text:"正在提交"});e.$axios({url:"/api/manage/applet/updateAppletFile",method:"post",data:{fileId:t,inFileId:e.fileForm.inFileId}}).then(function(i){var o=e;"1"===i.data.code?e.$message.success({message:i.data.data,duration:1e3,onClose:function(){o.loadAppletPage(t)}}):e.$message.error(i.data.data),e.$global.exitLoad(e,a,i.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})})})}}},Se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"info",staticClass:"demo-form-inline applet-page-form",staticStyle:{"text-align":"left"},attrs:{id:"applet-page-form",rules:e.fileRules,inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"页面名称"}},[a("el-input",{attrs:{placeholder:"输入页面名称",clearable:!0},model:{value:e.info.pageName,callback:function(t){e.$set(e.info,"pageName",t)},expression:"info.pageName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.selectList()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.updateAppletPage("0")}}},[e._v("添加页面")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.inDialog()}}},[e._v("继承")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"pageLogo",label:"页面标识",width:"80","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"pageName",label:"页面名称",width:"120","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"更新日期",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"pageStatus",label:"页面状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.pageStatus?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),t.row.pageStatus?e._e():a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("禁用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){return e.updateAppletPage(t.row.id)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.loadPageElementType(t.row.id,t.row.pageName)}}},[e._v("元素类型\n          ")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.loadPageElement(t.row.id,t.row.pageName)}}},[e._v("元素列表\n          ")]),e._v(" "),a("el-button",{attrs:{type:"success",plain:"",size:"mini"},on:{click:function(a){return e.loadPageDefault(t.row.id)}}},[e._v("默认页面\n          ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"in-dialog",attrs:{title:e.inTitle,visible:e.inShow,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0,"append-to-body":!0},on:{"update:visible":function(t){e.inShow=t}}},[a("el-form",{ref:"fileForm",staticClass:"demo-form-inline applet-page-form",staticStyle:{"text-align":"center",height:"80px"},attrs:{rules:e.fileRules,inline:!0,model:e.fileForm}},[a("el-form-item",{attrs:{label:"文件版本",prop:"inFileId"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:e.fileForm.inFileId,callback:function(t){e.$set(e.fileForm,"inFileId",t)},expression:"fileForm.inFileId"}},[a("el-option",{attrs:{label:"请选择文件版本",value:""}}),e._v(" "),e._l(e.fileList,function(e,t){return a("el-option",{key:t,attrs:{label:e.versionNumber,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.inFile()}}},[e._v("继承")])],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"applet-page-dialog",attrs:{title:e.infoTitle,visible:e.infoShow,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0,"append-to-body":!0},on:{"update:visible":function(t){e.infoShow=t}}},[a("AppletPage",{ref:"AppletPage",on:{refreshSet:e.refreshSet}})],1),e._v(" "),a("el-dialog",{staticClass:"applet-page-element-dialog",attrs:{title:e.typeTitle,visible:e.typeShow,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0,"append-to-body":!0},on:{"update:visible":function(t){e.typeShow=t}}},[a("ElementTypeList",{ref:"ElementTypeList"})],1),e._v(" "),a("el-dialog",{staticClass:"applet-page-element-dialog",attrs:{title:e.elementTitle,visible:e.elementShow,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0,"append-to-body":!0},on:{"update:visible":function(t){e.elementShow=t}}},[a("AppletElementList",{ref:"AppletElementList"})],1)],1)],1)},staticRenderFns:[]};var ke={name:"applet-file-list",components:{AppletFile:ce,AppletPageList:a("VU/8")(we,Se,!1,function(e){a("1mOu")},null,null).exports},data:function(){return{loading:!1,tableHeight:50,showInfo:!1,showTitle:"",showPage:!1,pageTitle:"",currentPage:1,total:0,info:{versionNumber:"",typeId:"",fileStatus:"",page:1,pageSize:15},tableData:[],typeList:[],myHeader:{"X-Requested-With":"XMLHttpRequest"}}},created:function(){this.loadAppletFile()},mounted:function(){},methods:{loadAppletFile:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/applet/loadAppletFilePage",method:"post"}).then(function(t){"1"===t.data.code?(e.typeList=t.data.data,e.onSubmit()):e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/applet/queryAppletFilePage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"applet-file-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},updateInfo:function(e){this.showInfo=!0,this.showTitle=e&&"0"!=e?"修改小程序文件信息":"添加小程序文件信息",this.$cookies.set("applet_file_id",e);try{this.$refs.AppletFile.loadAppletFile(e)}catch(e){}},fileSet:function(e,t,a){this.showPage=!0,this.pageTitle=t+" - "+a,this.$cookies.set("applet_file_id",e);try{this.$refs.AppletPageList.loadAppletPage(e)}catch(e){}},handleClose:function(){try{this.$refs.AppletPageList.loadAppletPage(null)}catch(e){}this.showPage=!1},refreshSet:function(){this.showInfo=!1,this.selectList()},handleFileSuccess:function(e,t){"1"===e.code?(this.$message.success("上传成功"),this.onSubmit()):this.$message.error("上传失败");var a=d.Loading.service({fullscreen:!0,text:"正在上传"});this.$global.exitLoad(this,a,{code:e.data})},beforeAvatarUpload:function(e){var t=d.Loading.service({fullscreen:!0,text:"正在上传"}),a="application/x-zip-compressed,application/x-7z-compressed,application/x-gzip".indexOf(e.type)>=0,i=e.size/1024/1024<2;return a||this.$message.error("上传压缩文件格式错误!"),i||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&i||t.close(),a&&i}}},$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{staticClass:"applet-file-form",staticStyle:{"text-align":"left"},attrs:{id:"applet-file-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"文件版本"}},[a("el-input",{attrs:{placeholder:"请输入文件版本",clearable:!0},model:{value:e.info.versionNumber,callback:function(t){e.$set(e.info,"versionNumber",t)},expression:"info.versionNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务类型"}},[a("el-select",{attrs:{placeholder:"选择服务类型"},model:{value:e.info.typeId,callback:function(t){e.$set(e.info,"typeId",t)},expression:"info.typeId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.typeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.typeName,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"文件状态"}},[a("el-select",{attrs:{placeholder:"选择文件状态"},model:{value:e.info.fileStatus,callback:function(t){e.$set(e.info,"fileStatus",t)},expression:"info.fileStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.updateInfo("0")}}},[e._v("添加")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeName",label:"服务类型",width:"120","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"filePath",label:"文件路径",width:"220","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"versionNumber",label:"文件版本",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"更新日期",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"fileStatus",label:"文件状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.fileStatus?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),t.row.fileStatus?e._e():a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("禁用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"applet-file-upload"},[a("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){return e.updateInfo(t.row.id)}}},[e._v("修改")]),e._v(" "),a("el-upload",{attrs:{action:"/api/manage/applet/uploadAppletFile?id="+t.row.id+"&typeId="+t.row.typeId,name:"typeZip",headers:e.myHeader,"show-file-list":!1,"on-success":e.handleFileSuccess,"before-upload":e.beforeAvatarUpload}},[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"}},[e._v("上传")])],1),e._v(" "),a("el-button",{attrs:{type:"success",plain:"",size:"mini"},on:{click:function(a){return e.fileSet(t.row.id,t.row.typeName,t.row.versionNumber)}}},[e._v("设置页面\n            ")])],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"applet-file-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showInfo=t}}},[a("AppletFile",{ref:"AppletFile",on:{refreshSet:e.refreshSet}})],1),e._v(" "),a("el-dialog",{staticClass:"applet-file-page-dialog",attrs:{title:e.pageTitle,visible:e.showPage,"before-close":e.handleClose,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showPage=t}}},[a("AppletPageList",{ref:"AppletPageList"})],1)],1)],1)},staticRenderFns:[]};var Fe=a("VU/8")(ke,$e,!1,function(e){a("1wRH")},null,null).exports,Ie={name:"applet-version",data:function(){return{loading:!1,fileList:[],info:{},versionForm:{id:"",fileId:""},versionRules:{fileId:[{required:!0,message:"请选择文件版本",trigger:"blur"}]}}},created:function(){var e=this.$cookies.get("applet_version_id");this.loadAppletVersion(e)},mounted:function(){},methods:{loadAppletVersion:function(e){var t=this;e&&(this.loading=!0,this.$axios({url:"/api/manage/applet/loadAppletVersion",method:"post",data:{id:e}}).then(function(a){t.fileList=a.data.data.list,"1"===a.data.code&&(t.info=a.data.data.info,t.versionForm.id=t.info.id,t.versionForm.fileId=t.info.fileId,t.versionForm.versionId=t.info.versionId),t.$cookies.remove("applet_version_id"),e=null,t.$global.exitLoad(t,null,a.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,null,"")}))},onSubmit:function(){var e=this;this.$refs.versionForm.validate(function(t){if(t){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});e.$axios({url:"/api/manage/applet/updateAppletVersion",method:"post",data:e.versionForm}).then(function(t){var i=e;"1"===t.data.code?e.$message.success({message:t.data.data,duration:1e3,onClose:function(){i.$emit("refreshSet")}}):e.$message.error(t.data.data),e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})}})}}},Ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"versionForm",staticClass:"demo-form-inline",attrs:{rules:e.versionRules,inline:!0,model:e.versionForm}},[a("el-form-item",{attrs:{label:"程序编码"}},[a("div",{staticClass:"applet-version-input"},[e._v(e._s(e.info.appletCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"程序名称"}},[a("div",{staticClass:"applet-version-input"},[e._v(e._s(e.info.appletName))])]),e._v(" "),a("el-form-item",{attrs:{label:"服务类型"}},[a("div",{staticClass:"applet-version-input"},[e._v(e._s(e.info.typeName))])]),e._v(" "),a("el-form-item",{attrs:{label:"文件版本",prop:"fileId"}},[a("el-select",{staticClass:"applet-version-input",attrs:{placeholder:"选择文件版本"},model:{value:e.versionForm.fileId,callback:function(t){e.$set(e.versionForm,"fileId",t)},expression:"versionForm.fileId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.fileList,function(e,t){return a("el-option",{key:t,attrs:{label:e.versionNumber,value:e.id}})})],2)],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{staticClass:"applet-version-input",staticStyle:{"text-align":"center"},attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("提交\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var Le={name:"applet-version-list",components:{AppletVersion:a("VU/8")(Ie,Ce,!1,function(e){a("6Ls8")},null,null).exports},data:function(){return{loading:!1,tableHeight:50,showInfo:!1,showTitle:"",currentPage:1,total:0,info:{versionName:"",versionStatus:"",page:1,pageSize:15},tableData:[]}},created:function(){this.onSubmit()},mounted:function(){},methods:{indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/applet/queryAppletVersionPage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"applet-version-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},updateInfo:function(e,t){this.showInfo=!0,this.showTitle=t+" - 更新版本",this.$cookies.set("applet_version_id",e);try{this.$refs.AppletVersion.loadAppletVersion(e)}catch(e){}},refreshSet:function(){this.showInfo=!1,this.selectList()},downloadZip:function(e){window.open("/api/manage/applet/downloadAppletVersionFile?id="+e)}}},Ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{staticClass:"demo-form-inline applet-version-form",staticStyle:{"text-align":"left"},attrs:{id:"applet-version-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"类型名称"}},[a("el-input",{attrs:{placeholder:"请输入类型名称",clearable:!0},model:{value:e.info.versionName,callback:function(t){e.$set(e.info,"versionName",t)},expression:"info.versionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型状态"}},[a("el-select",{attrs:{placeholder:"选择类型状态"},model:{value:e.info.versionStatus,callback:function(t){e.$set(e.info,"versionStatus",t)},expression:"info.versionStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{version:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{version:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"appletCode",label:"小程序编码",width:"185"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"appletName",label:"小程序名称",width:"220","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"typeName",label:"服务类型",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"versionNumber",label:"版本号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"更新时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){return e.updateInfo(t.row.id,t.row.appletName)}}},[e._v("更新版本\n          ")]),e._v(" "),t.row.filePath?a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.downloadZip(t.row.id)}}},[e._v("\n            下载文件\n          ")]):e._e()]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"applet-version-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showInfo=t}}},[a("AppletVersion",{ref:"AppletVersion",on:{refreshSet:e.refreshSet}})],1)],1)],1)},staticRenderFns:[]};var Te=a("VU/8")(Le,Ne,!1,function(e){a("/WhM")},null,null).exports,Ae={name:"role-info",data:function(){return{loading:!1,showInfo:!1,showTitle:"父级菜单",parentList:[],parentName:"",menuForm:{},menuRules:{menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{type:"string",min:1,max:20,message:"菜单名称不能超过20个字符",trigger:"blur"}],menuLogo:[{required:!0,message:"请输入菜单标识",trigger:"blur"},{type:"string",min:1,max:50,message:"菜单标识不能超过50个字符",trigger:"blur"}],menuPath:[{required:!0,message:"请输入菜单路径",trigger:"blur"},{type:"string",min:1,max:250,message:"菜单路径不能超过250个字符",trigger:"blur"}],menuIndex:[{required:!0,message:"请输入菜单序号",trigger:"blur"},{type:"number",min:1,max:999,message:"菜单序号为1-999的数字",trigger:"blur"}]}}},created:function(){var e=this.$cookies.get("menuId"),t=this.$cookies.get("menuParentId");this.loadMenuInfo(e,t)},mounted:function(){},methods:{loadMenuInfo:function(e,t){var a=this;null!=t&&t>=0&&(this.loading=!0,this.$axios({url:"/api/manage/menu/loadMenuDetails",method:"post",data:{id:e,parentId:t}}).then(function(e){a.parentList=e.data.data.parentList,a.parentName=e.data.data.parentInfo.menuName,a.menuForm={id:"",parentId:e.data.data.parentInfo.id,menuIcon:"",menuName:"",menuLogo:"",menuPath:"",menuIndex:"",menuLevel:1,status:"1"},a.menuForm.menuLevel=e.data.data.level,"1"===e.data.code&&(a.menuForm=e.data.data.info,a.menuForm.status=a.menuForm.status?"1":"0",delete a.menuForm.updateTime),a.$cookies.remove("menuId"),a.$cookies.remove("menuParentId"),a.$global.exitLoad(a,null,e.data)}).catch(function(e){console.info("错误信息",e),a.$global.exitLoad(a,null,"")}))},chooseParentId:function(){this.showInfo=!0},setParentId:function(e,t){this.menuForm.parentId=e,this.parentName=t,this.showInfo=!1},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});t.$axios({url:"/api/manage/menu/updateMenuInfo",method:"post",data:t.menuForm}).then(function(e){console.info("后台返回的数据",e.data);var i=t;"1"===e.data.code?t.$message.success({message:e.data.data,duration:1e3,onClose:function(){i.$emit("loadMenuInfo")}}):t.$message.error(e.data.data),t.$global.exitLoad(t,a,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,a,"")})}})}}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"menuForm",staticClass:"demo-form-inline",attrs:{rules:e.menuRules,inline:!0,model:e.menuForm}},[a("el-form-item",{attrs:{label:"菜单等级"}},[a("div",{staticClass:"menu-input"},[1==e.menuForm.menuLevel?a("el-link",{attrs:{type:"primary",underline:!1}},[e._v("一级")]):e._e(),e._v(" "),2==e.menuForm.menuLevel?a("el-link",{attrs:{type:"primary",underline:!1}},[e._v("二级")]):e._e(),e._v(" "),3==e.menuForm.menuLevel?a("el-link",{attrs:{type:"primary",underline:!1}},[e._v("三级")]):e._e()],1)]),e._v(" "),a("el-form-item",{attrs:{label:"上级菜单",prop:"parentId"}},[a("el-select",{staticClass:"menu-input",attrs:{placeholder:"请选择上级菜单"},on:{change:function(t){return e.chooseParentId()}},model:{value:e.menuForm.parentId,callback:function(t){e.$set(e.menuForm,"parentId",t)},expression:"menuForm.parentId"}},e._l(e.parentList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),2==e.menuForm.menuLevel?a("el-form-item",{attrs:{label:"菜单icon",prop:"menuIcon"}},[a("el-input",{staticClass:"menu-input",attrs:{maxlength:"50",placeholder:"请输入菜单icon"},model:{value:e.menuForm.menuIcon,callback:function(t){e.$set(e.menuForm,"menuIcon",t)},expression:"menuForm.menuIcon"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"菜单名称",prop:"menuName"}},[a("el-input",{staticClass:"menu-input",attrs:{maxlength:"20",placeholder:"请输入菜单名称"},model:{value:e.menuForm.menuName,callback:function(t){e.$set(e.menuForm,"menuName",t)},expression:"menuForm.menuName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单标识",prop:"menuLogo"}},[a("el-input",{staticClass:"menu-input",attrs:{maxlength:"50",placeholder:"请输入菜单标识"},model:{value:e.menuForm.menuLogo,callback:function(t){e.$set(e.menuForm,"menuLogo",t)},expression:"menuForm.menuLogo"}})],1),e._v(" "),3==e.menuForm.menuLevel?a("el-form-item",{attrs:{label:"菜单路径",prop:"menuPath"}},[a("el-input",{staticClass:"menu-input",attrs:{type:"textarea","show-word-limit":!0,maxlength:"150",resize:"none",rows:"5",placeholder:"请输入菜单路径"},model:{value:e.menuForm.menuPath,callback:function(t){e.$set(e.menuForm,"menuPath",t)},expression:"menuForm.menuPath"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"菜单序号",prop:"menuIndex"}},[a("el-input",{staticClass:"menu-input",attrs:{type:"number",placeholder:"请输入菜单序号"},model:{value:e.menuForm.menuIndex,callback:function(t){e.$set(e.menuForm,"menuIndex",e._n(t))},expression:"menuForm.menuIndex"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单状态",prop:"status"}},[a("el-select",{staticClass:"menu-input",attrs:{placeholder:"请选择菜单状态"},model:{value:e.menuForm.status,callback:function(t){e.$set(e.menuForm,"status",t)},expression:"menuForm.status"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{staticClass:"menu-input",staticStyle:{"text-align":"center"},attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("menuForm")}}},[e._v("提交\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var De={name:"menu-list",components:{menuDetails:a("VU/8")(Ae,Pe,!1,function(e){a("BWqv")},null,null).exports},data:function(){return{loading:!1,showInfo:!1,showTitle:"",menuData:""}},created:function(){this.loadMenuList()},mounted:function(){},methods:{loadMenuList:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/menu/loadMenuList",method:"post"}).then(function(t){"1"===t.data.code?e.menuData=JSON.parse(t.data.data):e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,res.data)})},update:function(e,t){this.showInfo=!0,this.showTitle=e&&""!=e?"修改菜单":"添加菜单";try{this.$refs.menuDetails.loadMenuInfo(e,t)}catch(a){this.$cookies.set("menuId",e),this.$cookies.set("menuParentId",t)}},loadMenuInfo:function(){this.showInfo=!1,this.loadMenuList()}}},Re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"menu-tree-title"},[a("table",{attrs:{cellspacing:"0"}},[a("tr",[a("td",{staticStyle:{width:"216px"}},[e._v("菜单名称")]),e._v(" "),a("td",{staticStyle:{width:"220px"}},[e._v("菜单标识")]),e._v(" "),a("td",{staticStyle:{width:"400px"}},[e._v("菜单路径")]),e._v(" "),a("td",{staticStyle:{width:"100px"}},[e._v("菜单等级")]),e._v(" "),a("td",{staticStyle:{width:"100px"}},[e._v("菜单序号")]),e._v(" "),a("td",{staticStyle:{width:"100px"}},[e._v("菜单状态")]),e._v(" "),a("td",{staticStyle:{width:"210px"}},[e._v("操作")])])])]),e._v(" "),a("div",{staticClass:"custom-tree-container menu-tree"},[a("div",{staticClass:"block"},[a("el-tree",{attrs:{data:e.menuData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,o=t.data;return a("span",{staticClass:"custom-tree-node"},[0===o.level?a("span",{staticStyle:{width:"194px","text-indent":"0.5em"}},[e._v(e._s(i.label))]):e._e(),e._v(" "),1===o.level?a("span",{staticStyle:{width:"176px","text-indent":"0.5em"}},[e._v(e._s(i.label))]):e._e(),e._v(" "),2===o.level?a("span",{staticStyle:{width:"158px","text-indent":"0.5em"}},[a("i",{class:o.icon,staticStyle:{"margin-right":"5px"}}),e._v(e._s(i.label)+"\n            ")]):e._e(),e._v(" "),3===o.level?a("span",{staticStyle:{width:"140px","text-indent":"0.5em"}},[e._v(e._s(i.label))]):e._e(),e._v(" "),a("span",{staticStyle:{width:"220px"}},[e._v(e._s(o.logo))]),e._v(" "),a("span",{staticStyle:{width:"360px"}},[e._v(e._s(o.path))]),e._v(" "),a("span",{staticStyle:{width:"100px","text-align":"center"}},[e._v(e._s(1===o.level?"一级":2===o.level?"二级":3===o.level?"三级":"")+"\n            ")]),e._v(" "),a("span",{staticStyle:{width:"100px","text-align":"center"}},[e._v(e._s(o.index))]),e._v(" "),a("span",{staticStyle:{width:"100px","text-align":"center"}},[0!=o.id?a("div",[o.status?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),o.status?e._e():a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("禁用")])],1):e._e()]),e._v(" "),a("span",{staticStyle:{width:"210px","text-align":"center"}},[3!=o.level?a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.update("0",o.id)}}},[e._v("添加子级")]):e._e(),e._v(" "),0!=o.level?a("el-button",{attrs:{type:"warning",plain:""},on:{click:function(t){return e.update(o.id,o.parentId)}}},[e._v("修改\n              ")]):e._e()],1)])}}])})],1)]),e._v(" "),a("el-dialog",{staticClass:"menu-list-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showInfo=t}}},[a("div",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto"}},[a("menuDetails",{ref:"menuDetails",on:{loadMenuInfo:e.loadMenuInfo}})],1)])],1)],1)},staticRenderFns:[]};var ze=a("VU/8")(De,Re,!1,function(e){a("TCT2")},null,null).exports,Me={name:"user-info",data:function(){return{loading:!1,info:{id:null,noticeTitle:"",noticeContent:"",noticeType:"1",noticeStatus:!0},noticeStatus:"1",infoRules:{noticeTitle:[{required:!0,message:"请输入通知标题",trigger:"blur"},{min:1,max:50,message:"通知标题长度过长",trigger:"blur"}],noticeContent:[{required:!0,message:"请输入通知内容",trigger:"blur"},{min:1,max:2e3,message:"通知内容长度过长",trigger:"blur"}]}}},created:function(){var e=this.$cookies.get("system_notice_id");this.loadInfo(e)},mounted:function(){},methods:{loadInfo:function(e){var t=this;if(e&&"0"!=e){this.$cookies.remove("system_notice_id");var a=d.Loading.service({fullscreen:!0,text:"加载中"});this.$axios({url:"/api/manage/platformSet/loadSystemNoticeDetails",method:"post",data:{id:e}}).then(function(e){console.info("后台返回的数据",e.data),"1"===e.data.code?(t.info=e.data.data,t.info.noticeType=t.info.noticeType.toString(),t.noticeStatus=t.info.noticeStatus?"1":"0",delete t.info.createTime):t.$message.error(e.data.data),t.$global.exitLoad(t,a,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,a,"")})}else delete this.info.id},onSubmitInfo:function(){var e=this;this.$refs.info.validate(function(t){if(t){e.info.noticeStatus="1"===e.noticeStatus;var a=d.Loading.service({fullscreen:!0,text:"正在提交"});e.$axios({url:"/api/manage/platformSet/updateSystemNotice",method:"post",data:e.info}).then(function(t){console.info("后台返回的数据",t.data),"1"===t.data.code?e.$emit("loadInfo"):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})}else e.$message({message:"信息提交失败",type:"warning"})})}}},Ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"info",staticClass:"notice-update-form",attrs:{model:e.info,rules:e.infoRules}},[a("div",{staticClass:"remark"},[e._v("注：内容提交后不可再更改，只允许调整状态")]),e._v(" "),a("el-form-item",{attrs:{label:"通知标题",prop:"noticeTitle"}},[a("el-input",{staticClass:"notice-update-input",attrs:{placeholder:"请输入通知标题",readonly:!!e.info.id},model:{value:e.info.noticeTitle,callback:function(t){e.$set(e.info,"noticeTitle",t)},expression:"info.noticeTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通知内容",prop:"noticeContent"}},[a("el-input",{staticClass:"notice-update-input",attrs:{type:"textarea","show-word-limit":!0,maxlength:"2000",resize:"none",rows:"12",placeholder:"请输入通知内容（使用<br>在段尾进行分段）",readonly:!!e.info.id},model:{value:e.info.noticeContent,callback:function(t){e.$set(e.info,"noticeContent",t)},expression:"info.noticeContent"}})],1),e._v(" "),a("div",{staticClass:"notice-describe"},[e._v("系统公告：仅保留一条有效消息。")]),e._v(" "),a("div",{staticClass:"notice-describe"},[e._v("新用户推送：新用户绑定小程序，将收到此类推送，可以同时存在多条。")]),e._v(" "),a("div",{staticClass:"notice-describe"},[e._v("普通推送：系统将向全平台用户推送一条通知消息。")]),e._v(" "),a("el-form-item",{attrs:{label:"通知类型",prop:"noticeType"}},[a("el-select",{staticClass:"notice-update-input",attrs:{placeholder:"请选择通知类型",disabled:!!e.info.id},model:{value:e.info.noticeType,callback:function(t){e.$set(e.info,"noticeType",t)},expression:"info.noticeType"}},[a("el-option",{attrs:{label:"系统公告",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"新用户推送",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"普通推送",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"通知状态",prop:"noticeStatus"}},[a("el-select",{staticClass:"notice-update-input",attrs:{placeholder:"请选择通知状态"},model:{value:e.noticeStatus,callback:function(t){e.noticeStatus=t},expression:"noticeStatus"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"sub-div"},[a("el-button",{staticClass:"sub-but",staticStyle:{width:"190px",position:"absolute",left:"80px"},attrs:{type:"primary"},on:{click:function(t){return e.onSubmitInfo()}}},[e._v("提  交\n      ")])],1)],1)],1)},staticRenderFns:[]};var qe={name:"applet-audit-list",components:{systemNotice:a("VU/8")(Me,Ee,!1,function(e){a("YFMN")},null,null).exports},data:function(){return{loading:!0,tableHeight:50,showInfo:!1,showTitle:"",currentPage:1,total:0,tableData:[],info:{noticeTitle:"",noticeType:"",noticeStatus:"",page:1,pageSize:15}}},created:function(){this.loadList()},mounted:function(){},methods:{indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},loadList:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/platformSet/loadSystemNoticeByPage",method:"post",data:{title:this.info.noticeTitle,type:this.info.noticeType,status:this.info.noticeStatus}}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"notice-list-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.showInfo=!1,this.loadList()},handleCurrentChange:function(e){this.info.page=e,this.loadList()},loadDetails:function(e,t){this.showInfo=!0,this.showTitle=t&&""!=t?t:"添加管理员账号";try{this.$refs.systemNotice.loadInfo(e)}catch(t){this.$cookies.set("system_notice_id",e)}},loadInfo:function(){this.showInfo=!1,this.loadList()}}},He={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"querynoticeForm",staticClass:"notice-list-form",staticStyle:{"text-align":"left"},attrs:{id:"notice-list-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"通知标题",prop:"noticeTitle"}},[a("el-input",{attrs:{placeholder:"输入通知标题",clearable:!0},model:{value:e.info.noticeTitle,callback:function(t){e.$set(e.info,"noticeTitle",t)},expression:"info.noticeTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通知类型",prop:"noticeType"}},[a("el-select",{attrs:{placeholder:"请选择通知类型"},model:{value:e.info.noticeType,callback:function(t){e.$set(e.info,"noticeType",t)},expression:"info.noticeType"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"系统公告",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"新用户推送",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"普通推送",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"通知状态",prop:"noticeStatus"}},[a("el-select",{attrs:{placeholder:"请选择通知状态"},model:{value:e.info.noticeStatus,callback:function(t){e.$set(e.info,"noticeStatus",t)},expression:"info.noticeStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.loadDetails(0)}}},[e._v("添加")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"noticeTitle",label:"通知标题",width:"220","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"noticeContent",label:"通知内容",width:"360","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"noticeType",label:"通知类型",width:"80","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.noticeType?a("span",[e._v("系统公告")]):e._e(),e._v(" "),2===t.row.noticeType?a("span",[e._v("新用户推送")]):e._e(),e._v(" "),3===t.row.noticeType?a("span",[e._v("普通推送")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"更新时间",width:"160","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"noticeStatus",label:"通知状态",width:"100","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.noticeStatus?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),t.row.noticeStatus?e._e():a("el-link",{attrs:{type:"warning",underline:!1}},[e._v("禁用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.loadDetails(t.row.id)}}},[e._v("详情\n          ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"notice-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showInfo=t}}},[a("div",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto"}},[a("systemNotice",{ref:"systemNotice",on:{loadInfo:e.loadInfo}})],1)])],1)],1)},staticRenderFns:[]};var Ue=a("VU/8")(qe,He,!1,function(e){a("fIJG")},null,null).exports,Ve={name:"user-info",data:function(){return{loading:!1,typeList:[],info:{id:"",relationImage:"",appletTypeId:"",pageLogo:"",relationType:"1",relationWebsite:"",relationName:"平台推广",startTime:"2020/05/07",expireTime:"",isDefault:!1,relationStatus:!1},lastTime:Date.now(),format:"yyyy年MM月dd日",valueFormat:"yyyy/MM/dd",isDefaultText:"关闭",relationStatusText:"禁用",typeStyle:"width: 275px;height: 80px;",typeIconStyle:"width: 275px;height: 80px;line-height: 80px;",infoRules:{relationImage:[{required:!0,message:"请上传推广图片",trigger:"blur"}],appletTypeId:[{required:!0,message:"请选择小程序类型",trigger:"blur"}],pageLogo:[{required:!0,message:"请选择页面类型",trigger:"blur"}],relationWebsite:[{min:0,max:100,message:"关联网址长度过长",trigger:"blur"}],relationName:[{required:!0,message:"请输入关联对象",trigger:"blur"},{min:1,max:100,message:"关联对象长度过长",trigger:"blur"}]},pickerOptionsStart:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},created:function(){var e=this.$cookies.get("advert_relation_id");this.loadInfo(e),this.loadAppletFile()},mounted:function(){},methods:{loadInfo:function(e){var t=this;if(e&&"0"!=e){this.$cookies.remove("advert_relation_id");var a=d.Loading.service({fullscreen:!0,text:"加载中"});this.$axios({url:"/api/manage/platformSet/loadAppletAdvertRelationDetails",method:"post",data:{id:e}}).then(function(e){console.info("后台返回的数据",e.data),"1"===e.data.code?(t.info=e.data.data,t.info.relationType=t.info.relationType.toString(),t.statusChange(),t.defaultChange(),delete t.info.updateTime):t.$message.error(e.data.data),t.$global.exitLoad(t,a,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,a,"")})}else delete this.info.id},loadAppletFile:function(){var e=this;this.$axios({url:"/api/manage/applet/loadAppletFilePage",method:"post"}).then(function(t){"1"===t.data.code&&(e.typeList=t.data.data)}).catch(function(e){console.info("错误信息",e)})},clearDate:function(e){var t=this;this.info.startTime=this.addDate(),this.info.expireTime=this.info.startTime,2===e&&(this.info.relationImage=""),""!=this.info.appletTypeId&&""!=this.info.pageLogo&&this.$axios({url:"/api/manage/platformSet/queryAppletAdvertRelationByLastExpireTime",method:"post",data:{appletTypeId:this.info.appletTypeId,pageLogo:this.info.pageLogo}}).then(function(e){if("1"===e.data.code){var a=e.data.data;t.info.startTime=a.startDate,t.info.expireTime=a.expireTime,t.pickerOptionsStart={disabledDate:function(e){return e.getTime()<new Date(a.lastDate)}}}}).catch(function(e){console.info("错误信息",e)})},typeChange:function(){"1"!=this.info.relationType?(this.info.isDefault=!1,this.info.relationName="平台推广"===this.info.relationName.trim()?"":this.info.relationName):this.info.relationName="平台推广",console.info("1"!=this.info.relationType)},defaultChange:function(){this.info.isDefault?this.isDefaultText="开启":this.isDefaultText="关闭"},statusChange:function(){this.info.relationStatus?this.relationStatusText="正常":this.relationStatusText="禁用"},handleAdvertSuccess:function(e,t){"1"===e.code?(this.info.relationImage=e.data,this.$message({message:"上传成功",type:"success"})):this.$message.error("上传失败");var a=d.Loading.service({fullscreen:!0,text:"正在上传"});this.$global.exitLoad(this,a,{code:e.data})},beforeAdvertUpload:function(e){var t=d.Loading.service({fullscreen:!0,text:"正在上传"}),a="image/png,image/jpeg,image/jpg".indexOf(e.type)>=0,i=e.size/1024/1024<3;return a||this.$message.error("上传推广图片格式错误!"),i||this.$message.error("上传推广图片大小不能超过 3MB!"),a&&i||t.close(),a&&i},onSubmitInfo:function(){var e=this;this.$refs.info.validate(function(t){if(t){var a=d.Loading.service({fullscreen:!0,text:"正在提交"});e.$axios({url:"/api/manage/platformSet/updateAppletAdvertRelation",method:"POST",data:e.info}).then(function(t){console.info("后台返回的数据",t.data),"1"===t.data.code?e.$emit("loadInfo"):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})}else e.$message({message:"信息提交失败",type:"warning"})})},addDate:function(){var e=new Date,t={year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()},a=t.year;return a+="/"+(t.month>9?t.month:"0"+t.month),a+="/"+(t.date>9?t.date:"0"+t.date),console.log(a),a}}},Oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF"},attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"upload-div",style:2==e.info.pageLogo?"top: 190px;":""},[a("div",{staticClass:"img-div"},[a("el-upload",{staticClass:"advert-img-uploader",attrs:{action:"/api/manage/platformSet/uploadImage",name:"image","show-file-list":!1,"on-success":e.handleAdvertSuccess,"before-upload":e.beforeAdvertUpload}},[e.info.relationImage?a("img",{staticClass:"advert-img",style:2==e.info.pageLogo?e.typeStyle:"",attrs:{src:e.info.relationImage}}):a("i",{staticClass:"el-icon-plus advert-img-uploader-icon",style:2==e.info.pageLogo?e.typeIconStyle:"line-height: 267px;"})])],1),e._v(" "),a("div",{staticClass:"text-div"},[e._v("上传推广图片")])]),e._v(" "),a("el-form",{ref:"info",staticClass:"advert-form",attrs:{model:e.info,rules:e.infoRules}},[a("el-form-item",{attrs:{label:"小程序类型",prop:"appletTypeId"}},[a("el-select",{attrs:{placeholder:"请选择小程序类型"},on:{change:function(t){return e.clearDate(1)}},model:{value:e.info.appletTypeId,callback:function(t){e.$set(e.info,"appletTypeId",t)},expression:"info.appletTypeId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.typeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.typeName,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"页面类型",prop:"pageLogo"}},[a("el-select",{attrs:{placeholder:"请选择页面类型"},on:{change:function(t){return e.clearDate(2)}},model:{value:e.info.pageLogo,callback:function(t){e.$set(e.info,"pageLogo",t)},expression:"info.pageLogo"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),a("el-option",{attrs:{label:"load封面",value:"LOAD"}}),e._v(" "),a("el-option",{attrs:{label:"主页",value:"MAIN"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"推广类型",prop:"relationType"}},[a("el-select",{attrs:{placeholder:"请选择推广类型"},on:{change:e.typeChange},model:{value:e.info.relationType,callback:function(t){e.$set(e.info,"relationType",t)},expression:"info.relationType"}},[a("el-option",{attrs:{label:"内部推广",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"外部推广",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联网址",prop:"relationWebsite"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入关联网址",maxlength:"150",resize:"none",rows:"3"},model:{value:e.info.relationWebsite,callback:function(t){e.$set(e.info,"relationWebsite",t)},expression:"info.relationWebsite"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推广对象",prop:"relationName"}},[a("el-input",{attrs:{placeholder:"企业、店铺名称",maxlength:"100"},model:{value:e.info.relationName,callback:function(t){e.$set(e.info,"relationName",t)},expression:"info.relationName"}})],1),e._v(" "),e.info.isDefault?e._e():a("el-form-item",{attrs:{label:"开始日期",prop:"startTime"}},[a("el-date-picker",{attrs:{placeholder:"请选择日期",format:e.format,"value-format":e.valueFormat,"picker-options":e.pickerOptionsStart},model:{value:e.info.startTime,callback:function(t){e.$set(e.info,"startTime",t)},expression:"info.startTime"}})],1),e._v(" "),e.info.isDefault?e._e():a("el-form-item",{attrs:{label:"截止日期",prop:"expireTime"}},[a("el-date-picker",{attrs:{placeholder:"请选择日期",format:e.format,"value-format":e.valueFormat,"picker-options":e.pickerOptionsStart},model:{value:e.info.expireTime,callback:function(t){e.$set(e.info,"expireTime",t)},expression:"info.expireTime"}})],1),e._v(" "),"1"===e.info.relationType?a("el-form-item",{attrs:{label:"是否默认",prop:"isDefault"}},[a("el-switch",{attrs:{"active-color":"#409EFF","active-text":e.isDefaultText,"inactive-color":"#303133"},on:{change:e.defaultChange},model:{value:e.info.isDefault,callback:function(t){e.$set(e.info,"isDefault",t)},expression:"info.isDefault"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"关联状态",prop:"relationStatus"}},[a("el-switch",{attrs:{"active-color":"#409EFF","active-text":e.relationStatusText,"inactive-color":"#303133"},on:{change:e.statusChange},model:{value:e.info.relationStatus,callback:function(t){e.$set(e.info,"relationStatus",t)},expression:"info.relationStatus"}})],1),e._v(" "),a("el-form-item",{staticClass:"sub-div"},[a("el-button",{staticClass:"sub-but",staticStyle:{position:"absolute",left:"100px"},attrs:{type:"primary"},on:{click:function(t){return e.onSubmitInfo()}}},[e._v("提  交\n      ")])],1)],1)],1)},staticRenderFns:[]};var Be={name:"advert-list",components:{AdvertDetails:a("VU/8")(Ve,Oe,!1,function(e){a("OhSH")},null,null).exports},data:function(){return{loading:!0,tableHeight:50,showInfo:!1,showTitle:"",currentPage:1,total:0,tableData:[],typeList:[],info:{appletTypeId:"",pageLogo:"",relationWebsite:"",relationType:"",relationName:"",relationStatus:"",page:1,pageSize:15},systemDate:""}},created:function(){this.addDate(),this.loadAppletFile(),this.loadList()},mounted:function(){},methods:{loadAppletFile:function(){var e=this;this.$axios({url:"/api/manage/applet/loadAppletFilePage",method:"post"}).then(function(t){"1"===t.data.code&&(e.typeList=t.data.data)}).catch(function(e){console.info("错误信息",e)})},indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},loadList:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/platformSet/loadAppletAdvertRelationByPage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"advert-list-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.showInfo=!1,this.loadList()},handleCurrentChange:function(e){this.info.page=e,this.loadList()},loadDetails:function(e,t){this.showInfo=!0,this.showTitle=t&&""!=t?t:"添加推广关联信息";try{this.$refs.advertDetails.loadInfo(e)}catch(t){this.$cookies.set("advert_relation_id",e)}},loadInfo:function(){this.showInfo=!1,this.loadList()},addDate:function(){var e=new Date,t={year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()},a=t.year;return a+="/"+(t.month>9?t.month:"0"+t.month),a+="/"+(t.date>9?t.date:"0"+t.date),console.log(a),this.systemDate=a,a}}},We={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"queryadvertForm",staticClass:"advert-list-form",staticStyle:{"text-align":"left"},attrs:{id:"advert-list-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"小程序类型",prop:"appletTypeId"}},[a("el-select",{attrs:{placeholder:"选择小程序类型"},model:{value:e.info.appletTypeId,callback:function(t){e.$set(e.info,"appletTypeId",t)},expression:"info.appletTypeId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.typeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.typeName,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"页面类型",prop:"pageLogo"}},[a("el-select",{attrs:{placeholder:"选择页面类型"},model:{value:e.info.pageLogo,callback:function(t){e.$set(e.info,"pageLogo",t)},expression:"info.pageLogo"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"load封面",value:"LOAD"}}),e._v(" "),a("el-option",{attrs:{label:"主页",value:"MAIN"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"推广类型",prop:"relationType"}},[a("el-select",{attrs:{placeholder:"选择推广类型"},model:{value:e.info.relationType,callback:function(t){e.$set(e.info,"relationType",t)},expression:"info.relationType"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"内部推广",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"外部推广",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联网址",prop:"relationWebsite"}},[a("el-input",{attrs:{placeholder:"输入关联网址",clearable:!0},model:{value:e.info.relationWebsite,callback:function(t){e.$set(e.info,"relationWebsite",t)},expression:"info.relationWebsite"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推广对象",prop:"relationName"}},[a("el-input",{attrs:{placeholder:"输入推广对象",clearable:!0},model:{value:e.info.relationName,callback:function(t){e.$set(e.info,"relationName",t)},expression:"info.relationName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推广状态",prop:"relationStatus"}},[a("el-select",{attrs:{placeholder:"请选择推广状态"},model:{value:e.info.relationStatus,callback:function(t){e.$set(e.info,"relationStatus",t)},expression:"info.relationStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"失效",value:"0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.loadDetails(0,"")}}},[e._v("添加")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"relationImage",label:"推广图片",width:"260"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticClass:"load-image",attrs:{src:e.row.relationImage}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"appletTypeName",label:"小程序类型",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"pageLoad",label:"页面类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["LOAD"===t.row.pageLogo?a("label",[e._v("load加载")]):e._e(),e._v(" "),"MAIN"===!t.row.pageLogo?a("label",[e._v("主页")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"relationWebsite",label:"关联网址",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticStyle:{color:"#409EFF","font-weight":"500","font-size":"14px"},attrs:{href:t.row.relationWebsite}},[e._v(e._s(t.row.relationWebsite))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"relationTypeName",label:"推广类型",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"relationName",label:"推广对象",width:"260"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"startTime",label:"开始日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"expireTime",label:"截止日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"isDefault",label:"是否默认",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isDefault?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("是")]):e._e(),e._v(" "),t.row.isDefault?e._e():a("el-link",{attrs:{type:"danger",underline:!1}},[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"relationStatus",label:"通知状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.relationStatus?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),t.row.relationStatus?e._e():a("el-link",{attrs:{type:"warning",underline:!1}},[e._v("失效")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"updateTime",label:"更新时间",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.loadDetails(t.row.id,t.row.relationName)}}},[e._v("详情\n            ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"advert-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showInfo=t}}},[a("div",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto"}},[a("AdvertDetails",{ref:"advertDetails",on:{loadInfo:e.loadInfo}})],1)])],1)],1)},staticRenderFns:[]};var Xe=a("VU/8")(Be,We,!1,function(e){a("1yNg")},null,null).exports,je={name:"applet-audit-list",components:{appletDetails:H},data:function(){return{loading:!0,tableHeight:50,showInfo:!1,showTitle:"",currentPage:1,total:0,info:{mobile:"",nickName:"",startDate:"",endDate:"",status:"",page:1,pageSize:15},format:"yyyy年MM月dd日",valueFormat:"yyyy-MM-dd",rList:[]}},created:function(){this.onLoad()},mounted:function(){},methods:{indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},onLoad:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/user/queryUserToPage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"user-list-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.showInfo=!1,this.onLoad()},handleCurrentChange:function(e){this.info.page=e,this.onLoad()},resetForm:function(){this.info.startDate="",this.info.endDate="",this.$refs.queryUserForm.resetFields()},setStatus:function(e,t){},setAppletId:function(){this.selectList()}}},Ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"queryUserForm",staticClass:"user-list-form",staticStyle:{"text-align":"left"},attrs:{id:"user-list-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"用户手机",prop:"mobile"}},[a("el-input",{attrs:{type:"number",placeholder:"输入用户手机号码",clearable:!0},model:{value:e.info.mobile,callback:function(t){e.$set(e.info,"mobile",t)},expression:"info.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户昵称",prop:"nickName"}},[a("el-input",{attrs:{placeholder:"请输入用户昵称",clearable:!0},model:{value:e.info.nickName,callback:function(t){e.$set(e.info,"nickName",t)},expression:"info.nickName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"注册日期",prop:"ifRetail"}},[a("el-date-picker",{staticStyle:{width:"190px"},attrs:{placeholder:"选择日期",format:e.format,"value-format":e.valueFormat},model:{value:e.info.startDate,callback:function(t){e.$set(e.info,"startDate",t)},expression:"info.startDate"}}),e._v("\n         - \n        "),a("el-date-picker",{staticStyle:{width:"190px"},attrs:{placeholder:"选择日期",format:e.format,"value-format":e.valueFormat},model:{value:e.info.endDate,callback:function(t){e.$set(e.info,"endDate",t)},expression:"info.endDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择用户状态"},model:{value:e.info.status,callback:function(t){e.$set(e.info,"status",t)},expression:"info.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mobile",label:"手机号码",width:"120","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"nickName",label:"昵称",width:"160","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"nickName",label:"性别",width:"50","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.gender?"男":"女"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"birthday",label:"生日",width:"120","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"email",label:"邮箱",width:"160","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"balance",label:"余额",width:"120","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"freeBalance",label:"冻结余额",width:"120","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"integral",label:"积分",width:"120","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"状态",width:"100","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),t.row.status?e._e():a("el-link",{attrs:{type:"warning",underline:!1}},[e._v("禁用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createDate",label:"更新日期",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.setStatus(t.row.id)}}},[e._v("详情\n          ")]):e._e()]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"user-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showInfo=t}}},[a("div",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto"}})])],1)],1)},staticRenderFns:[]};var Qe=a("VU/8")(je,Ye,!1,function(e){a("2XWa")},null,null).exports,Ze={name:"applet-audit-list",components:{appletDetails:H},data:function(){return{loading:!0,tableHeight:50,showInfo:!1,showTitle:"",currentPage:1,total:0,info:{mobile:"",nickName:"",extensionCode:"",startDate:"",endDate:"",status:"",page:1,pageSize:15},format:"yyyy年MM月dd日",valueFormat:"yyyy-MM-dd",rList:[]}},created:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/user/loadMerchantList",method:"post"}).then(function(t){console.info("后台返回的数据",t.data),"1"===t.data.code&&(e.rList=t.data.data),e.onSubmit()}).catch(function(e){console.info("错误信息",e)})},mounted:function(){},methods:{indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},onSubmit:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/user/queryMerchantToPage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"merchant-list-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.showInfo=!1,this.onSubmit()},handleCurrentChange:function(e){this.info.page=e,this.onSubmit()},resetForm:function(){this.info.startDate="",this.info.endDate="",this.$refs.queryMerchantForm.resetFields()},setStatus:function(e,t){},setAppletId:function(){this.selectList()}}},Je={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"queryMerchantForm",staticClass:"demo-form-inline",staticStyle:{"text-align":"left"},attrs:{id:"merchant-list-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"用户手机",prop:"mobile"}},[a("el-input",{attrs:{type:"number",placeholder:"输入用户手机号码",clearable:!0},model:{value:e.info.mobile,callback:function(t){e.$set(e.info,"mobile",t)},expression:"info.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户昵称",prop:"nickName"}},[a("el-input",{attrs:{placeholder:"请输入用户昵称",clearable:!0},model:{value:e.info.nickName,callback:function(t){e.$set(e.info,"nickName",t)},expression:"info.nickName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推荐码",prop:"extensionCode"}},[a("el-select",{attrs:{placeholder:"请选择推荐码"},on:{change:e.selectCity},model:{value:e.info.extensionCode,callback:function(t){e.$set(e.info,"extensionCode",t)},expression:"info.extensionCode"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.rList,function(e,t){return a("el-option",{key:t,attrs:{label:e.code+" - "+e.name,value:e.code}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"注册日期",prop:"ifRetail"}},[a("el-date-picker",{staticStyle:{width:"190px"},attrs:{placeholder:"选择日期",format:e.format,"value-format":e.valueFormat},model:{value:e.info.startDate,callback:function(t){e.$set(e.info,"startDate",t)},expression:"info.startDate"}}),e._v("\n         - \n        "),a("el-date-picker",{staticStyle:{width:"190px"},attrs:{placeholder:"选择日期",format:e.format,"value-format":e.valueFormat},model:{value:e.info.endDate,callback:function(t){e.$set(e.info,"endDate",t)},expression:"info.endDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择用户状态"},model:{value:e.info.status,callback:function(t){e.$set(e.info,"status",t)},expression:"info.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mobile",label:"手机号码",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"nickName",label:"昵称",width:"160","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"nickName",label:"性别",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.gender?"男":"女"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"birthday",label:"生日",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"email",label:"邮箱",width:"160","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"balance",label:"余额",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"freeBalance",label:"冻结余额",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"integral",label:"积分",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"extensionCode",label:"推荐码",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"managerUserName",label:"推荐人(账号/昵称)",width:"220","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.managerUserName+" / "+t.row.managerNickName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("正常")]):e._e(),e._v(" "),t.row.status?e._e():a("el-link",{attrs:{type:"warning",underline:!1}},[e._v("禁用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createDate",label:"更新日期",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.setStatus(t.row.id)}}},[e._v("禁用\n          ")]):e._e()]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"merchant-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showInfo=t}}},[a("div",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto"}})])],1)],1)},staticRenderFns:[]};var Ge=a("VU/8")(Ze,Je,!1,function(e){a("ETR9")},null,null).exports,Ke={name:"order-list",components:{orderDetails:a("VU/8")(null,null,!1,null,null,null).exports},data:function(){return{loading:!0,tableHeight:50,showInfo:!1,showTitle:"",currentPage:1,total:0,tableData:[],typeList:[],info:{orderNo:"",courierNo:"",appletName:"",userMobile:"",createTime:null,updateTime:null,orderStatus:"",page:1,pageSize:15},systemDate:""}},created:function(){this.loadList()},mounted:function(){},methods:{indexMethod:function(e){return(parseInt(this.info.page)-1)*parseInt(this.info.pageSize)+(parseInt(e)+1)},loadList:function(){var e=this;this.loading=!0,this.$axios({url:"/api/manage/order/queryOrderInfoByPage",method:"post",data:this.info}).then(function(t){console.info("后台返回的数据",t.data),e.$global.setTableHeight(e,"order-list-form"),"1"===t.data.code?(e.tableData=t.data.data.dataSource,e.total=t.data.data.totalCount):"-1"===t.data.code&&e.$message.error(t.data.data),e.$global.exitLoad(e,null,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,null,"")})},selectList:function(){this.info.page=1,this.showInfo=!1,this.loadList()},handleCurrentChange:function(e){this.info.page=e,this.loadList()},loadDetails:function(e,t){this.showInfo=!0,this.showTitle=t&&""!=t?t:"添加推广关联信息";try{this.$refs.orderDetails.loadInfo(e)}catch(t){this.$cookies.set("order_relation_id",e)}},loadInfo:function(){this.showInfo=!1,this.loadList()},addDate:function(){var e=new Date,t={year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()},a=t.year;return a+="/"+(t.month>9?t.month:"0"+t.month),a+="/"+(t.date>9?t.date:"0"+t.date),console.log(a),this.systemDate=a,a}}},et={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","padding-top":"20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{ref:"queryorderForm",staticClass:"order-form-inline",staticStyle:{"text-align":"left"},attrs:{id:"order-list-form",inline:!0,model:e.info}},[a("el-form-item",{attrs:{label:"小程序类型",prop:"appletTypeId"}},[a("el-select",{staticClass:"order-input",attrs:{placeholder:"选择小程序类型"},model:{value:e.info.appletTypeId,callback:function(t){e.$set(e.info,"appletTypeId",t)},expression:"info.appletTypeId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.typeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.typeName,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"页面类型",prop:"pageLogo"}},[a("el-select",{staticClass:"order-input",attrs:{placeholder:"选择页面类型"},model:{value:e.info.pageLogo,callback:function(t){e.$set(e.info,"pageLogo",t)},expression:"info.pageLogo"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"load封面",value:"LOAD"}}),e._v(" "),a("el-option",{attrs:{label:"主页",value:"MAIN"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"推广类型",prop:"relationType"}},[a("el-select",{staticClass:"order-input",attrs:{placeholder:"选择推广类型"},model:{value:e.info.relationType,callback:function(t){e.$set(e.info,"relationType",t)},expression:"info.relationType"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"内部推广",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"外部推广",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联网址",prop:"relationWebsite"}},[a("el-input",{staticClass:"order-input",attrs:{placeholder:"输入关联网址",clearable:!0},model:{value:e.info.relationWebsite,callback:function(t){e.$set(e.info,"relationWebsite",t)},expression:"info.relationWebsite"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推广对象",prop:"relationName"}},[a("el-input",{staticClass:"order-input",attrs:{placeholder:"输入推广对象",clearable:!0},model:{value:e.info.relationName,callback:function(t){e.$set(e.info,"relationName",t)},expression:"info.relationName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推广状态",prop:"relationStatus"}},[a("el-select",{staticClass:"order-input",attrs:{placeholder:"请选择推广状态"},model:{value:e.info.relationStatus,callback:function(t){e.$set(e.info,"relationStatus",t)},expression:"info.relationStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"失效",value:"0"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.loadDetails(0,"")}}},[e._v("添加")])],1),e._v(" "),a("div",{staticStyle:{display:"none"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.info.page,callback:function(t){e.$set(e.info,"page",t)},expression:"info.page"}}),e._v(" "),a("el-input",{attrs:{type:"hidden"},model:{value:e.info.pageSize,callback:function(t){e.$set(e.info,"pageSize",t)},expression:"info.pageSize"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"orderNo",label:"订单号",width:"260"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"courierNo",label:"设备号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"appletName",label:"小程序",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userMobile",label:"用户账号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"couponAmount",label:"优惠金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("addZero")(t.row.couponAmount)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"freightAmount",label:"运费",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("addZero")(t.row.freightAmount)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"totalAmount",label:"订单总金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("addZero")(t.row.totalAmount)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"actualAmount",label:"实付金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("addZero")(t.row.actualAmount)))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"更新时间",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"orderStatus",label:"订单状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1===t.row.orderStatus?a("el-link",{attrs:{type:"info",underline:!1}},[e._v("订单失效")]):e._e(),e._v(" "),0===t.row.orderStatus?a("el-link",{attrs:{type:"primary",underline:!1}},[e._v("正在进行")]):e._e(),e._v(" "),1===t.row.orderStatus?a("el-link",{attrs:{type:"success",underline:!1}},[e._v("订单完成")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.loadDetails(t.row.id,t.row.relationName)}}},[e._v("详情\n          ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",height:"35px","padding-top":"10px","padding-right":"30px"}},[a("el-pagination",{attrs:{"current-page":e.info.page,"page-size":e.info.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.info,"page",t)},"update:current-page":function(t){return e.$set(e.info,"page",t)}}})],1),e._v(" "),a("el-dialog",{staticClass:"order-dialog",attrs:{title:e.showTitle,visible:e.showInfo,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.showInfo=t}}},[a("div",{staticStyle:{"overflow-x":"hidden","overflow-y":"auto"}},[a("orderDetails",{ref:"orderDetails",on:{loadInfo:e.loadInfo}})],1)])],1)],1)},staticRenderFns:[]};var tt={name:"tabs-content",components:{RoleList:I,ManagerList:A,ManagerDetails:M,AppletList:O,AppletManageList:X,AppletAuditFirstList:G,AppletAuditLastList:te,AppletTypeList:le,AppletFileList:Fe,AppletVersionList:Te,MenuList:ze,NoticeList:Ue,AdvertList:Xe,UserList:Qe,MerchantList:Ge,OrderList:a("VU/8")(Ke,et,!1,function(e){a("2Vkn")},null,null).exports},data:function(){return{tabHeight:""+(document.documentElement.clientHeight-85),tabPaneHeight:""+(document.documentElement.clientHeight-135),editableTabsValue:"2",editableTabs:[],tabIndex:0,parentMenuIndex:""}},created:function(){this.$cookies.set("tabPaneHeight",this.tabPaneHeight)},method:function(){},methods:{addTab:function(e,t){this.mainShow="none";for(var a=this.editableTabs,i=!0,o=0;o<a.length;o++)if(a[o].name===e){i=!1;break}i&&this.editableTabs.push({title:t,name:e}),this.editableTabsValue=e},clickTab:function(e){this.parentMenuIndex=e.$el.id.replace("pane-",""),this.setActiveIndex()},removeTab:function(e){var t=this.editableTabs,a=this.editableTabsValue;a===e&&t.forEach(function(i,o){if(i.name===e){var n=t[o+1]||t[o-1];n&&(a=n.name)}}),this.editableTabsValue=a,this.editableTabs=t.filter(function(t){return t.name!==e}),this.parentMenuIndex=1===t.length?"0":this.editableTabsValue,this.setActiveIndex()},updateInfo:function(){this.$emit("updateInfo")},setActiveIndex:function(){this.$emit("updateInfo",this.parentMenuIndex)}}},at={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{style:{height:e.tabHeight+"px"},attrs:{type:"border-card"},on:{"tab-click":e.clickTab,"tab-remove":e.removeTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,function(t){return a("el-tab-pane",{key:t.name,staticClass:"tab-div-content",style:{height:e.tabPaneHeight+"px","overflow-y":"scroll"},attrs:{label:t.title,name:t.name,closable:""}},["queryManagerRoleToPage"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("RoleList")],1):e._e(),e._v(" "),"queryManagerToPage"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("ManagerList")],1):e._e(),e._v(" "),"loadManagerInfo"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("ManagerDetails",{ref:"ManagerDetails",refInFor:!0,on:{updateInfo:e.updateInfo}})],1):e._e(),e._v(" "),"queryAppletToPage"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("AppletList")],1):e._e(),e._v(" "),"queryAppletManageToPage"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("AppletManageList")],1):e._e(),e._v(" "),"queryAppletAuditToFirstTrial"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("AppletAuditFirstList")],1):e._e(),e._v(" "),"queryAppletAuditToLastTrial"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("AppletAuditLastList")],1):e._e(),e._v(" "),"queryAppletTypePage"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("AppletTypeList")],1):e._e(),e._v(" "),"queryAppletFilePage"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("AppletFileList")],1):e._e(),e._v(" "),"queryAppletVersionPage"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("AppletVersionList")],1):e._e(),e._v(" "),"loadMenuList"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("MenuList")],1):e._e(),e._v(" "),"loadSystemNoticeByPage"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("NoticeList")],1):e._e(),e._v(" "),"loadAppletAdvertRelationByPage"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("AdvertList")],1):e._e(),e._v(" "),"queryUserToPage"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("UserList")],1):e._e(),e._v(" "),"queryMerchantToPage"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("MerchantList")],1):e._e(),e._v(" "),"queryOrderInfoByPage"===t.name?a("div",{staticClass:"tab-div-content-page"},[a("OrderList")],1):e._e()])}),1)},staticRenderFns:[]};var it={name:"main_info",components:{headerMenu:v,tabsContent:a("VU/8")(tt,at,!1,function(e){a("NTam")},null,null).exports},data:function(){return{bodyHeight:document.documentElement.clientHeight+"px",info:this.$cookies.get("manager_info"),activeIndex:"0",menuList:[],secondList:[]}},created:function(){var e=this,t=d.Loading.service({fullscreen:!0,text:"正在加载"});this.$axios({url:"/api/manage/checkLogin",method:"post"}).then(function(a){"1"===a.data.code?(e.menuList=a.data.data,e.$refs.headerMenu.loadFirstMenu(a.data.data),e.secondList=a.data.data[0].items):(e.$cookies.remove("manager_info"),e.$router.push({path:"/"})),e.$global.exitLoad(e,t,a.data)}).catch(function(a){console.info("错误信息",a),e.$global.exitLoad(e,t,"")})},mounted:function(){},methods:{updateInfo:function(e){e?this.activeIndex="0"===e?"0"===this.activeIndex?"":"0":e:this.$refs.headerMenu.updateInfo()},handleSelect:function(e,t){console.log(e,t);for(var a="",i=this.secondList,o=0;o<i.length;o++)for(var n=i[o].items,l=0;l<n.length;l++){var s=n[l];if(s.logo===e){a=s.title;break}}this.$refs.tabsContent.addTab(e,a)},handleSOpen:function(e,t){},handleClose:function(e,t){},upActiveIndex:function(e){this.secondList=this.menuList[e].items}}},ot={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{style:{height:e.bodyHeight}},[a("el-aside",{staticStyle:{"background-color":"rgb(84, 92, 100)"},attrs:{width:"200px"}},[a("div",{staticStyle:{width:"200px",height:"63px",display:"inline-block"}}),e._v(" "),a("el-menu",{staticStyle:{position:"relative",top:"-140px"},attrs:{"default-active":e.activeIndex,"background-color":"#545c64","text-color":"#fff","active-text-color":"#409EFF"},on:{select:e.handleSelect,open:e.handleSOpen,close:e.handleClose}},e._l(e.secondList,function(t){return a("el-submenu",{key:t.index,attrs:{index:t.index}},[a("template",{slot:"title"},[a("i",{class:t.icon}),e._v(e._s(t.title))]),e._v(" "),a("el-menu-item-group",e._l(t.items,function(t){return a("el-menu-item",{key:t.index,attrs:{index:t.logo}},[e._v(e._s(t.title))])}),1)],2)}),1)],1),e._v(" "),a("el-container",[a("el-header",{staticStyle:{"background-color":"#545c64","text-align":"right"}},[a("headerMenu",{ref:"headerMenu",on:{upActiveIndex:e.upActiveIndex}})],1),e._v(" "),a("el-main",{staticStyle:{"background-color":"#DCDFE6"}},[a("tabsContent",{ref:"tabsContent",on:{updateInfo:e.updateInfo}})],1)],1)],1)},staticRenderFns:[]};var nt=a("VU/8")(it,ot,!1,function(e){a("T3Nv")},null,null).exports,lt={name:"page-part-choose",data:function(){return{loadIf:!0,id:null,name:"",icon:"",minPrice:0,maxPrice:0,discount:100,chooseIndex:null,goodsList:[],typeList:[],bType:null,dataName:""}},created:function(){this.loadList(this.$cookies.get("bType"))},mounted:function(){},methods:{loadList:function(e){this.bType=e,this.chooseIndex=null,this.goodsList=[],this.typeList=[],null!=e&&this.loadInfoList(e,"")},selectList:function(){this.loadInfoList(this.bType,this.dataName)},loadInfoList:function(e,t){var a=this,i=d.Loading.service({fullscreen:!0,text:"正在加载"}),o="";switch(parseInt(e)){case 1:o="queryGoodsInfoList";break;case 2:o="queryGoodsTypeList";break;case 3:o="queryGoodsDetailsList";break;case 4:o="queryGoodsDiscountList"}this.$axios({url:"/api/manage/applet/page/"+o,method:"post",data:{name:t}}).then(function(e){"1"===e.data.code?(a.goodsList=e.data.data.goodsList,a.typeList=e.data.data.typeList):a.$message.message("未找到相关信息"),a.$cookies.remove("bType"),a.$global.exitLoad(a,i,e.data)}).catch(function(e){console.info("错误信息",e),a.$global.exitLoad(a,i,"")})},chooseInfo:function(e,t,a,i){this.id=e,this.name=t,this.icon=a,this.chooseIndex=i},chooseDetails:function(e,t,a,i,o,n,l){this.id=e,this.name=t,this.icon=a,this.minPrice=i,this.maxPrice=o,this.discount=n,this.chooseIndex=l},confirmInfo:function(){this.$emit("refreshSet",this.id,this.name,this.icon,this.minPrice,this.maxPrice,this.discount,this.bType)},refreshSet:function(){}}},st={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("dic",[a("el-form",{staticClass:"demo-form-inline page-part-form",staticStyle:{"text-align":"left"},attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.dataName,callback:function(t){e.dataName=t},expression:"dataName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.selectList}},[e._v("查询")])],1)],1)],1),e._v(" "),1===parseInt(e.bType)?a("div",{staticClass:"part-list"},e._l(e.typeList,function(t,i){return a("div",{key:i},[a("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(t.name))]),e._v(" "),e._l(e.goodsList,function(i,o){return t.id===i.typeId?a("div",{key:o,staticStyle:{display:"inline-block"}},[o===e.chooseIndex?a("el-image",{staticClass:"part-info-select",attrs:{src:"/static/images/icon/select-1.png"}}):e._e(),e._v(" "),o!=e.chooseIndex?a("div",{staticStyle:{height:"24px"}}):e._e(),e._v(" "),a("div",{staticClass:"part-info",style:o===e.chooseIndex?{border:"1px #67C23A solid","webkit-box-shadow":"8px 8px 6px #67C23A","box-shadow":"8px 8px 6px #67C23A"}:"",on:{click:function(t){return e.chooseInfo(i.id,i.name,i.icon,o)}}},[a("div",{staticClass:"part-info-img"},[a("el-image",{staticStyle:{width:"90px",height:"90px","border-radius":"5px"},attrs:{src:i.icon}})],1),e._v(" "),a("div",{staticClass:"part-info-name"},[e._v(e._s(i.name))])])],1):e._e()})],2)}),0):2===parseInt(e.bType)?a("div",{staticClass:"part-list"},[a("div",e._l(e.typeList,function(t,i){return a("div",{key:i,staticStyle:{display:"inline-block"}},[i===e.chooseIndex?a("el-image",{staticClass:"part-info-select",attrs:{src:"/static/images/icon/select-1.png"}}):e._e(),e._v(" "),i!=e.chooseIndex?a("div",{staticStyle:{height:"24px"}}):e._e(),e._v(" "),a("div",{staticClass:"part-info",style:i===e.chooseIndex?{border:"1px #67C23A solid"}:"",on:{click:function(a){return e.chooseInfo(t.id,t.name,t.icon,i)}}},[a("div",{staticClass:"part-info-img"},[a("el-image",{staticStyle:{width:"90px",height:"90px","border-radius":"5px"},attrs:{src:t.icon}})],1),e._v(" "),a("div",{staticClass:"part-info-name"},[e._v(e._s(t.name))])])],1)}),0)]):3===parseInt(e.bType)?a("div",{staticClass:"part-list"},e._l(e.typeList,function(t,i){return a("div",{key:i},[a("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(t.name))]),e._v(" "),e._l(e.goodsList,function(i,o){return t.id===i.typeId?a("div",{key:o,staticStyle:{display:"inline-block"}},[o===e.chooseIndex?a("el-image",{staticClass:"part-info-select",attrs:{src:"/static/images/icon/select-1.png"}}):e._e(),e._v(" "),o!=e.chooseIndex?a("div",{staticStyle:{height:"24px"}}):e._e(),e._v(" "),a("div",{staticClass:"part-info",style:o===e.chooseIndex?{border:"1px #67C23A solid"}:"",on:{click:function(t){return e.chooseDetails(i.id,i.name,i.icon,i.minPrice,i.maxPrice,i.discount,o)}}},[a("div",{staticClass:"part-info-img"},[a("el-image",{staticStyle:{width:"90px",height:"90px","border-radius":"5px"},attrs:{src:i.icon}})],1),e._v(" "),a("div",{staticClass:"part-info-name"},[e._v(e._s(i.name))])])],1):e._e()})],2)}),0):4===parseInt(e.bType)?a("div",{staticClass:"part-list"},[a("div",e._l(e.goodsList,function(t,i){return a("div",{key:i,staticStyle:{display:"inline-block"}},[i===e.chooseIndex?a("el-image",{staticClass:"part-info-select",attrs:{src:"/static/images/icon/select-1.png"}}):e._e(),e._v(" "),i!=e.chooseIndex?a("div",{staticStyle:{height:"24px"}}):e._e(),e._v(" "),a("div",{staticClass:"part-info",style:i===e.chooseIndex?{border:"1px #67C23A solid"}:"",on:{click:function(a){return e.chooseDetails(t.id,t.name,t.icon,t.minPrice,t.maxPrice,t.discount,i)}}},[a("div",{staticClass:"part-info-img"},[a("el-image",{staticStyle:{width:"90px",height:"90px","border-radius":"5px"},attrs:{src:t.icon}})],1),e._v(" "),a("div",{staticClass:"part-info-name"},[e._v(e._s(t.name))])])],1)}),0)]):a("div",{staticClass:"part-info"}),e._v(" "),a("div",{staticStyle:{"text-align":"right",padding:"10px 50px 10px 10px"}},[null==e.chooseIndex?a("el-button",{attrs:{type:"info"}},[e._v("确定")]):a("el-button",{attrs:{type:"success"},on:{click:e.confirmInfo}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var rt={name:"store-main-part",components:{StoreChoose:a("VU/8")(lt,st,!1,function(e){a("q+31")},null,null).exports},data:function(){return{loading:!1,partIndex:0,partList:[],goodsSearchRules:{elementLogo:[{required:!0,message:"请输入元素标识",trigger:"blur"},{file:"string",min:1,max:30,message:"元素标识长度为1-30个字符",trigger:"blur"}]},listTitle:"",listShow:!1}},created:function(){this.loadPart()},mounted:function(){},methods:{loadPart:function(){this.partIndex=parseInt(this.$cookies.get("store_main_part_index")),this.partList=this.$part.getPartList()},handleAvatarSuccess:function(e,t){if("1"===e.code){var a=e.data.pIndex,i=e.data.index,o=e.data.icon,n=this.partList[a].list;if(null!=i&&i>=0)n[i].icon=o;else{var l={goodsId:"",goodsIcon:"",icon:o};n.push(l)}this.$emit("refreshSet",!0,a)}else this.$message.error("上传失败");var s=d.Loading.service({fullscreen:!0,text:"正在上传"});this.$global.exitLoad(this,s,{code:e.data})},beforeAvatarUpload:function(e){var t=d.Loading.service({fullscreen:!0,text:"正在上传"}),a="image/png,image/jpeg,image/jpg".indexOf(e.type)>=0,i=e.size/1024/1024<3;return a||this.$message.error("上传图片只能是 JPG 格式!"),i||this.$message.error("上传图片大小不能超过 3MB!"),a&&i||t.close(),a&&i},delData:function(e,t){var a=this;this.$confirm("确定删除参数吗？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var i=[],o=0;o<a.partList.length;o++){var n=a.partList[o];if(o===a.partIndex){for(var l=[],s=0;s<n.list.length;s++)s!=e&&l.push(n.list[s]);n.list=l}i.push(n)}a.partList=i,a.useElement(i,!0,a.partIndex),a.$axios({url:"/api/manage/applet/page/deleteAppletPageImage",method:"post",data:{icon:t}})})},delElement:function(){var e=this;this.$confirm("确定删除元素吗？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=[],a=0;a<e.partList.length;a++)a!=e.partIndex&&t.push(e.partList[a]);e.partIndex=null,e.useElement(t,!1,e.partIndex)})},moveIndex:function(e){if(e<0&&this.partIndex>0||e>0&&this.partIndex<this.partList.length-1){for(var t=[],a=this.partList[this.partIndex],i=this.partList[e+this.partIndex],o=0;o<this.partList.length;o++){var n={};n=this.partIndex===o?i:e+this.partIndex===o?a:this.partList[o],t.push(n)}this.partIndex=this.partIndex+e,this.useElement(t,!0,this.partIndex)}else this.$message.warning("不能再移动啦")},useElement:function(e,t,a){this.partList=e,this.$part.setPartList(this.partList),this.$emit("refreshSet",t,a)},loadPartChoose:function(e,t,a){this.listTitle=1===a?"商品列表":"商品分类列表",this.listShow=!0,this.$cookies.set("pIndex",e),this.$cookies.set("sIndex",t),this.$cookies.set("bType",a);try{this.$refs.StoreChoose.loadList(a)}catch(e){}},refreshSet:function(e,t,a,i,o,n,l){this.listShow=!1;var s=this.$cookies.get("pIndex"),r=this.$cookies.get("sIndex"),c=this.partList[s].list;if(1===parseInt(l))c[r].goodsId=e,c[r].goodsIcon=a;else if(2===parseInt(l))if("null"===r){var d={typeId:e,name:t,icon:a};c.push(d)}else c[r]={typeId:e,name:t,icon:a};else if(3===parseInt(l)||4===parseInt(l))if("null"===r){var p={goodsId:e,name:t,minPrice:i,maxPrice:o,discount:n,goodsIcon:a};c.push(p)}else c[r]={goodsId:e,name:t,minPrice:i,maxPrice:o,discount:n,goodsIcon:a};this.$emit("refreshSet",!0,s),this.$cookies.remove("pIndex"),this.$cookies.remove("sIndex")}}},ct={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF",padding:"0px 20px"},attrs:{"element-loading-text":"加载中"}},[a("el-form",{staticClass:"store-main-part-form"},[e._l(e.partList,function(t,i){return a("div",{key:i,staticClass:"store-main-part"},[e.partIndex===i&&"notice-bar"===t.id?a("div",[a("el-form-item",{attrs:{label:"通知内容",prop:"elementLogo"}},[a("el-input",{staticClass:"part-input",attrs:{type:"textarea","show-word-limit":!0,maxlength:"60",resize:"none",rows:"5",placeholder:"请输入通知内容"},model:{value:t.describe,callback:function(a){e.$set(t,"describe",a)},expression:"item.describe"}})],1)],1):e._e(),e._v(" "),e.partIndex===i&&"img-carousel"===t.id?a("div",[a("table",{staticStyle:{width:"400px"}},[e._l(t.list,function(t,o){return a("tr",{key:o},[a("td",{staticStyle:{width:"20px"}},[a("el-badge",{staticClass:"item img-carousel-badge",attrs:{value:"×"},nativeOn:{click:function(a){return e.delData(o,t.icon)}}})],1),e._v(" "),a("td",[a("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:""}},[a("el-upload",{staticClass:"img-carousel-uploader",attrs:{action:"/api/manage/applet/page/uploadAppletPageImage",name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,data:{pIndex:i,index:o,icon:t.icon}}},[t.icon?a("img",{staticClass:"img-carousel",staticStyle:{width:"244px",height:"95px"},attrs:{src:t.icon}}):a("i",{staticClass:"el-icon-plus img-carousel-uploader-icon"})])],1)],1),e._v(" "),a("td",{staticClass:"bind-goods"},[""!=t.goodsId?a("el-image",{staticClass:"goods-img",staticStyle:{"border-radius":"5px"},attrs:{src:t.goodsIcon},on:{click:function(t){return e.loadPartChoose(i,o,1)}}}):e._e(),e._v(" "),""===t.goodsId?a("div",{staticClass:"add-goods",on:{click:function(t){return e.loadPartChoose(i,o,1)}}},[a("el-image",{staticClass:"goods-icon",attrs:{src:"/static/images/icon/add.png"}}),e._v(" "),a("div",{staticClass:"goods-text"},[e._v("绑定商品")])],1):e._e()],1)])}),e._v(" "),t.list.length<5?a("tr",[a("td"),e._v(" "),a("td",[a("el-form-item",{attrs:{label:" "}},[a("el-upload",{staticClass:"img-carousel-uploader",attrs:{action:"/api/manage/applet/page/uploadAppletPageImage",name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,data:{pIndex:i}}},[a("i",{staticClass:"el-icon-plus img-carousel-uploader-icon"})])],1)],1),e._v(" "),a("td")]):e._e()],2)]):e._e(),e._v(" "),e.partIndex===i&&"type-frame-three"===t.id?a("div",[a("el-form-item",{staticStyle:{"margin-bottom":"0px",width:"375px"},attrs:{label:" "}},[e._l(t.list,function(t,o){return a("div",{key:o,staticClass:"type-three-element"},[a("div",{on:{click:function(t){return e.loadPartChoose(i,o,2)}}},[a("div",{staticClass:"type-icon-div"},[a("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:t.icon}})],1),e._v(" "),a("span",{staticClass:"type-name"},[e._v(e._s(t.name))])]),e._v(" "),a("el-badge",{staticClass:"item type-frame-three-badge",attrs:{value:"×"},nativeOn:{click:function(t){return e.delData(o)}}})],1)}),e._v(" "),t.list.length<12?a("div",{staticClass:"type-three-element",on:{click:function(t){return e.loadPartChoose(i,null,2)}}},[a("div",[a("div",{staticClass:"type-icon-div"},[a("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:"/static/images/icon/add.png"}})],1),e._v(" "),a("span",{staticClass:"type-name",staticStyle:{color:"#cdcdcd"}},[e._v("添加")])])]):e._e()],2)],1):e._e(),e._v(" "),e.partIndex===i&&"type-frame-four"===t.id?a("div",[a("el-form-item",{staticStyle:{"margin-bottom":"0px",width:"375px"},attrs:{label:" "}},[e._l(t.list,function(t,o){return a("div",{key:o,staticClass:"type-four-element"},[a("div",{on:{click:function(t){return e.loadPartChoose(i,o,2)}}},[a("div",{staticClass:"type-icon-div"},[a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.icon}})],1),e._v(" "),a("span",{staticClass:"type-name"},[e._v(e._s(t.name))])]),e._v(" "),a("el-badge",{staticClass:"item type-frame-four-badge",attrs:{value:"×"},nativeOn:{click:function(t){return e.delData(o)}}})],1)}),e._v(" "),t.list.length<12?a("div",{staticClass:"type-four-element",on:{click:function(t){return e.loadPartChoose(i,null,2)}}},[a("div",[a("div",{staticClass:"type-icon-div"},[a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:"/static/images/icon/add.png"}})],1),e._v(" "),a("span",{staticClass:"type-name",staticStyle:{color:"#cdcdcd"}},[e._v("添加")])])]):e._e()],2)],1):e._e(),e._v(" "),e.partIndex===i&&"img-text-title"===t.id?a("div",[a("el-form-item",{attrs:{label:"图标"}},[a("el-upload",{staticClass:"img-text-title-uploader",attrs:{action:"/api/manage/applet/page/uploadAppletPageImage",name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,data:{pIndex:i,index:0,icon:t.list[0].icon}}},[t.list[0].icon?a("img",{staticClass:"img-text-title",attrs:{src:t.list[0].icon}}):a("i",{staticClass:"el-icon-plus img-text-title-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{staticClass:"part-input",attrs:{maxlength:"10",placeholder:"请输入图文标题"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"describe"}},[a("el-input",{staticClass:"part-input",attrs:{maxlength:"10",placeholder:"请输入图文标题"},model:{value:t.describe,callback:function(a){e.$set(t,"describe",a)},expression:"item.describe"}})],1)],1):e._e(),e._v(" "),e.partIndex===i&&"img-title"===t.id?a("div",[a("table",{staticStyle:{width:"400px"}},[""!=t.icon?a("tr",[a("td",{staticStyle:{width:"20px"}},[a("el-badge",{staticClass:"item img-carousel-badge",attrs:{value:"×"},nativeOn:{click:function(t){return e.delData(e.index)}}})],1),e._v(" "),a("td",[a("el-form-item",{attrs:{label:""}},[a("el-upload",{staticClass:"img-carousel-uploader",attrs:{action:"/api/manage/applet/page/uploadAppletPageImage",name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,data:{pIndex:i,index:0,icon:t.list[0].icon}}},[t.list[0].icon?a("img",{staticClass:"img-carousel",staticStyle:{width:"244px",height:"95px"},attrs:{src:t.list[0].icon}}):a("i",{staticClass:"el-icon-plus img-carousel-uploader-icon"})])],1)],1),e._v(" "),a("td",{staticClass:"bind-goods"},[""!=t.list[0].goodsId?a("el-image",{staticClass:"goods-img",staticStyle:{position:"relative",top:"-10px","border-radius":"5px"},attrs:{src:t.list[0].goodsIcon},on:{click:function(t){return e.loadPartChoose(i,0,1)}}}):e._e(),e._v(" "),""===t.list[0].goodsId?a("div",{staticClass:"add-goods",staticStyle:{top:"-13px"},on:{click:function(t){return e.loadPartChoose(i,0,1)}}},[a("el-image",{staticClass:"goods-icon",attrs:{src:"/static/images/icon/add.png"}}),e._v(" "),a("div",{staticClass:"goods-text"},[e._v("绑定商品")])],1):e._e()],1)]):e._e(),e._v(" "),""===t.icon?a("tr",[a("td",[a("el-form-item",{attrs:{label:" "}},[a("el-upload",{staticClass:"img-title-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"data-id":""}},[e.imageUrl?a("img",{staticClass:"img-title",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus img-title-icon"})])],1)],1),e._v(" "),a("td")]):e._e()])]):e._e(),e._v(" "),e.partIndex===i&&"divider-title"===t.id?a("div",[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{staticClass:"part-input",attrs:{maxlength:"12",placeholder:"请输入标题"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}})],1)],1):e._e(),e._v(" "),e.partIndex===i&&"goods-two-row"===t.id?a("div",[a("el-form-item",{staticStyle:{"margin-bottom":"0px",width:"375px"},attrs:{label:" "}},[e._l(t.list,function(t,o){return a("div",{key:o,staticClass:"goods-two-element"},[a("div",{on:{click:function(t){return e.loadPartChoose(i,o,3)}}},[a("div",{staticClass:"goods-icon-div"},[a("el-image",{staticStyle:{width:"140px",height:"140px"},attrs:{src:t.goodsIcon}})],1),e._v(" "),a("div",{staticClass:"goods-name"},[e._v(e._s(t.name))])]),e._v(" "),a("el-badge",{staticClass:"item goods-two-badge",attrs:{value:"×"},nativeOn:{click:function(t){return e.delData(o)}}})],1)}),e._v(" "),t.list.length<10?a("div",{staticClass:"goods-two-element"},[a("div",{on:{click:function(t){return e.loadPartChoose(i,null,3)}}},[a("div",{staticClass:"goods-icon-div",staticStyle:{width:"140px",height:"140px","line-height":"140px",margin:"auto"}},[a("el-image",{staticStyle:{width:"40px",height:"40px",margin:"auto","padding-top":"50px"},attrs:{src:"/static/images/icon/add.png"}})],1),e._v(" "),a("span",{staticClass:"goods-name",staticStyle:{color:"#cdcdcd","text-align":"center"}},[e._v("添加商品")])])]):e._e()],2)],1):e._e(),e._v(" "),e.partIndex===i&&"goods-three-row"===t.id?a("div",[a("el-form-item",{staticStyle:{"margin-bottom":"0px",width:"375px"},attrs:{label:" "}},[e._l(t.list,function(t,o){return a("div",{key:o,staticClass:"goods-three-element"},[a("div",{on:{click:function(t){return e.loadPartChoose(i,o,3)}}},[a("div",{staticClass:"goods-icon-div"},[a("el-image",{staticStyle:{width:"95px",height:"95px"},attrs:{src:t.goodsIcon}})],1),e._v(" "),a("div",{staticClass:"goods-name"},[e._v(e._s(t.name))])]),e._v(" "),a("el-badge",{staticClass:"item goods-three-badge",attrs:{value:"×"},nativeOn:{click:function(t){return e.delData(o)}}})],1)}),e._v(" "),t.list.length<12?a("div",{staticClass:"goods-three-element"},[a("div",{on:{click:function(t){return e.loadPartChoose(i,null,3)}}},[a("div",{staticClass:"goods-icon-div",staticStyle:{width:"95px",height:"95px","line-height":"95px",margin:"auto"}},[a("el-image",{staticStyle:{width:"40px",height:"40px",margin:"auto","padding-top":"30px"},attrs:{src:"/static/images/icon/add.png"}})],1),e._v(" "),a("span",{staticClass:"goods-name",staticStyle:{color:"#cdcdcd","text-align":"center"}},[e._v("添加商品")])])]):e._e()],2)],1):e._e(),e._v(" "),e.partIndex===i&&"imgX-scroll"===t.id?a("div",[a("table",{staticStyle:{width:"400px"}},[e._l(t.list,function(t,o){return a("tr",{key:o},[a("td",{staticStyle:{width:"20px"}},[a("el-badge",{staticClass:"item img-carousel-badge",attrs:{value:"×"},nativeOn:{click:function(a){return e.delData(o,t.icon)}}})],1),e._v(" "),a("td",[a("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:""}},[a("el-upload",{staticClass:"img-carousel-uploader",attrs:{action:"/api/manage/applet/page/uploadAppletPageImage",name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,data:{pIndex:i,index:o,icon:t.icon}}},[t.icon?a("img",{staticClass:"img-carousel",staticStyle:{width:"244px",height:"95px","border-radius":"5px"},attrs:{src:t.icon}}):a("i",{staticClass:"el-icon-plus img-carousel-uploader-icon"})])],1)],1),e._v(" "),a("td",{staticClass:"bind-goods"},[""!=t.goodsId?a("el-image",{staticClass:"goods-img",staticStyle:{"border-radius":"5px"},attrs:{src:t.goodsIcon},on:{click:function(t){return e.loadPartChoose(i,o,1)}}}):e._e(),e._v(" "),""===t.goodsId?a("div",{staticClass:"add-goods",on:{click:function(t){return e.loadPartChoose(i,o,1)}}},[a("el-image",{staticClass:"goods-icon",attrs:{src:"/static/images/icon/add.png"}}),e._v(" "),a("div",{staticClass:"goods-text"},[e._v("绑定商品")])],1):e._e()],1)])}),e._v(" "),t.list.length<10?a("tr",[a("td"),e._v(" "),a("td",[a("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:" "}},[a("el-upload",{staticClass:"imgX-scroll-uploader",attrs:{action:"/api/manage/applet/page/uploadAppletPageImage",name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,data:{pIndex:i}}},[a("i",{staticClass:"el-icon-plus imgX-scroll-uploader-icon"})])],1)],1),e._v(" "),a("td")]):e._e()],2)]):e._e(),e._v(" "),e.partIndex===i&&"imgY-scroll"===t.id?a("div",[a("table",{staticStyle:{width:"400px"}},[e._l(t.list,function(t,o){return a("tr",{key:o,staticStyle:{width:"375px"}},[a("td",{staticStyle:{width:"20px"}},[a("el-badge",{staticClass:"item img-carousel-badge",attrs:{value:"×"},nativeOn:{click:function(a){return e.delData(o,t.icon)}}})],1),e._v(" "),a("td",{staticStyle:{width:"130px"}},[a("el-form-item",{staticStyle:{"margin-bottom":"0px","text-align":"center"},attrs:{label:""}},[a("el-upload",{staticClass:"img-carousel-uploader",attrs:{action:"/api/manage/applet/page/uploadAppletPageImage",name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,data:{pIndex:i,index:o,icon:t.icon}}},[t.icon?a("img",{staticClass:"img-carousel",staticStyle:{width:"120px",height:"220px","border-radius":"5px"},attrs:{src:t.icon}}):a("i",{staticClass:"el-icon-plus img-carousel-uploader-icon"})])],1)],1),e._v(" "),a("td",{staticClass:"bind-goods"},[""!=t.goodsId?a("el-image",{staticClass:"goods-img",staticStyle:{"border-radius":"5px"},attrs:{src:t.goodsIcon},on:{click:function(t){return e.loadPartChoose(i,o,1)}}}):e._e(),e._v(" "),""===t.goodsId?a("div",{staticClass:"add-goods",on:{click:function(t){return e.loadPartChoose(i,o,1)}}},[a("el-image",{staticClass:"goods-icon",attrs:{src:"/static/images/icon/add.png"}}),e._v(" "),a("div",{staticClass:"goods-text"},[e._v("绑定商品")])],1):e._e()],1)])}),e._v(" "),t.list.length<10?a("tr",[a("td"),e._v(" "),a("td",[a("el-form-item",{staticStyle:{"margin-bottom":"0px","text-align":"center"},attrs:{label:""}},[a("el-upload",{staticClass:"imgY-scroll-uploader",attrs:{action:"/api/manage/applet/page/uploadAppletPageImage",name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,data:{pIndex:i}}},[a("i",{staticClass:"el-icon-plus imgY-scroll-uploader-icon"})])],1)],1),e._v(" "),a("td")]):e._e()],2)]):e._e(),e._v(" "),e.partIndex===i&&"goodsY-scroll"===t.id?a("div",[a("el-form-item",{staticStyle:{"margin-bottom":"0px",width:"375px"},attrs:{label:" "}},[e._l(t.list,function(t,o){return a("div",{key:o,staticClass:"goods-two-element"},[a("div",{on:{click:function(t){return e.loadPartChoose(i,o,3)}}},[a("div",{staticClass:"goods-icon-div"},[a("el-image",{staticStyle:{width:"140px",height:"140px","border-radius":"10px 10px 0px 0px"},attrs:{src:t.goodsIcon}})],1),e._v(" "),a("div",{staticClass:"goods-name"},[e._v(e._s(t.name))])]),e._v(" "),a("el-badge",{staticClass:"item goods-two-badge",attrs:{value:"×"},nativeOn:{click:function(t){return e.delData(o)}}})],1)}),e._v(" "),t.list.length<10?a("div",{staticClass:"goods-two-element"},[a("div",{on:{click:function(t){return e.loadPartChoose(i,null,3)}}},[a("div",{staticClass:"goods-icon-div",staticStyle:{width:"140px",height:"140px","line-height":"140px",margin:"auto"}},[a("el-image",{staticStyle:{width:"40px",height:"40px",margin:"auto","padding-top":"50px"},attrs:{src:"/static/images/icon/add.png"}})],1),e._v(" "),a("span",{staticClass:"goods-name",staticStyle:{color:"#cdcdcd","text-align":"center"}},[e._v("添加商品")])])]):e._e()],2)],1):e._e(),e._v(" "),e.partIndex===i&&"goodsX-scroll"===t.id?a("div",[a("el-form-item",{staticStyle:{"margin-bottom":"0px",width:"375px"},attrs:{label:" "}},[e._l(t.list,function(t,o){return a("div",{key:o,staticClass:"goods-two-element"},[a("div",{on:{click:function(t){return e.loadPartChoose(i,o,4)}}},[a("div",{staticClass:"goods-icon-div"},[a("el-image",{staticStyle:{width:"140px",height:"140px","border-radius":"5px"},attrs:{src:t.goodsIcon}})],1),e._v(" "),a("div",{staticClass:"goods-name"},[e._v(e._s(t.name))])]),e._v(" "),a("el-badge",{staticClass:"item goods-two-badge",attrs:{value:"×"},nativeOn:{click:function(t){return e.delData(o)}}})],1)}),e._v(" "),t.list.length<10?a("div",{staticClass:"goods-two-element"},[a("div",{on:{click:function(t){return e.loadPartChoose(i,null,4)}}},[a("div",{staticClass:"goods-icon-div",staticStyle:{width:"140px",height:"140px","line-height":"140px",margin:"auto"}},[a("el-image",{staticStyle:{width:"40px",height:"40px",margin:"auto"},attrs:{src:"/static/images/icon/add.png"}})],1),e._v(" "),a("span",{staticClass:"goods-name",staticStyle:{color:"#cdcdcd","text-align":"center"}},[e._v("添加商品")])])]):e._e()],2)],1):e._e()])}),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:" "}},[a("div",{staticClass:"part-operation"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("操作元素")]),e._v(" "),a("el-button",{staticClass:"part-button",attrs:{type:"danger"},on:{click:function(t){return e.delElement()}}},[a("i",{staticClass:"el-icon-close"}),e._v(" 删除\n          ")])],1),e._v(" "),a("div",{staticClass:"part-operation"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("移动元素")]),e._v(" "),a("el-button",{staticClass:"part-button",attrs:{type:"success"},on:{click:function(t){return e.moveIndex(-1)}}},[a("i",{staticClass:"el-icon-caret-top"}),e._v(" 上移\n          ")]),e._v(" "),a("el-button",{staticClass:"part-button",attrs:{type:"success"},on:{click:function(t){return e.moveIndex(1)}}},[a("i",{staticClass:"el-icon-caret-bottom"}),e._v(" 下移\n          ")])],1)])],2),e._v(" "),a("el-dialog",{staticClass:"part-choose-dialog",attrs:{title:e.listTitle,visible:e.listShow,"modal-append-to-body":!1,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.listShow=t}}},[a("StoreChoose",{ref:"StoreChoose",on:{refreshSet:e.refreshSet}})],1)],1)],1)},staticRenderFns:[]};var dt={name:"applet-element",components:{StoreMainPart:a("VU/8")(rt,ct,!1,function(e){a("se6H")},null,null).exports},data:function(){return{contentHeight:""+(document.documentElement.scrollHeight-150),contentWidth:""+document.documentElement.scrollWidth,loading:!1,typeList:[],partList:[],checkIndex:null,coverWidth:0,imgXScrollStyle:{},imgYScrollStyle:{},goodsYScrollStyle:{},goodsXScrollStyle:{},moveCoverStyle:{width:document.documentElement.scrollWidth+"px",height:"30px",position:"relative",left:0-(""+(document.documentElement.scrollWidth-395)/2)+"px",top:"-30px","text-align":"left"},cover_1:{width:(document.documentElement.scrollWidth-385)/2-16+"px",height:"30px",display:"inline-block","background-color":"#FFFFFF"},cover_2:{width:"377px",height:"30px",display:"inline-block","margin-left":"5px","margin-right":"7px"},drawer:!1,drawerTitle:"",drawerstyle:{}}},created:function(){var e=this.$cookies.get("default_page_id");this.loadAppletElement(e);var t=document.getElementById("app").offsetHeight;this.drawerstyle={overflow:"scroll",height:t-50+"px"}},mounted:function(){},methods:{loadAppletElement:function(e){var t=this;if(e){this.pageId=e;var a=d.Loading.service({fullscreen:!0,text:"正在加载"});this.$axios({url:"/api/manage/applet/page/loadPageElement",method:"post",data:{pageId:e}}).then(function(e){if(t.typeList=e.data.data.typeList,"1"===e.data.code){var i=e.data.data.contentJson;t.partList=JSON.parse(i),t.$part.setPartList(t.partList),t.$part._initStoreScroll(t)}else t.partList=t.$part.getStoreList();t.$global.exitLoad(t,a,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,a,"")})}},preserveConfig:function(){var e=this,t=w()(this.partList),a=d.Loading.service({fullscreen:!0,text:"正在加载"});this.$axios({url:"/api/manage/applet/page/savePageContent",method:"post",data:{pageId:this.pageId,json:t}}).then(function(t){"1"===t.data.code?e.$message.success({message:t.data.data,duration:1e3}):e.$message.error(t.data.data),e.$global.exitLoad(e,a,t.data)}).catch(function(t){console.info("错误信息",t),e.$global.exitLoad(e,a,"")})},cancelConfig:function(){this.$confirm("确定取消当前修改的配置吗？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.close()})},addPartList:function(e){var t=this;this.$cookies.set("part_info",this.$part.getStorePart(e));var a=this.$cookies.get("part_info");if(a){for(var i=this.partList,o=!0,n=0;n<i.length;n++)if(a.id===i[n].id){"imgX-scroll,imgY-scroll,goodsY-scroll,goodsX-scroll".indexOf(a.id)>=0&&(o=!1,this.$message.warning("相同滑块只能被添加一次哦"));break}o&&(i.push(a),this.$message.success("添加元素成功"),this.$nextTick(function(){for(var e=0,a=0;a<t.partList.length;a++){e+=document.querySelector("."+t.partList[a].id).offsetHeight}t.$refs.centerContent.scrollTop=e}))}else this.$message.warning("元素不存在")},openDrawer:function(e){this.checkIndex=e;var t=this.partList[e];this.$part.setPartList(this.partList),this.$cookies.set("store_main_part_index",e),this.drawer=!0,this.drawerTitle=t.name;try{this.$refs.StoreMainPart.loadPart()}catch(e){}},handleClose:function(e){e(),this.checkIndex=null,this.partList=this.$part.getPartList()},refreshSet:function(e,t){this.partList=this.$part.getPartList(),this.drawer=e,this.checkIndex=t,this.$part._initStoreScroll(this)}}},pt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"left"}},[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"background-color":"#FFFFFF","scrollbar-width":"none"},attrs:{"element-loading-text":"加载中"}},[a("div",{staticClass:"config-operation"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.preserveConfig()}}},[a("i",{staticClass:"el-icon-folder-checked"}),e._v(" 保存配置")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.cancelConfig()}}},[a("i",{staticClass:"el-icon-folder-delete"}),e._v(" 取消配置")])],1),e._v(" "),a("div",{staticClass:"left-menu",style:{height:e.contentHeight-100+"px"}},e._l(e.typeList,function(t,i){return a("div",{key:i},[a("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(t.name))]),e._v(" "),e._l(t.list,function(t,i){return a("div",{key:i,staticClass:"style-choose"},[a("div",{staticClass:"box",on:{click:function(a){return e.addPartList(t.logo)}}},[a("div",{staticClass:"wrap"},[e._v(e._s(t.name))])])])})],2)}),0),e._v(" "),a("div",{staticClass:"center-menu",style:{height:e.contentHeight+"px"}},[a("el-image",{staticClass:"center-img",attrs:{src:"/static/images/timg.jpg"}}),e._v(" "),a("div",{ref:"centerContent",staticClass:"center-content",staticStyle:{"scrollbar-width":"none"}},e._l(e.partList,function(t,i){return a("div",{key:i,staticClass:"components",style:{border:e.checkIndex===i?"1px #FF00FF dashed":"none"}},["goods-search"===t.id?a("div",{staticClass:"goods-search",on:{click:function(t){return e.openDrawer(i)}}},[a("div",{staticClass:"search-part"},[a("i",{staticClass:"el-icon-search"}),e._v("搜索商品\n            ")])]):e._e(),e._v(" "),"img-carousel"===t.id?a("div",{staticClass:"img-carousel",on:{click:function(t){return e.openDrawer(i)}}},[a("el-carousel",{attrs:{interval:3e3,arrow:"never",height:"150px"}},e._l(t.list,function(e,t){return a("el-carousel-item",{key:t},[a("el-image",{staticClass:"image",attrs:{src:e.icon}})],1)}),1)],1):e._e(),e._v(" "),"notice-bar"===t.id?a("div",{staticClass:"notice-bar",on:{click:function(t){return e.openDrawer(i)}}},[a("div",{staticClass:"text-content"},[e._v(e._s(t.describe))]),e._v(" "),a("div",{style:e.moveCoverStyle},[a("div",{staticClass:"cover-left",style:e.cover_1},[a("div")]),e._v(" "),a("div",{style:e.cover_2}),e._v(" "),a("div",{staticClass:"cover-right",style:e.cover_1},[a("div")])]),e._v(" "),a("el-image",{staticClass:"text-trumpet",attrs:{src:"/static/images/icon/trumpet.png"}})],1):e._e(),e._v(" "),"type-frame-three"===t.id?a("div",{staticClass:"type-frame-three",on:{click:function(t){return e.openDrawer(i)}}},e._l(t.list,function(t,i){return a("div",{key:i,staticClass:"type-element"},[a("div",[a("el-image",{staticClass:"type-icon",attrs:{src:t.icon}})],1),e._v(" "),a("span",{staticClass:"type-name"},[e._v(e._s(t.name))])])}),0):e._e(),e._v(" "),"type-frame-four"===t.id?a("div",{staticClass:"type-frame-four",on:{click:function(t){return e.openDrawer(i)}}},e._l(t.list,function(t,i){return a("div",{key:i,staticClass:"type-element"},[a("div",[a("el-image",{staticClass:"type-icon",attrs:{src:t.icon}})],1),e._v(" "),a("span",{staticClass:"type-name"},[e._v(e._s(t.name))])])}),0):e._e(),e._v(" "),"img-text-title"===t.id?a("div",{staticClass:"img-text-title",on:{click:function(t){return e.openDrawer(i)}}},[e._l(t.list,function(e,t){return a("el-image",{key:t,staticClass:"img-text-title-image",attrs:{src:e.icon}})}),e._v(" "),a("span",{staticClass:"img-text-title-text"},[e._v("\n              "+e._s(t.title)+"\n              "),""!=t.describe?a("span",[e._v(" | "),a("span",[e._v(e._s(t.describe))])]):e._e()])],2):e._e(),e._v(" "),"img-title"===t.id?a("div",{staticClass:"img-title",on:{click:function(t){return e.openDrawer(i)}}},e._l(t.list,function(e,t){return a("el-image",{key:t,staticClass:"image",attrs:{src:e.icon}})}),1):e._e(),e._v(" "),"goods-two-row"===t.id?a("div",{staticClass:"goods-two-row",on:{click:function(t){return e.openDrawer(i)}}},e._l(t.list,function(t,i){return a("div",{key:i,staticClass:"goods-def"},[a("div",[a("el-image",{staticClass:"goods-img",attrs:{src:t.goodsIcon}})],1),e._v(" "),a("div",{staticClass:"goods-price"},[e._v("\n                ¥"+e._s(e._f("addZero")(t.minPrice))+"\n                "),t.minPrice<t.maxPrice?a("span",[e._v("-"+e._s(e._f("addZero")(t.maxPrice)))]):e._e()]),e._v(" "),a("div",{staticClass:"goods-name"},[e._v(e._s(t.name))])])}),0):e._e(),e._v(" "),"divider-title"===t.id?a("div",{staticClass:"divider-title",on:{click:function(t){return e.openDrawer(i)}}},[a("div",{staticClass:"divider-line"}),e._v(" "),a("span",{staticClass:"c-divider"},[a("span",[e._v(e._s(t.title))])])]):e._e(),e._v(" "),"goods-three-row"===t.id?a("div",{staticClass:"goods-three-row",on:{click:function(t){return e.openDrawer(i)}}},e._l(t.list,function(t,i){return a("div",{key:i,staticClass:"goods-def"},[a("div",[a("el-image",{staticClass:"goods-img",attrs:{src:t.goodsIcon}})],1),e._v(" "),a("div",{staticClass:"goods-price"},[e._v("\n                ¥"+e._s(e._f("addZero")(t.minPrice))+"\n                "),t.minPrice<t.maxPrice?a("span",[e._v("-"+e._s(e._f("addZero")(t.maxPrice)))]):e._e()]),e._v(" "),a("div",{staticClass:"goods-name"},[e._v(e._s(t.name))])])}),0):e._e(),e._v(" "),"imgX-scroll"===t.id?a("div",{ref:"imgXScroll",refInFor:!0,staticClass:"bscroll imgX-scroll",on:{click:function(t){return e.openDrawer(i)}}},[a("div",{staticClass:"bscroll-container",style:e.imgXScrollStyle},e._l(t.list,function(e,t){return a("el-image",{key:t,staticClass:"image",attrs:{src:e.icon}})}),1)]):e._e(),e._v(" "),"imgY-scroll"===t.id?a("div",{ref:"imgYScroll",refInFor:!0,staticClass:"bscroll imgY-scroll",on:{click:function(t){return e.openDrawer(i)}}},[a("div",{staticClass:"bscroll-container",style:e.imgYScrollStyle},e._l(t.list,function(e,t){return a("el-image",{key:t,staticClass:"image",attrs:{src:e.icon}})}),1)]):e._e(),e._v(" "),"goodsY-scroll"===t.id?a("div",{ref:"goodsYScroll",refInFor:!0,staticClass:"bscroll goodsY-scroll",on:{click:function(t){return e.openDrawer(i)}}},[a("div",{staticClass:"bscroll-container",style:e.goodsYScrollStyle},e._l(t.list,function(t,i){return a("div",{key:i,staticClass:"goods-def"},[a("div",[a("el-image",{staticClass:"goods-img",staticStyle:{"border-radius":"10px 10px 0px 0px"},attrs:{src:t.goodsIcon}})],1),e._v(" "),a("div",{staticClass:"goods-price"},[e._v("\n                  ¥"+e._s(e._f("addZero")(t.minPrice))+"\n                  "),t.minPrice<t.maxPrice?a("span",[e._v("-"+e._s(e._f("addZero")(t.maxPrice)))]):e._e()]),e._v(" "),a("div",{staticClass:"goods-name"},[e._v(e._s(t.name))])])}),0)]):e._e(),e._v(" "),"goodsX-scroll"===t.id?a("div",{ref:"goodsXScroll",refInFor:!0,staticClass:"bscroll goodsX-scroll",on:{click:function(t){return e.openDrawer(i)}}},[a("div",{staticClass:"bscroll-container",style:e.goodsXScrollStyle},e._l(t.list,function(t,i){return a("div",{key:i,staticClass:"goods-def"},[a("el-image",{staticClass:"goods-img",staticStyle:{"border-radius":"5px"},attrs:{src:t.goodsIcon}}),e._v(" "),a("div",[a("div",{staticClass:"goods-price"},[e._v("现价："),a("span",[e._v(e._s(e._f("addZero")(t.minPrice)))])]),e._v(" "),a("div",{staticClass:"goods-price"},[e._v("原价："),a("span",{staticStyle:{"font-size":"14px","text-decoration":"line-through"}},[e._v(e._s(e._f("addZero")(t.maxPrice)))])]),e._v(" "),a("div",{staticClass:"goods-name"},[e._v(e._s(t.name))]),e._v(" "),a("div",{staticStyle:{width:"120px",height:"30px",display:"inline-block"}})])],1)}),0)]):e._e()])}),0)],1),e._v(" "),a("el-drawer",{ref:"drawerPage",attrs:{title:e.drawerTitle,visible:e.drawer,direction:"rtl",modal:!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.drawer=t}}},[a("el-scrollbar",{style:e.drawerstyle},[a("StoreMainPart",{ref:"StoreMainPart",on:{refreshSet:e.refreshSet}})],1)],1)],1)],1)},staticRenderFns:[]};var ut={name:"page-default",components:{storeMain:a("VU/8")(dt,pt,!1,function(e){a("0FBT")},null,null).exports},data:function(){return{tabsHeight:""+(document.documentElement.scrollHeight+50),tabHeight:""+(document.documentElement.scrollHeight-25),loading:!1,showTabs:"",fileTypeId:this.$cookies.get("file_type_id"),pageId:this.$cookies.get("default_page_id"),pageList:[]}},created:function(){var e=this.$cookies.get("page_file_id");this.loadPageDefault(e)},mounted:function(){},methods:{loadPageDefault:function(e){var t=this;this.loading=!0,this.$axios({url:"/api/manage/applet/page/loadPageDefault",method:"post",data:{fileId:e}}).then(function(e){"1"===e.data.code?(t.pageList=e.data.data,t.showTabs="page"+t.pageId):t.$message.error({message:e.data.data,duration:2e3,onClose:function(){window.close()}}),t.$global.exitLoad(t,null,e.data)}).catch(function(e){console.info("错误信息",e),t.$global.exitLoad(t,null,"")})}}},mt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"default-main",attrs:{"element-loading-text":"加载中"}},[1==e.fileTypeId?a("el-tabs",{style:{height:e.tabsHeight+"px"},attrs:{type:"border-card"},model:{value:e.showTabs,callback:function(t){e.showTabs=t},expression:"showTabs"}},e._l(e.pageList,function(t,i){return a("el-tab-pane",{key:i,style:{height:e.tabHeight+"px"},attrs:{label:t.pageName,name:"page"+t.id}},[e._v("\n        "+e._s(t.pageLogo+"-"+t.pageName)+"\n      ")])}),1):e._e(),e._v(" "),2==e.fileTypeId?a("el-tabs",{style:{height:e.tabsHeight+"px"},attrs:{type:"border-card"},model:{value:e.showTabs,callback:function(t){e.showTabs=t},expression:"showTabs"}},e._l(e.pageList,function(t,i){return a("el-tab-pane",{key:i,style:{height:e.tabHeight+"px"},attrs:{label:t.pageName,name:"page"+t.id}},["MAIN"==t.pageLogo?a("storeMain",{attrs:{trf:"storeMain"}}):e._e()],1)}),1):e._e(),e._v(" "),3==e.fileTypeId?a("el-tabs",{style:{height:e.tabsHeight+"px"},attrs:{type:"border-card"},model:{value:e.showTabs,callback:function(t){e.showTabs=t},expression:"showTabs"}},e._l(e.pageList,function(t,i){return a("el-tab-pane",{key:i,style:{height:e.tabHeight+"px"},attrs:{label:t.pageName,name:"page"+t.id}},[e._v("\n        "+e._s(t.pageLogo+"-"+t.pageName)+"\n      ")])}),1):e._e()],1)],1)},staticRenderFns:[]};var ft=a("VU/8")(ut,mt,!1,function(e){a("xkg6")},null,null).exports;n.default.use(c.a);var gt=new c.a({routes:[{path:"/",name:"index",component:f},{path:"/main-info",name:"main-info",component:nt},{path:"/page-default",name:"page-default",component:ft}]}),ht=(a("tvR6"),a("mtWM")),vt=a.n(ht),bt=a("Rf8U"),_t=a.n(bt),yt=a("ppUw"),xt=a.n(yt),wt=a("7VfX"),St=a.n(wt),kt={checkLogin:function(e){var t=e.$cookies.get("user_info");return"null"!==t&&null!==t},exitLoad:function(e,t,a){if(null===t?e.loading=!1:e.$nextTick(function(){t.close()}),""===a)e.$message.error("当前访问人数过多，请稍后再试");else if("0"===a.code||"-2"===a.code){var i="0"===a.code?"登录过期，请重新登录":"没有访问权限！";e.$message({message:i,type:"error",onClose:function(){e.$cookies.remove("manager_info"),e.$router.push({path:"/"})}})}else{var o=e.$cookies.get("manager_info");e.$cookies.set("manager_info",o,3600)}},validate:function(e){return{userNameValidator:function(t,a,i){e.$axios({url:"/api/manage/checkUserNameRegistered",method:"post",data:{userName:a}}).then(function(e){"1"!=e.data.code?i(new Error(e.data.data)):i()}).catch(function(e){console.info("错误信息",e),i(new Error("该账户已被注册"))})},mobileValidator:function(e,t,a){t&&!/^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(17[013678])|(18[0,3,5-9]))\d{8}$/.test(t)?a(new Error("手机号码格式不正确!")):a()},emailValidator:function(e,t,a){t&&!/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(t)?a(new Error("邮箱格式不正确!")):a()},managerPasswordValidator:function(t,a,i){var o=e.getManagerId();if(o&&""!=o)try{a.length<1?i():a.length>=6&&a.length<=20?i():a.length>20||a.length<6&&a.length>0?i(new Error("密码长度为6-20个字符")):i(new Error("请输入密码"))}catch(e){i()}else a.length>=6&&a.length<=20?i():a.length>20||a.length<6&&a.length>0?i(new Error("密码长度为6-20个字符")):i(new Error("请输入密码"))},managerConfirmPasswordValidator:function(t,a,i){var o=e.getManagerId(),n=e.getPassword();if(o&&""!=o)try{if(n.length>0)try{a.length<1?i():a.length>=6&&a.length<=20?i():a.length>20||a.length<6&&a.length>0?i(new Error("确认密码长度为6-20个字符")):i(new Error("请输入确认密码"))}catch(e){i(new Error("请输入确认密码"))}else i()}catch(e){i()}else a.length>=6&&a.length<=20?a===n?i():i(new Error("两次输入密码不一致")):a.length>20||a.length<6&&a.length>0?i(new Error("确认密码长度为6-20个字符")):i(new Error("请输入确认密码"))}}},setTableHeight:function(e,t){try{var a=e.$cookies.get("tabPaneHeight"),i=document.getElementById(t).offsetHeight;e.tableHeight=a-i-70}catch(e){}},setAppendTableHeight:function(e,t){try{var a=e.$cookies.get("tabPaneHeight"),i=document.getElementById(t).offsetHeight;e.tableHeight=a-i-250}catch(e){}},selectRegionJson:function(e){e.regions=[],e.$axios({url:"/api/selectRegionJson",method:"post"}).then(function(t){e.regions=JSON.parse(t.data.data),e.loading=!1}).catch(function(e){return console.info("错误信息",e),null})},selectRegionList:function(e,t,a){e.$axios({url:"/api/selectRegionList",method:"post",data:{id:t}}).then(function(t){"1"===a?e.provList=t.data.data:"2"===a?e.cityList=t.data.data:(e.countyList=t.data.data,e.loading=!1)}).catch(function(e){return console.info("错误信息",e),null})},baseToGet:function(e){for(var t=w()(e),a="",i=0;i<t.length;i++)switch(t[i]){case"{":case"}":case'"':a+="";break;case":":a+="=";break;case",":a+="&";break;default:a+=t[i]}return a}},$t=a("VU/8")(kt,null,!1,null,null,null).exports,Ft=a("GQaK"),It=[],Ct=[{id:"goods-search",name:"搜索栏"},{id:"img-carousel",name:"轮播图",list:[{goodsId:"",goodsIcon:"",icon:"/static/images/carousel/carousel-1.png"}]},{id:"notice-bar",name:"通告栏",describe:"编辑通知内容，发布最新消息"},{id:"type-frame-three",name:"分类栏（三排）",list:[{typeId:"0",name:"type",icon:"/static/images/icon/shopping.png"}]},{id:"type-frame-four",name:"分类栏（四排）",list:[{typeId:"0",name:"type",icon:"/static/images/icon/shopping.png"}]},{id:"img-text-title",name:"图文标题",title:"拼团更实惠",describe:"团购促销，多买多降",list:[{icon:"/static/images/icon/shopping.png"}]},{id:"goods-two-row",name:"推荐商品（双排）",list:[{goodsId:"0",name:"商品名称",minPrice:166.66,maxPrice:188.88,discount:100,goodsIcon:"/static/images/goods/goods-1.png"}]},{id:"divider-title",name:"分隔符标题",title:"拼团更实惠"},{id:"img-title",name:"图片标题",list:[{goodsId:"",goodsIcon:"",icon:"/static/images/carousel/carousel-1.png"}]},{id:"goods-three-row",name:"推荐商品（三排）",list:[{goodsId:"0",name:"商品名称",minPrice:166.66,maxPrice:188.88,discount:100,goodsIcon:"/static/images/goods/goods-1.png"}]},{id:"imgX-scroll",name:"图片滑块（横）",list:[{goodsId:"",goodsIcon:"",icon:"/static/images/carousel/carousel-1.png"}]},{id:"imgY-scroll",name:"图片滑块（竖）",list:[{goodsId:"",goodsIcon:"",icon:"/static/images/carousel/carousel-1.png"}]},{id:"goodsY-scroll",name:"商品滑块（普通）",list:[{goodsId:"0",name:"商品名称",minPrice:166.66,maxPrice:188.88,discount:100,goodsIcon:"/static/images/goods/goods-1.png"}]},{id:"goodsX-scroll",name:"商品滑块（折扣）",list:[{goodsId:"0",name:"商品名称",minPrice:166.66,maxPrice:188.88,discount:100,goodsIcon:"/static/images/goods/goods-1.png"}]}],Lt=function(e){return It.find(function(t){return t.id===e})},Nt={getPartList:function(){return It},setPartList:function(e){It=e},getStoreList:function(){return Ct},getStorePart:function(e){return Ct.find(function(t){return t.id===e})},_initStoreScroll:function(e){try{e.$nextTick(function(){var t=Lt("imgX-scroll");if(t){var a=t.list.length;e.imgXScrollStyle={width:240*a+"px"},e.aBScroll=new Ft.a(e.$refs.imgXScroll[0],{startX:0,scrollX:!0,click:!0})}if(t=Lt("imgY-scroll")){var i=t.list.length;e.imgYScrollStyle={width:140*i+"px"},e.aBScroll=new Ft.a(e.$refs.imgYScroll[0],{startX:0,scrollX:!0,click:!0})}if(t=Lt("goodsY-scroll")){var o=t.list.length;e.goodsYScrollStyle={width:220*o+"px"},e.aBScroll=new Ft.a(e.$refs.goodsYScroll[0],{startX:0,scrollX:!0,click:!0})}if(t=Lt("goodsX-scroll")){var n=t.list.length;e.goodsXScrollStyle={width:280*n+"px"},e.aBScroll=new Ft.a(e.$refs.goodsXScroll[0],{startX:0,scrollX:!0,click:!0})}})}catch(e){console.info("错误信息：",e)}}},Tt=a("VU/8")(Nt,null,!1,null,null,null).exports;n.default.filter("addZero",function(e){try{return parseFloat(e).toFixed(2)}catch(e){return 0}}),n.default.use(p.a,{size:"small",zIndex:3e3}),n.default.use(_t.a,vt.a),n.default.use(xt.a),n.default.use(St.a),n.default.config.productionTip=!1,n.default.prototype.$axios=vt.a,n.default.prototype.$cookies=xt.a,n.default.prototype.$global=$t,n.default.prototype.$part=Tt,vt.a.interceptors.request.use(function(e){var t=e.data,a=new URLSearchParams;for(var i in e.data)a.append(i,t[i]);return e.data=a,e.headers.ipAddress=xt.a.get("ip_address"),e.headers.cityCode=xt.a.get("city_code"),e},function(e){return o.a.reject(e)}),new n.default({el:"#app",router:gt,components:{App:r},template:"<App/>"})},NTam:function(e,t){},NfF5:function(e,t){},OYO2:function(e,t){},OhSH:function(e,t){},T3Nv:function(e,t){},TCT2:function(e,t){},X6wT:function(e,t){},YFMN:function(e,t){},"bh/j":function(e,t){},cuKt:function(e,t){},fIJG:function(e,t){},gbyy:function(e,t){},kUj6:function(e,t){},ouQP:function(e,t){},"q+31":function(e,t){},riAk:function(e,t){},se6H:function(e,t){},tpW2:function(e,t){},tvR6:function(e,t){},xMBH:function(e,t){},xkg6:function(e,t){},ymBF:function(e,t){},"zF+b":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.8a2de5314d400bb71e62.js.map